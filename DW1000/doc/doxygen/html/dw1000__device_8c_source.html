<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>third_party/decawave/dw1000/drivers/dw1000_device.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Open-Thread-Logo-200x42.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">CLI and NCP Application</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_44f42edf5dd23d4deca0321224e9ce90.html">third_party</a></li><li class="navelem"><a class="el" href="dir_06b407332b717b2644662aab3d72541b.html">decawave</a></li><li class="navelem"><a class="el" href="dir_5c4f6482485c3a7c5dc6931dcb73150a.html">dw1000</a></li><li class="navelem"><a class="el" href="dir_d344e6bde63461ed9d95d0814ad511e5.html">drivers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">dw1000_device.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="dw1000__device_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dw1000__types_8h.html">dw1000_types.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dw1000__param__types_8h.html">dw1000_param_types.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dw1000__regs_8h.html">dw1000_regs.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dw1000__device__api_8h.html">dw1000_device_api.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;port.h&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dw1000__driver_8h.html">dw1000_driver.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dw1000__spi_8h.html">dw1000_spi.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#ifdef OT_CLI_NCP_APP</span></div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a504054184f85d8d00694d85646e61753">   26</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="dw1000__device_8c.html#a504054184f85d8d00694d85646e61753">read_data</a>[150]    =   {0};</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a90f06e0bbb8091d85bc7b509f051ea2e">   27</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="dw1000__device_8c.html#a90f06e0bbb8091d85bc7b509f051ea2e">header_write</a>[150] =   {0};</div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#aff798c733da0a633e039fdbdfb901420">   28</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="dw1000__device_8c.html#aff798c733da0a633e039fdbdfb901420">header_read</a>[150]  =   {0};</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// Defines for enable_clocks function</span></div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a010589037eade55b18f20b926ba264a7">   32</a></span>&#160;<span class="preprocessor">#define FORCE_SYS_XTI  0</span></div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#ac221d4cf7229596db907b498bc32f3b9">   33</a></span>&#160;<span class="preprocessor">#define ENABLE_ALL_SEQ 1</span></div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a97b2504be8a616c03fe6c599556fd65b">   34</a></span>&#160;<span class="preprocessor">#define FORCE_SYS_PLL  2</span></div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a776a03f15d8b282cf46f8fd06feb4b2f">   35</a></span>&#160;<span class="preprocessor">#define READ_ACC_ON    7</span></div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a7c6e63f591e4cc18c89bc8698f4609ea">   36</a></span>&#160;<span class="preprocessor">#define READ_ACC_OFF   8</span></div><div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#ad0980165476f8cd9018b984c6a568fcf">   37</a></span>&#160;<span class="preprocessor">#define FORCE_OTP_ON   11</span></div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a357b3fe99717e5b53f9ba7bd1784e809">   38</a></span>&#160;<span class="preprocessor">#define FORCE_OTP_OFF  12</span></div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a6234c079d27cfada8bd5400f513a7d27">   39</a></span>&#160;<span class="preprocessor">#define FORCE_TX_PLL   13</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// #define DWT_API_ERROR_CHECK     // define so API checks config input parameters</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// -------------------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// Internal functions for controlling and configuring the device</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// -------------------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// Enable and Configure specified clocks</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<span class="keywordtype">int</span> clocks) ;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// Configure the ucode (FP algorithm) parameters</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a031e6bc47527a11af30c4e66b0dd81ca">_dwt_configlde</a>(<span class="keywordtype">int</span> prf);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// load ucode from OTP/ROM</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a561b63c1057ca00783f31202aef965b7">_dwt_loaducodefromrom</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">//read non-volatile memory</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> address);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">//program the non-volatile memory</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device_8c.html#a5623a976649c9a1af2b33660a37677cc">_dwt_otpprogword32</a>(<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> data, <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> address);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//upload the device configuration into always on memory</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a72ae86bde280af3cd6e4e76d85839c8a">_dwt_aonarrayupload</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">// -------------------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">// -------------------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">// structure to hold device data</span></div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html">   69</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a9050db8f9a02d0d662b6465b0adc1e57">   71</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>      <a class="code" href="structdwt__local__data__t.html#a9050db8f9a02d0d662b6465b0adc1e57">deviceID</a> ;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#ab9d034b097c34d26efea11ba23beff26">   72</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>      <a class="code" href="structdwt__local__data__t.html#ab9d034b097c34d26efea11ba23beff26">partID</a> ;</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#ab8a0ab332238d798253da436e282929e">   73</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>      <a class="code" href="structdwt__local__data__t.html#ab8a0ab332238d798253da436e282929e">lotID</a> ;</div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a6ff26392da12ba104315ee7b4fdb8d3a">   74</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>       <a class="code" href="structdwt__local__data__t.html#a6ff26392da12ba104315ee7b4fdb8d3a">chan</a>;               <span class="comment">// added chan here - used in the reading of acc</span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a1edf13f67bcb9a6a6154f08a55e79a57">   75</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>       <a class="code" href="structdwt__local__data__t.html#a1edf13f67bcb9a6a6154f08a55e79a57">longFrames</a> ;        <span class="comment">// flag in non-standard long frame mode</span></div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#adae9176fcfd802171a4a4b5194a776e6">   76</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>       <a class="code" href="structdwt__local__data__t.html#adae9176fcfd802171a4a4b5194a776e6">otprev</a> ;            <span class="comment">// OTP revision number (read during initialisation)</span></div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a2503135d28aad5e11612957e95d48bfb">   77</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>      <a class="code" href="structdwt__local__data__t.html#a2503135d28aad5e11612957e95d48bfb">txFCTRL</a> ;           <span class="comment">// keep TX_FCTRL register config</span></div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a47c17151703c346cfcb1792dfba4afae">   78</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>      <a class="code" href="structdwt__local__data__t.html#a47c17151703c346cfcb1792dfba4afae">rfrxDly</a>;            <span class="comment">// rf delay (delay though the RF blocks before the signal comes out of the antenna i.e. &quot;antenna delay&quot;)</span></div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a482777627c9f1b1f8cf5adb806a5c3a3">   79</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>      <a class="code" href="structdwt__local__data__t.html#a482777627c9f1b1f8cf5adb806a5c3a3">rftxDly</a>;            <span class="comment">// rf delay (delay though the RF blocks before the signal comes out of the antenna i.e. &quot;antenna delay&quot;)</span></div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#aece338b02ebc20833689583f3b2c53de">   80</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>      <a class="code" href="structdwt__local__data__t.html#aece338b02ebc20833689583f3b2c53de">antennaDly</a>;         <span class="comment">// antenna delay read from OTP 64 PRF value is in high 16 bits and 16M PRF in low 16 bits</span></div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#ad5cd6013b0e1ce4eaeeadc61de291a52">   81</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>      antennaCals[4];     <span class="comment">// antenna delays for the TREKs (Anchor high 16-bits, Tag low 16-bits)</span></div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#acd0df5b9fd62d1822c540456ccc34b20">   82</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>       <a class="code" href="structdwt__local__data__t.html#acd0df5b9fd62d1822c540456ccc34b20">xtrim</a>;              <span class="comment">// xtrim value read from OTP</span></div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a0a8aef2235301662aa0be5824dc1f8c1">   83</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>       <a class="code" href="structdwt__local__data__t.html#a0a8aef2235301662aa0be5824dc1f8c1">dblbuffon</a>;          <span class="comment">// double rx buffer mode flag</span></div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">   84</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>      <a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> ;         <span class="comment">// local copy of system config register</span></div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a473fc1d0c26c25966d48545ef3a233f7">   85</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>      txPowCfg[12];       <span class="comment">// stores the Tx power configuration read from OTP (6 channels consecutively with PRF16 then 64, e.g. Ch 1 PRF16 is index 0 and 64 index 1)</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">   87</a></span>&#160;    <a class="code" href="structdwt__callback__data__t.html">dwt_callback_data_t</a> <a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>;      <span class="comment">// callback data structure</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a6695d39f3252c3816ad8caf6afe0a3a1">   89</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>      states[3] ;         <span class="comment">//MP workaround debug states register</span></div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a251759613154ca3433c3cba451549817">   90</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>       <a class="code" href="structdwt__local__data__t.html#a251759613154ca3433c3cba451549817">statescount</a> ;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">   91</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>       <a class="code" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">wait4resp</a> ;         <span class="comment">//wait 4 response was set with last TX start command</span></div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a8fab147ea1692d2bf7b881c6b6799ed6">   92</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdwt__local__data__t.html#a8fab147ea1692d2bf7b881c6b6799ed6">prfIndex</a> ;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a4270a1ec7815d465a8293e06fea8b0d1">   94</a></span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>      <a class="code" href="structdwt__local__data__t.html#a4270a1ec7815d465a8293e06fea8b0d1">ldoTune</a> ;           <span class="comment">//low 32 bits of LDO tune value</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a5a2dd846e1a10ed5412c9f4d6573483f">   96</a></span>&#160;    void (*dwt_txcallback)(<span class="keyword">const</span> <a class="code" href="structdwt__callback__data__t.html">dwt_callback_data_t</a> *txd);</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">   97</a></span>&#160;    void (*dwt_rxcallback)(<span class="keyword">const</span> <a class="code" href="structdwt__callback__data__t.html">dwt_callback_data_t</a> *rxd);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;} <a class="code" href="structdwt__local__data__t.html">dwt_local_data_t</a> ;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keyword">static</span> <a class="code" href="structdwt__local__data__t.html">dwt_local_data_t</a> dw1000local ; <span class="comment">// Static local device data</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">//OTP addresses definitions</span></div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a101a968eecb54ce0e8d886da091915d7">  129</a></span>&#160;<span class="preprocessor">#define LDOTUNE_ADDRESS (0x04)</span></div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a20a9c6e55b79ee01f3d04b06ad3bf3c6">  130</a></span>&#160;<span class="preprocessor">#define PARTID_ADDRESS (0x06)</span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#abade61f66f8f908c99196d93e9f9e93a">  131</a></span>&#160;<span class="preprocessor">#define LOTID_ADDRESS  (0x07)</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a3196c054383e451ebd660242cb7b2b3a">  132</a></span>&#160;<span class="preprocessor">#define VBAT_ADDRESS   (0x08)</span></div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#ac1d7df51dca04440fb8f49d90ef43502">  133</a></span>&#160;<span class="preprocessor">#define VTEMP_ADDRESS  (0x09)</span></div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#ab681a33f95c03bc1bdb0059d08f1dbcc">  134</a></span>&#160;<span class="preprocessor">#define TXCFG_ADDRESS  (0x10)</span></div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a52fa78420db709170dd76da41662c52e">  135</a></span>&#160;<span class="preprocessor">#define ANTDLY_ADDRESS (0x1C)</span></div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a81f8fa4cb2400d5acba5c0211ff98fa6">  136</a></span>&#160;<span class="preprocessor">#define XTRIM_ADDRESS  (0x1E)</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#addd22339317f8737147dd76e7f0acbff">  138</a></span>&#160;<span class="preprocessor">#define TREK_ANTDLY_1  (0xD)</span></div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a0bedda2ad24ec0ccc6e8fab8eb44afc2">  139</a></span>&#160;<span class="preprocessor">#define TREK_ANTDLY_2  (0xE)</span></div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a569a6d7f6705a80612965eb77aa378de">  140</a></span>&#160;<span class="preprocessor">#define TREK_ANTDLY_3  (0xF)</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a55117f226695e42d20c096a116cf2a9d">  141</a></span>&#160;<span class="preprocessor">#define TREK_ANTDLY_4  (0x1D)</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a07a99b44438cce30af436a30a285b649">  143</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a07a99b44438cce30af436a30a285b649">dwt_initialise</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> config)</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> plllockdetect = <a class="code" href="dw1000__regs_8h.html#a63b90d34bff80c53f7fb9a9c0d853416">EC_CTRL_PLLLCK</a>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> otp_addr = 0;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a251759613154ca3433c3cba451549817">statescount</a> = 0;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a0a8aef2235301662aa0be5824dc1f8c1">dblbuffon</a> = 0; <span class="comment">//double mode off by default</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a8fab147ea1692d2bf7b881c6b6799ed6">prfIndex</a> = 0; <span class="comment">//16M</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a7549813331cfdf08243e7a3420380967">aatset</a> = 0;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a4270a1ec7815d465a8293e06fea8b0d1">ldoTune</a> = 0;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">wait4resp</a> = 0;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a5a2dd846e1a10ed5412c9f4d6573483f">dwt_txcallback</a> = <a class="code" href="_s_e_g_g_e_r___r_t_t_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a> = <a class="code" href="_s_e_g_g_e_r___r_t_t_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a9050db8f9a02d0d662b6465b0adc1e57">deviceID</a> =  <a class="code" href="dw1000__device_8c.html#a71615163f91308dc3a6525fe9cc43d49">dwt_readdevid</a>() ;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// read and validate device ID return -1 if not recognized</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dw1000__device__api_8h.html#a4ae9b2f0900bcea30b64b66b8b9efc51">DWT_DEVICE_ID</a> != dw1000local.<a class="code" href="structdwt__local__data__t.html#a9050db8f9a02d0d662b6465b0adc1e57">deviceID</a>) <span class="comment">// MP IC ONLY (i.e. DW1000) FOR THIS CODE</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#a010589037eade55b18f20b926ba264a7">FORCE_SYS_XTI</a>); <span class="comment">//NOTE: set system clock to XTI - this is necessary to make sure the values read by _dwt_otpread are reliable</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">//configure the CPLL lock detect</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a64622dd183f6b30f00b672e307637fc5">EXT_SYNC_ID</a>, <a class="code" href="dw1000__regs_8h.html#ae387a95682925af3d85811debb9a9deb">EC_CTRL_OFFSET</a>, 1, &amp;plllockdetect); <span class="comment">//</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">//read OTP revision number</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    otp_addr = <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device_8c.html#a81f8fa4cb2400d5acba5c0211ff98fa6">XTRIM_ADDRESS</a>) &amp; 0xffff;        <span class="comment">// Read 32 bit value, XTAL trim val is in low octet-0 (5 bits)</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#adae9176fcfd802171a4a4b5194a776e6">otprev</a> = (otp_addr &gt;&gt; 8) &amp; 0xff;            <span class="comment">// OTP revision is next byte</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span>(config &amp; <a class="code" href="dw1000__device__api_8h.html#a5e59f08ca76438d4a40b999b31a268a7">DWT_LOADLDOTUNE</a>)</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#a4270a1ec7815d465a8293e06fea8b0d1">ldoTune</a> = <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device_8c.html#a101a968eecb54ce0e8d886da091915d7">LDOTUNE_ADDRESS</a>);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span>((dw1000local.<a class="code" href="structdwt__local__data__t.html#a4270a1ec7815d465a8293e06fea8b0d1">ldoTune</a> &amp; 0xFF) != 0) <span class="comment">//LDO tune values are stored in the OTP</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> ldok = <a class="code" href="dw1000__regs_8h.html#aacd4a9ec5fb9e7c694f668a31d254763">OTP_SF_LDO_KICK</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="comment">//kick LDO tune</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a1e769cec1bd763209dcd20e33b71cd45">OTP_SF</a>, 1, &amp;ldok); <span class="comment">// set load LDE kick bit</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#a4270a1ec7815d465a8293e06fea8b0d1">ldoTune</a> = 0;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#ab9d034b097c34d26efea11ba23beff26">partID</a> = <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device_8c.html#a20a9c6e55b79ee01f3d04b06ad3bf3c6">PARTID_ADDRESS</a>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#ab8a0ab332238d798253da436e282929e">lotID</a> = <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device_8c.html#abade61f66f8f908c99196d93e9f9e93a">LOTID_ADDRESS</a>);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// Zero all antenna delay calibration values</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#aece338b02ebc20833689583f3b2c53de">antennaDly</a> = 0;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;4; i++)</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#ad5cd6013b0e1ce4eaeeadc61de291a52">antennaCals</a>[i] = 0 ;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span>(config &amp; <a class="code" href="dw1000__device__api_8h.html#ad9c90f4d0f0ebfcea5db53ee1938083f">DWT_LOADANTDLY</a>) <span class="comment">// if we are loading antenna delays from OTP</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">if</span>( dw1000local.<a class="code" href="structdwt__local__data__t.html#adae9176fcfd802171a4a4b5194a776e6">otprev</a> &lt;= 1)    <span class="comment">// in revision 0, 1 of EVB1000/EVK1000</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#aece338b02ebc20833689583f3b2c53de">antennaDly</a> = <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device_8c.html#a52fa78420db709170dd76da41662c52e">ANTDLY_ADDRESS</a>);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#adae9176fcfd802171a4a4b5194a776e6">otprev</a> &lt;= 3)    <span class="comment">// i.e. OTP version is 2 or 3 it is calibrated for TREK use cases</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="comment">//read antenna delays</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#ad5cd6013b0e1ce4eaeeadc61de291a52">antennaCals</a>[0] = <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device_8c.html#addd22339317f8737147dd76e7f0acbff">TREK_ANTDLY_1</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#ad5cd6013b0e1ce4eaeeadc61de291a52">antennaCals</a>[1] = <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device_8c.html#a0bedda2ad24ec0ccc6e8fab8eb44afc2">TREK_ANTDLY_2</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#ad5cd6013b0e1ce4eaeeadc61de291a52">antennaCals</a>[2] = <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device_8c.html#a569a6d7f6705a80612965eb77aa378de">TREK_ANTDLY_3</a>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#ad5cd6013b0e1ce4eaeeadc61de291a52">antennaCals</a>[3] = <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device_8c.html#a55117f226695e42d20c096a116cf2a9d">TREK_ANTDLY_4</a>);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span>(config &amp; <a class="code" href="dw1000__device__api_8h.html#a1a2cfe15de3f84ac190d6baa32c8a510">DWT_LOADXTALTRIM</a>)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#acd0df5b9fd62d1822c540456ccc34b20">xtrim</a> = otp_addr &amp; 0x1F;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span> ( !dw1000local.<a class="code" href="structdwt__local__data__t.html#acd0df5b9fd62d1822c540456ccc34b20">xtrim</a> )</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;              dw1000local.<a class="code" href="structdwt__local__data__t.html#acd0df5b9fd62d1822c540456ccc34b20">xtrim</a> = <a class="code" href="dw1000__param__types_8h.html#a818a43553162403e0beca1ecb718c9c6">pll2calcfg</a> &amp; 0x1F ; <span class="comment">// set to mid-range if no calibration value inside</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#acd0df5b9fd62d1822c540456ccc34b20">xtrim</a> = <a class="code" href="dw1000__param__types_8h.html#a818a43553162403e0beca1ecb718c9c6">pll2calcfg</a> &amp; 0x1F ; <span class="comment">// set to mid-range default as described in UM 8.1.1 Calibration Method</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span>(config &amp; <a class="code" href="dw1000__device__api_8h.html#a4df9dc921c5248ae44a9bf1857ef415d">DWT_LOADTXCONFIG</a>)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">for</span>(i=0; i&lt;12; i++)</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a473fc1d0c26c25966d48545ef3a233f7">txPowCfg</a>[i] = <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device_8c.html#ab681a33f95c03bc1bdb0059d08f1dbcc">TXCFG_ADDRESS</a>+i);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">for</span>(i=0; i&lt;12; i++)</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a473fc1d0c26c25966d48545ef3a233f7">txPowCfg</a>[i] = 0;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">// load leading edge detect code</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span>(config &amp; <a class="code" href="dw1000__device__api_8h.html#a878ff6abe1725173b61ee609b32d9e3c">DWT_LOADUCODE</a>)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="dw1000__device_8c.html#a561b63c1057ca00783f31202aef965b7">_dwt_loaducodefromrom</a>();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">else</span> <span class="comment">//should disable the LDERUN enable bit in 0x36, 0x4</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> rega = <a class="code" href="dw1000__device_8c.html#ad05be2265afb31a2b4b39a68d55015c2">dwt_read16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, <a class="code" href="dw1000__regs_8h.html#a206f9d67a93e9b452f2a5695e46a8dc1">PMSC_CTRL1_OFFSET</a>+1) ;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        rega &amp;= 0xFDFF ; <span class="comment">//clear LDERUN bit</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, <a class="code" href="dw1000__regs_8h.html#a206f9d67a93e9b452f2a5695e46a8dc1">PMSC_CTRL1_OFFSET</a>+1, rega) ;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#ac221d4cf7229596db907b498bc32f3b9">ENABLE_ALL_SEQ</a>); <span class="comment">//enable clocks for sequencing</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">//read system register / store local copy</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> = <a class="code" href="dw1000__device__api_8h.html#a0c17221ed7c973aba944f41f2cadd621">dwt_read32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>) ;            <span class="comment">// read sysconfig register</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> reg;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="comment">// Set up MFIO</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        reg = <a class="code" href="dw1000__device__api_8h.html#a0c17221ed7c973aba944f41f2cadd621">dwt_read32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a88bfc74e04ac481875698053022132ea">GPIO_CTRL_ID</a>);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="comment">//reg |= 0x00014000 ; //7 and 8 to mode - to be used with PA</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        reg |= 0x00050000 ; <span class="comment">//8 and 9 to mode - RX/TX testing</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a88bfc74e04ac481875698053022132ea">GPIO_CTRL_ID</a>,reg);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="comment">//disable fine grain sequencing - this is needed when using PA on the TX</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">//dwt_write16bitoffsetreg(PMSC_ID,PMSC_TXFINESEQ_OFFSET,PMSC_TXFINESEQ_DIS_MASK);</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a> ;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;} <span class="comment">// end dwt_initialise()</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a59ba31fb3ed5b4d4d48794c9cc8fa79c">  295</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="dw1000__device_8c.html#a59ba31fb3ed5b4d4d48794c9cc8fa79c">dwt_getTREKOTPantennadelay</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> anchor, <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> chan, <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> datarate)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> dly = 0;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// 32-bit antenna delay value previously read from OTP, high 16 bits is value for Anchor mode, low 16-bits for Tag mode</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">switch</span>(chan)</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">if</span>(datarate == <a class="code" href="dw1000__device__api_8h.html#a5d0ee8091aaeaca923fbd498568f63e4">DWT_BR_6M8</a>)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                dly = dw1000local.<a class="code" href="structdwt__local__data__t.html#ad5cd6013b0e1ce4eaeeadc61de291a52">antennaCals</a>[0];</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(datarate == <a class="code" href="dw1000__device__api_8h.html#ac8ea6f146c9b816c71c120c427c46d1c">DWT_BR_110K</a>)</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                dly = dw1000local.<a class="code" href="structdwt__local__data__t.html#ad5cd6013b0e1ce4eaeeadc61de291a52">antennaCals</a>[1];</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">case</span> 5:</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">if</span>(datarate == <a class="code" href="dw1000__device__api_8h.html#a5d0ee8091aaeaca923fbd498568f63e4">DWT_BR_6M8</a>)</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                dly = dw1000local.<a class="code" href="structdwt__local__data__t.html#ad5cd6013b0e1ce4eaeeadc61de291a52">antennaCals</a>[2];</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(datarate == <a class="code" href="dw1000__device__api_8h.html#ac8ea6f146c9b816c71c120c427c46d1c">DWT_BR_110K</a>)</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                dly = dw1000local.<a class="code" href="structdwt__local__data__t.html#ad5cd6013b0e1ce4eaeeadc61de291a52">antennaCals</a>[3];</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            dly = 0;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> (dly &gt;&gt; (16*(anchor &amp; 0x1))) &amp; 0xFFFF;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a162f37631fb8a7040c82d3a9d8967f7f">  334</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="dw1000__device_8c.html#a162f37631fb8a7040c82d3a9d8967f7f">dwt_otprevision</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;{</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> dw1000local.<a class="code" href="structdwt__local__data__t.html#adae9176fcfd802171a4a4b5194a776e6">otprev</a> ;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a4e2e9c726d7ea2412456f1a5ce9e16c1">dwt_setGPIOforEXTTRX</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;{</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buf[<a class="code" href="dw1000__regs_8h.html#a286f8631b54316de0b5b2ee2c1786828">GPIO_MODE_LEN</a>];</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// Set the GPIO to control external PA/LNA</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a88bfc74e04ac481875698053022132ea">GPIO_CTRL_ID</a>, <a class="code" href="dw1000__regs_8h.html#aa2a5bbbcb74757aecf837db663892f63">GPIO_MODE_OFFSET</a>, <a class="code" href="dw1000__regs_8h.html#a286f8631b54316de0b5b2ee2c1786828">GPIO_MODE_LEN</a>, buf);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    buf[<a class="code" href="dw1000__regs_8h.html#ab6274b5574f6bad17120789c3797383b">GPIO_LNA_byte_no</a>] |= (<a class="code" href="dw1000__regs_8h.html#adb609995a7c8abe5daca5d463dfb1862">GPIO_PIN5_EXTTXE_8</a> + <a class="code" href="dw1000__regs_8h.html#a77353b21876b56439ed438b10896286b">GPIO_PIN6_EXTRXE_8</a>);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a88bfc74e04ac481875698053022132ea">GPIO_CTRL_ID</a>, <a class="code" href="dw1000__regs_8h.html#aa2a5bbbcb74757aecf837db663892f63">GPIO_MODE_OFFSET</a>, <a class="code" href="dw1000__regs_8h.html#a286f8631b54316de0b5b2ee2c1786828">GPIO_MODE_LEN</a>, buf);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a67139c4b27a40fb1e5d37109045df478">dwt_setGPIOdirection</a>(<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> gpioNum, <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> direction)</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;{</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buf[<a class="code" href="dw1000__regs_8h.html#a481b2d8e32283f3f315cf714d1cb1e3b">GPIO_DIR_LEN</a>];</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> command = direction | gpioNum;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    buf[0] = command &amp; 0xff;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    buf[1] = (command &gt;&gt; 8) &amp; 0xff;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    buf[2] = (command &gt;&gt; 16) &amp; 0xff;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a88bfc74e04ac481875698053022132ea">GPIO_CTRL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a4ed8ddd4e8f61e0f566c4a1a13c52148">GPIO_DIR_OFFSET</a>, <a class="code" href="dw1000__regs_8h.html#a481b2d8e32283f3f315cf714d1cb1e3b">GPIO_DIR_LEN</a>, buf);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;}</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a94fb80ed30a7909f5692b1811619e8f2">dwt_setGPIOvalue</a>(<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> gpioNum, <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> value)</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;{</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buf[<a class="code" href="dw1000__regs_8h.html#aa1274d2c19e0b67a33f8aa7d6f560397">GPIO_DOUT_LEN</a>];</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> command = value | gpioNum;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    buf[0] = command &amp; 0xff;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    buf[1] = (command &gt;&gt; 8) &amp; 0xff;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    buf[2] = (command &gt;&gt; 16) &amp; 0xff;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a88bfc74e04ac481875698053022132ea">GPIO_CTRL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a2c825f11ac92175acb6245bbb9803e00">GPIO_DOUT_OFFSET</a>, <a class="code" href="dw1000__regs_8h.html#aa1274d2c19e0b67a33f8aa7d6f560397">GPIO_DOUT_LEN</a>, buf);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a78f16c30f0c39584b6024ef9d6c1ae64">  426</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device_8c.html#a21ee0d9284ea5bdc3545895e1d75d174">dwt_getldotune</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;{</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">return</span> dw1000local.<a class="code" href="structdwt__local__data__t.html#a4270a1ec7815d465a8293e06fea8b0d1">ldoTune</a>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device__api_8h.html#a2ec91cebd57dc989b7c4efee240c9f0b">dwt_getpartid</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;{</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">return</span> dw1000local.<a class="code" href="structdwt__local__data__t.html#ab9d034b097c34d26efea11ba23beff26">partID</a>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device__api_8h.html#a243199f62c28f468d432a3a192287710">dwt_getlotid</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;{</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">return</span> dw1000local.<a class="code" href="structdwt__local__data__t.html#ab8a0ab332238d798253da436e282929e">lotID</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#ab58aed2521f087e9fb7a9b525e1d9d22">  476</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device_8c.html#a71615163f91308dc3a6525fe9cc43d49">dwt_readdevid</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;{</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#adde0bdec35fb5f74129979b580d1b6ec">DEV_ID_ID</a>,0);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a7a15ec7ea20a923a9bed73b21853f7a5">  496</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a7a15ec7ea20a923a9bed73b21853f7a5">dwt_configuretxrf</a>(<a class="code" href="structdwt__txconfig__t.html">dwt_txconfig_t</a> *config)</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">//Config RF TX PG_DELAY</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a715cdb8ffc7e9714e7396ae950a5942a">TX_CAL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a0bad5a2c98ec1324e9a6f013dd684ce7">TC_PGDELAY_OFFSET</a>, 1, &amp;config-&gt;<a class="code" href="structdwt__txconfig__t.html#a8d148b774b63d3a395bbfbb7f32b1168">PGdly</a>);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">//Configure TX power</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a3f992abd9cb2eaad23c06346a750839e">TX_POWER_ID</a>, config-&gt;<a class="code" href="structdwt__txconfig__t.html#ab8321d1772842dc5945a0e3d1ea41934">power</a>);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a154babc0b9d233a50a86a46438fdb327">  521</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device_8c.html#a154babc0b9d233a50a86a46438fdb327">dwt_getotptxpower</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> prf, <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> chan)</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;{</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">return</span> dw1000local.<a class="code" href="structdwt__local__data__t.html#a473fc1d0c26c25966d48545ef3a233f7">txPowCfg</a>[(prf - <a class="code" href="dw1000__device__api_8h.html#a0136130544685a71448ff9fa32abdbb4">DWT_PRF_16M</a>) + (<a class="code" href="dw1000__param__types_8h.html#a3c97aeebfcbf626d5d01b8b521add912">chan_idx</a>[chan] * 2)];</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;}</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a57a54d1f32522d3824637c8ab17fb426">  546</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a0d0612af808842983435c51f33a6b715">dwt_configure</a>(dwt_config_t *config, <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> use_otpconfigvalues)</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;{</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> nsSfd_result  = 0;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> useDWnsSFD = 0;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> chan = config-&gt;chan ;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> regval ;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> reg16 = <a class="code" href="dw1000__param__types_8h.html#a9accd227957be8667e4afb81923ae62b">lde_replicaCoeff</a>[config-&gt;rxCode];</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> prfIndex = dw1000local.<a class="code" href="structdwt__local__data__t.html#a8fab147ea1692d2bf7b881c6b6799ed6">prfIndex</a> = config-&gt;prf - <a class="code" href="dw1000__device__api_8h.html#a0136130544685a71448ff9fa32abdbb4">DWT_PRF_16M</a>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> bw = ((chan == 4) || (chan == 7)) ? 1 : 0 ; <span class="comment">//select wide or narrow band</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a6ff26392da12ba104315ee7b4fdb8d3a">chan</a> = config-&gt;chan ;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> (config-&gt;dataRate &gt; <a class="code" href="dw1000__device__api_8h.html#a5d0ee8091aaeaca923fbd498568f63e4">DWT_BR_6M8</a>)</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }<span class="comment">// validate datarate parameter</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> ((config-&gt;prf &gt; <a class="code" href="dw1000__device__api_8h.html#a189a313d868445c20b87ab4b87a2458b">DWT_PRF_64M</a>) || (config-&gt;prf &lt; <a class="code" href="dw1000__device__api_8h.html#a0136130544685a71448ff9fa32abdbb4">DWT_PRF_16M</a>))</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;      <span class="comment">// validate Pulse Repetition Frequency</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (config-&gt;rxPAC &gt; <a class="code" href="dw1000__device__api_8h.html#a514169b0f510d9515ce9f3b0e8c7018f">DWT_PAC64</a>)</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;      <span class="comment">// validate PAC size</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span> ((chan &lt; 1) || (chan &gt; 7) || (6 == chan))</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ; <span class="comment">// validate channel number parameter</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">// validate TX and TX pre-amble codes selections</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (config-&gt;prf == <a class="code" href="dw1000__device__api_8h.html#a189a313d868445c20b87ab4b87a2458b">DWT_PRF_64M</a>)</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="comment">// at 64M PRF, codes should be 9 to 27 only</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="comment">// config-&gt;txCode</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="comment">// config-&gt;rxCode</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    }</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="comment">// at 16M PRF, codes should be 0 to 8 only</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">switch</span> (config-&gt;txPreambLength)</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dw1000__device__api_8h.html#a50935da0766a1910ee4a5cb997d56433">DWT_PLEN_4096</a> :</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dw1000__device__api_8h.html#a85dfdcbf71160b8504aa8946a670c5b4">DWT_PLEN_2048</a> :</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dw1000__device__api_8h.html#a10efba33150fe2510ff0d45f77c850c4">DWT_PLEN_1536</a> :</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dw1000__device__api_8h.html#a4912c3541d548a8685c37ca69cd12dad">DWT_PLEN_1024</a> :</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dw1000__device__api_8h.html#aec89ed98fa489c1e5eb55325803acf37">DWT_PLEN_512</a>  :</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dw1000__device__api_8h.html#af665b4fec2e50b16d63170df5664ce16">DWT_PLEN_256</a>  :</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dw1000__device__api_8h.html#afedfcae1e004c4fec65986583fdac581">DWT_PLEN_128</a>  :</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dw1000__device__api_8h.html#a0c1366f605d7cb9683a84bda99b53774">DWT_PLEN_64</a>   : break ; <span class="comment">// all okay</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    default            : <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ; <span class="comment">// not a good preamble length parameter</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span>(config-&gt;phrMode &gt; <a class="code" href="dw1000__device__api_8h.html#a9e04ed937ee4bfb2c47c3a3c15d1cc31">DWT_PHRMODE_EXT</a>)</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// for 110 kbps we need to special setup</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="dw1000__device__api_8h.html#ac8ea6f146c9b816c71c120c427c46d1c">DWT_BR_110K</a> == config-&gt;dataRate)</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> |= <a class="code" href="dw1000__regs_8h.html#a51c56b6d87f24649ecb30691ca3c0d81">SYS_CFG_RXM110K</a> ;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        reg16 &gt;&gt;= 3;  <span class="comment">//div by 8</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &amp;= (~<a class="code" href="dw1000__regs_8h.html#a51c56b6d87f24649ecb30691ca3c0d81">SYS_CFG_RXM110K</a>) ;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a1edf13f67bcb9a6a6154f08a55e79a57">longFrames</a> = config-&gt;phrMode ;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> |= (<a class="code" href="dw1000__regs_8h.html#a3ef15aab95f803dbb0b90fed17f9d274">SYS_CFG_PHR_MODE_11</a> &amp; (config-&gt;phrMode &lt;&lt; 16)) ;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>,dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a>) ;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="comment">//write/set the lde_replicaCoeff</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#ab6e5e6c06cf4e719d7268dd73267304a">LDE_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a3920f95006a8f4c2c1237dbae35b561e">LDE_REPC_OFFSET</a>, reg16 ) ;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="dw1000__device_8c.html#a031e6bc47527a11af30c4e66b0dd81ca">_dwt_configlde</a>(prfIndex);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">//    config RF pll (for a given channel)</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">//    configure PLL2/RF PLL block CFG</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#abb441eea644568b3c17e9ec8fc25a82a">FS_CTRL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a10b694f9e185f8565c0a95d33c0f4c80">FS_PLLCFG_OFFSET</a>, 5, &amp;<a class="code" href="dw1000__param__types_8h.html#ac17ccbc0d2a871c6d6e7dd86f26c4974">pll2_config</a>[<a class="code" href="dw1000__param__types_8h.html#a3c97aeebfcbf626d5d01b8b521add912">chan_idx</a>[chan]][0]);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">//configure PLL2/RF PLL block CAL</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#abb441eea644568b3c17e9ec8fc25a82a">FS_CTRL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a8fe825c8c1e98b3cc59247afd74c3286">FS_XTALT_OFFSET</a>, 1, &amp;<a class="code" href="dw1000__param__types_8h.html#a818a43553162403e0beca1ecb718c9c6">pll2calcfg</a>);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="comment">// Configure RF RX blocks (for specified channel/badwidth)</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a42e4039f1140cedf72ffa58cd9bc7f7a">RF_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#ac83cc134209f5b84356886520498240b">RF_RXCTRLH_OFFSET</a>, 1, &amp;<a class="code" href="dw1000__param__types_8h.html#a1711dbfcb13505b68ed461b0b55e4a6d">rx_config</a>[bw]);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// Configure RF TX blocks (for specified channel and prf)</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">//Config RF TX control</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0aa5f3c84492a8a7fda673b303285b6f">dwt_write32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a42e4039f1140cedf72ffa58cd9bc7f7a">RF_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a5d84324a65eb6070ba8b05321b8e0b4c">RF_TXCTRL_OFFSET</a>, <a class="code" href="dw1000__param__types_8h.html#aade3df840c2c7fa5ec65499d43b742cc">tx_config</a>[<a class="code" href="dw1000__param__types_8h.html#a3c97aeebfcbf626d5d01b8b521add912">chan_idx</a>[chan]]);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="comment">// Configure the baseband parameters (for specified prf, bit rate, pac, and SFD settings)</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">//DTUNE0</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a262206be802e66852d5b5453bf79c934">DRX_TUNE0b_OFFSET</a>, <a class="code" href="dw1000__param__types_8h.html#af5cd4f7d3eeaf7546365db5f92a93e9f">sftsh</a>[config-&gt;dataRate][config-&gt;nsSFD]);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">//DTUNE1</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a580c67ce447ed4030c723641cbf96906">DRX_TUNE1a_OFFSET</a>, <a class="code" href="dw1000__param__types_8h.html#a7688bc6153660b67559098f43cf3d295">dtune1</a>[prfIndex]);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">if</span>(config-&gt;dataRate == <a class="code" href="dw1000__device__api_8h.html#ac8ea6f146c9b816c71c120c427c46d1c">DWT_BR_110K</a>)</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a734c93492e12a41e47a35706ac399d85">DRX_TUNE1b_OFFSET</a>, 0x64);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">if</span>(config-&gt;txPreambLength == <a class="code" href="dw1000__device__api_8h.html#a0c1366f605d7cb9683a84bda99b53774">DWT_PLEN_64</a>) <span class="comment">//if preamble length is 64</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> temp = 0x10;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a734c93492e12a41e47a35706ac399d85">DRX_TUNE1b_OFFSET</a>, 0x10);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a>, 0x26, 1, &amp;temp);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> temp = 0x28;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a734c93492e12a41e47a35706ac399d85">DRX_TUNE1b_OFFSET</a>, 0x20);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a>, 0x26, 1, &amp;temp);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    }</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">//DTUNE2</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0aa5f3c84492a8a7fda673b303285b6f">dwt_write32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#ad5c2d9596a9d0382fb795561be1ac8ed">DRX_TUNE2_OFFSET</a>, <a class="code" href="dw1000__param__types_8h.html#adcce3ac88c7cc58e4a05daec98f5dd5b">digital_bb_config</a>[prfIndex][config-&gt;rxPAC]);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="comment">//DTUNE3</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">if</span>(config-&gt;sfdTO != <a class="code" href="dw1000__device__api_8h.html#a48783d98de5d8199af4d4ffec72e2adc">DWT_SFDTOC_DEF</a>)</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    { <span class="comment">//if default value no need to program it</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a2afc5244fc9f25f9d06acffb1ab8fa72">DRX_SFDTOC_OFFSET</a>, config-&gt;sfdTO);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="comment">//don&#39;t allow 0 - SFD timeout will always be enabled</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">if</span>(config-&gt;sfdTO == 0)</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a2afc5244fc9f25f9d06acffb1ab8fa72">DRX_SFDTOC_OFFSET</a>, <a class="code" href="dw1000__device__api_8h.html#a48783d98de5d8199af4d4ffec72e2adc">DWT_SFDTOC_DEF</a>);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment">// configure AGC parameters</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0aa5f3c84492a8a7fda673b303285b6f">dwt_write32bitoffsetreg</a>( <a class="code" href="dw1000__regs_8h.html#abdb79f7c7d23a8bb38cce35fdaf300b1">AGC_CFG_STS_ID</a>, 0xC, <a class="code" href="dw1000__param__types_8h.html#a8ec5815e10a440fb38d1562e74ebfe26">agc_config</a>.<a class="code" href="structagc__cfg__struct.html#aab45ead221d7db72ffefbb2673667537">lo32</a>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>( <a class="code" href="dw1000__regs_8h.html#abdb79f7c7d23a8bb38cce35fdaf300b1">AGC_CFG_STS_ID</a>, 0x4, <a class="code" href="dw1000__param__types_8h.html#a8ec5815e10a440fb38d1562e74ebfe26">agc_config</a>.<a class="code" href="structagc__cfg__struct.html#a299464b1f7aa207542fc034f3bb534c1">target</a>[prfIndex]);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment">// set (non-standard) user SFD for improved performance,</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">if</span>(config-&gt;nsSFD)</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;         <span class="comment">//Write non standard (DW) SFD length</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;         <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#ae565af3d75091a4594000082f94972d8">USR_SFD_ID</a>,0x00,1,&amp;<a class="code" href="dw1000__param__types_8h.html#a21a5a43002f9a02226af78d3717aea04">dwnsSFDlen</a>[config-&gt;dataRate]);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;         nsSfd_result = 3 ;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;         useDWnsSFD = 1 ;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    regval =  (<a class="code" href="dw1000__regs_8h.html#a6e5c161278f26a1500644b28715dd515">CHAN_CTRL_TX_CHAN_MASK</a> &amp; (chan &lt;&lt; <a class="code" href="dw1000__regs_8h.html#ae8b6e63a26f78e4657dda1ddbb8dcbe2">CHAN_CTRL_TX_CHAN_SHIFT</a>)) |            <span class="comment">// Transmit Channel</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;              (<a class="code" href="dw1000__regs_8h.html#ad311918bbc43e0bfe6aa3041c9c8c05a">CHAN_CTRL_RX_CHAN_MASK</a> &amp; (chan &lt;&lt; <a class="code" href="dw1000__regs_8h.html#ab31fbfba6deddc3b066c976cb061fe58">CHAN_CTRL_RX_CHAN_SHIFT</a>)) |            <span class="comment">// Receive Channel</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;              (<a class="code" href="dw1000__regs_8h.html#a1f8203d66e71f8f925e37f870eee3cef">CHAN_CTRL_RXFPRF_MASK</a> &amp; (config-&gt;prf &lt;&lt; <a class="code" href="dw1000__regs_8h.html#a4d8cecc5c652174a0e72e1887a40718a">CHAN_CTRL_RXFPRF_SHIFT</a>)) |     <span class="comment">// RX PRF</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;              ((<a class="code" href="dw1000__regs_8h.html#af95e8a27d2d64e9d76efde5faea194f2">CHAN_CTRL_TNSSFD</a>|<a class="code" href="dw1000__regs_8h.html#ab60fff0e718c8d3b8d9cef5255651cb9">CHAN_CTRL_RNSSFD</a>) &amp; (nsSfd_result &lt;&lt; <a class="code" href="dw1000__regs_8h.html#a28e0bd26789e64f72cb904b72264676b">CHAN_CTRL_TNSSFD_SHIFT</a>)) |       <span class="comment">// nsSFD enable RX&amp;TX</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;              (<a class="code" href="dw1000__regs_8h.html#a5b3c15de4ef4cd357ab27395fddb1334">CHAN_CTRL_DWSFD</a> &amp; (useDWnsSFD &lt;&lt; <a class="code" href="dw1000__regs_8h.html#afd4f07bd1926872d31ddbdcc4e6c4eae">CHAN_CTRL_DWSFD_SHIFT</a>)) |      <span class="comment">// use DW nsSFD</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;              (<a class="code" href="dw1000__regs_8h.html#adde65805e955073b30b2cfa69dd5f81f">CHAN_CTRL_TX_PCOD_MASK</a> &amp; (config-&gt;txCode &lt;&lt; <a class="code" href="dw1000__regs_8h.html#a7c23de45958fae1715023e3bd96f30c2">CHAN_CTRL_TX_PCOD_SHIFT</a>)) |  <span class="comment">// TX Preamble Code</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;              (<a class="code" href="dw1000__regs_8h.html#a33b18f2b522f5b474e59d0f633debd8f">CHAN_CTRL_RX_PCOD_MASK</a> &amp; (config-&gt;rxCode &lt;&lt; <a class="code" href="dw1000__regs_8h.html#aa2be3fbb26192809a2582881b0fc2f71">CHAN_CTRL_RX_PCOD_SHIFT</a>)) ;  <span class="comment">// RX Preamble Code</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a659796dad40972afb8d683ef325873bf">CHAN_CTRL_ID</a>,regval) ;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// Set up TX Preamble Size and TX PRF</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// Set up TX Ranging Bit and Data Rate</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> x = (config-&gt;txPreambLength | config-&gt;prf)  &lt;&lt;  16;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#a2503135d28aad5e11612957e95d48bfb">txFCTRL</a> = x | <a class="code" href="dw1000__regs_8h.html#ae0192e1232c2ab0c8902aec26a0a4352">TX_FCTRL_TR</a> |     <span class="comment">/* always set ranging bit !!! */</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                                (config-&gt;dataRate &lt;&lt; <a class="code" href="dw1000__regs_8h.html#a6a548e476fb519ac7f723d797abdcc78">TX_FCTRL_TXBR_SHFT</a>) ;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <a class="code" href="dw1000__device_8c.html#a0aa5f3c84492a8a7fda673b303285b6f">dwt_write32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a87799b56a05b9ace7c7f77577e4ef564">TX_FCTRL_ID</a>,0,dw1000local.<a class="code" href="structdwt__local__data__t.html#a2503135d28aad5e11612957e95d48bfb">txFCTRL</a>) ;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">if</span> (use_otpconfigvalues &amp; <a class="code" href="dw1000__device__api_8h.html#a1a2cfe15de3f84ac190d6baa32c8a510">DWT_LOADXTALTRIM</a>)</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <a class="code" href="dw1000__device_8c.html#a6e7053436fe236bd9942eac0e199d030">dwt_xtaltrim</a>(dw1000local.<a class="code" href="structdwt__local__data__t.html#acd0df5b9fd62d1822c540456ccc34b20">xtrim</a>);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    }</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">if</span> (use_otpconfigvalues &amp; <a class="code" href="dw1000__device__api_8h.html#ad9c90f4d0f0ebfcea5db53ee1938083f">DWT_LOADANTDLY</a>)</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="comment">//put half of the antenna delay value into tx and half into rx</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <a class="code" href="dw1000__device_8c.html#aee2624cc9a80e6815b914c13a31b13c4">dwt_setrxantennadelay</a>(((dw1000local.<a class="code" href="structdwt__local__data__t.html#aece338b02ebc20833689583f3b2c53de">antennaDly</a> &gt;&gt; (16*prfIndex)) &amp; 0xFFFF) &gt;&gt; 1);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <a class="code" href="dw1000__device_8c.html#adae40bd196107a112dfccad8221a27c6">dwt_settxantennadelay</a>(((dw1000local.<a class="code" href="structdwt__local__data__t.html#aece338b02ebc20833689583f3b2c53de">antennaDly</a> &gt;&gt; (16*prfIndex)) &amp; 0xFFFF) &gt;&gt; 1);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a> ;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;} <span class="comment">// end dwt_configure()</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a207855365aa8e4b1e285c2c65a933ed7">  742</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#aee2624cc9a80e6815b914c13a31b13c4">dwt_setrxantennadelay</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> rxDelay)</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;{</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="comment">// -------------------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// set the antenna delay</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a47c17151703c346cfcb1792dfba4afae">rfrxDly</a> = rxDelay;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#ab6e5e6c06cf4e719d7268dd73267304a">LDE_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#a3711404bc938eba2820bd902e56893b5">LDE_RXANTD_OFFSET</a>,dw1000local.<a class="code" href="structdwt__local__data__t.html#a47c17151703c346cfcb1792dfba4afae">rfrxDly</a>) ;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a6d9fa1945053857174efb1d7f8cbc3e7">  764</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#adae40bd196107a112dfccad8221a27c6">dwt_settxantennadelay</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> txDelay)</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;{</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="comment">// -------------------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="comment">// set the tx antenna delay for auto tx timestamp adjustment</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a482777627c9f1b1f8cf5adb806a5c3a3">rftxDly</a>  = txDelay;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a9c50e04bd027ec4263bba9b68c9e3c9a">TX_ANTD_ID</a>, 0x0, dw1000local.<a class="code" href="structdwt__local__data__t.html#a482777627c9f1b1f8cf5adb806a5c3a3">rftxDly</a>) ;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;}</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#afeff9ca5ba9832312c5d739e88e5d050">  783</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="dw1000__device_8c.html#afeff9ca5ba9832312c5d739e88e5d050">dwt_readantennadelay</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> prf)</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;{</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">// 32-bit antenna delay value previously read from OTP, high 16 bits is value for 64 MHz PRF, low 16-bits for 16 MHz PRF</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">return</span> (dw1000local.<a class="code" href="structdwt__local__data__t.html#aece338b02ebc20833689583f3b2c53de">antennaDly</a> &gt;&gt; (16*(prf-<a class="code" href="dw1000__device__api_8h.html#a0136130544685a71448ff9fa32abdbb4">DWT_PRF_16M</a>))) &amp; 0xFFFF;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;}</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l00811"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a5fa4fd0ade437467cf22853a671a9c1a">  811</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a5fa4fd0ade437467cf22853a671a9c1a">dwt_writetxdata</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> txFrameLength, <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *txFrameBytes, <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> txBufferOffset)</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;{</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">if</span> (dw1000local.<a class="code" href="structdwt__local__data__t.html#a1edf13f67bcb9a6a6154f08a55e79a57">longFrames</a>)</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keywordflow">if</span> (txFrameLength &gt; 1023)</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        }</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordflow">if</span> (txFrameLength &gt; 127)</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    }</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">if</span> (txFrameLength &lt; 2)</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    }</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">if</span> ((txBufferOffset + txFrameLength) &gt; 1024)</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="comment">// write the data to the IC TX buffer, (-2 bytes for auto generated CRC)</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>( <a class="code" href="dw1000__regs_8h.html#ac64fce881fe6b4930810091163b48438">TX_BUFFER_ID</a>, txBufferOffset, txFrameLength-2, txFrameBytes) ;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a> ;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;} <span class="comment">// end dwt_writetxdata()</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l00863"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a2ff7aada215f17ff6d211a5f4c30c2fd">  863</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a2ff7aada215f17ff6d211a5f4c30c2fd">dwt_writetxfctrl</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> txFrameLength, <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> txBufferOffset)</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;{</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">if</span> (dw1000local.<a class="code" href="structdwt__local__data__t.html#a1edf13f67bcb9a6a6154f08a55e79a57">longFrames</a>)</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <span class="keywordflow">if</span> (txFrameLength &gt; 1023)</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        }</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="keywordflow">if</span> (txFrameLength &gt; 127)</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    }</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">if</span> (txFrameLength &lt; 2)</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    {</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="comment">// write the frame length to the TX frame control register</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">// dw1000local.txFCTRL has kept configured bit rate information</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> reg32 = dw1000local.<a class="code" href="structdwt__local__data__t.html#a2503135d28aad5e11612957e95d48bfb">txFCTRL</a> | txFrameLength | (txBufferOffset &lt;&lt; 22);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0aa5f3c84492a8a7fda673b303285b6f">dwt_write32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a87799b56a05b9ace7c7f77577e4ef564">TX_FCTRL_ID</a>,0,reg32) ;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a> ;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;} <span class="comment">// end dwt_writetxfctrl()</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l00912"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#afcc4767611bb3072654065af44d8505c">  912</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#afcc4767611bb3072654065af44d8505c">dwt_readrxdata</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *buffer, <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> length, <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> rxBufferOffset)</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;{</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a4083cd58f0401dfa3f7e047fad4d61f5">RX_BUFFER_ID</a>,rxBufferOffset,length,buffer) ;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;}</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a1458e40ac61a4ec009a7baf59995c720">dwt_readaccdata</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *buffer, <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> len, <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> accOffset)</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;{</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="comment">// Force on the ACC clocks if we are sequenced</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#a776a03f15d8b282cf46f8fd06feb4b2f">READ_ACC_ON</a>);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#ab1c85fa05050ad44ea5051eb88761595">ACC_MEM_ID</a>,accOffset,len,buffer) ;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#a7c6e63f591e4cc18c89bc8698f4609ea">READ_ACC_OFF</a>); <span class="comment">//revert clocks back</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;}</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a0bcf8e994fbcae2627f2229a2fc75fab">dwt_readdignostics</a>(<a class="code" href="structdwt__rxdiag__t.html">dwt_rxdiag_t</a> *diagnostics)</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;{</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> reg[2];</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> fp;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#afc2bced2e42d756919f0d9587a7a8413">RX_TIME_ID</a>, 5, 2, reg) ; <span class="comment">//read the HW FP index</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="comment">//LDE result 0 is in bytes 40-&gt;55</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="comment">// convert (and save) hardware estimate to show on graph</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    fp = reg[0];</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    fp = fp + (reg[1] &lt;&lt; 8);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    diagnostics-&gt;<a class="code" href="structdwt__rxdiag__t.html#a7b0c5c4fdba2ca8415ae81b84769430a">firstPath</a> = (double) fp * (1.0/64.0) ;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="comment">//LDE diagnostic data</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    diagnostics-&gt;<a class="code" href="structdwt__rxdiag__t.html#a87b80faad3e045a705ec326002045ae0">maxNoise</a> = <a class="code" href="dw1000__device_8c.html#ad05be2265afb31a2b4b39a68d55015c2">dwt_read16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#ab6e5e6c06cf4e719d7268dd73267304a">LDE_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a452701cb29c5ffd8f4458d5c462ce388">LDE_THRESH_OFFSET</a>);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="comment">//read all 8 bytes in one SPI transaction</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#aa1438373974087885c44cf9c6a100ca8">RX_FQUAL_ID</a>, 0x0, 8, (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>*)&amp;diagnostics-&gt;<a class="code" href="structdwt__rxdiag__t.html#a11ee229e165435c84c19e85cf14bd42f">stdNoise</a>);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="comment">//diagnostics-&gt;stdNoise = dwt_read16bitoffsetreg(RX_FQUAL_ID, 0x0) ;</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="comment">//diagnostics-&gt;firstPathAmp2 = dwt_read16bitoffsetreg(RX_FQUAL_ID, 0x2) ;</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="comment">//diagnostics-&gt;firstPathAmp3 = dwt_read16bitoffsetreg(RX_FQUAL_ID, 0x4) ;</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="comment">//diagnostics-&gt;maxGrowthCIR = dwt_read16bitoffsetreg(RX_FQUAL_ID, 0x6) ;</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    diagnostics-&gt;<a class="code" href="structdwt__rxdiag__t.html#a47380731609deb04b468609fd187135e">firstPathAmp1</a> = <a class="code" href="dw1000__device_8c.html#ad05be2265afb31a2b4b39a68d55015c2">dwt_read16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#afc2bced2e42d756919f0d9587a7a8413">RX_TIME_ID</a>, 0x7) ;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    diagnostics-&gt;<a class="code" href="structdwt__rxdiag__t.html#a231a5913666a62166dd951ab7c3db1c1">rxPreamCount</a> = (<a class="code" href="dw1000__device__api_8h.html#a0c17221ed7c973aba944f41f2cadd621">dwt_read32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#af7a34f290dbabd0881b1c140ae3a3152">RX_FINFO_ID</a>) &amp; <a class="code" href="dw1000__regs_8h.html#a69e25249ff2c759040ae614953fd75d6">RX_FINFO_RXPACC_MASK</a>) &gt;&gt; <a class="code" href="dw1000__regs_8h.html#a1c8bd713f3bced4169f76a487d0f59b1">RX_FINFO_RXPACC_SHIFT</a>  ;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">//diagnostics-&gt;debug1 = dwt_read32bitoffsetreg(0x27, 0x28);</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="comment">//diagnostics-&gt;debug2 = dwt_read32bitoffsetreg(0x27, 0xc);</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;}</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a53686602fb8ef92c9278f1e07ba49011">dwt_readtxtimestamp</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> * timestamp)</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;{</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#ad389596ece63a326843e9f4d817491da">TX_TIME_ID</a>, 0, <a class="code" href="dw1000__regs_8h.html#a35c04105b687e8ef607dd0104240c07a">TX_TIME_TX_STAMP_LEN</a>, timestamp) ; <span class="comment">// read bytes directly into buffer</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;}</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device__api_8h.html#a4ac9263c79128eeb209238ca42174a75">dwt_readtxtimestamphi32</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;{</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#ad389596ece63a326843e9f4d817491da">TX_TIME_ID</a>, 1);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;}</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device__api_8h.html#a54d600670c664ac756593b1acb381bc6">dwt_readtxtimestamplo32</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;{</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#ad389596ece63a326843e9f4d817491da">TX_TIME_ID</a>, 0);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;}</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a44aeaad5262b436720af7de5a205b7de">dwt_readrxtimestamp</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> * timestamp)</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;{</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#afc2bced2e42d756919f0d9587a7a8413">RX_TIME_ID</a>, 0, <a class="code" href="dw1000__regs_8h.html#a551d3ed51b343f474f9176bde513276e">RX_TIME_RX_STAMP_LEN</a>, timestamp) ; <span class="comment">//get the adjusted time of arrival</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;}</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device__api_8h.html#aa683afd4dc564e0ea52771969003da03">dwt_readrxtimestamphi32</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;{</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#afc2bced2e42d756919f0d9587a7a8413">RX_TIME_ID</a>, 1);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;}</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device__api_8h.html#a952d14c5e7cd51dfb9541b5672f7bf86">dwt_readrxtimestamplo32</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;{</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#afc2bced2e42d756919f0d9587a7a8413">RX_TIME_ID</a>, 0);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;}</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device__api_8h.html#a557c193730791047a837527c41fdf078">dwt_readsystimestamphi32</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;{</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a31270e00443e51812405a091c488a9d2">SYS_TIME_ID</a>, 1);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;}</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#ad893179c232ecf40ed8acb99b246e806">dwt_readsystime</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> * timestamp)</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;{</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a31270e00443e51812405a091c488a9d2">SYS_TIME_ID</a>, 0, <a class="code" href="dw1000__regs_8h.html#a3cb6a9407c6cc79639bade535de9021b">SYS_TIME_LEN</a>, timestamp) ; <span class="comment">//get the adjusted time of arrival</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;}</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a></div><div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#ad216f40a9230e591565aa58a7a3e6918"> 1150</a></span>&#160;(</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>      recordNumber,</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>      index,</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>      length,</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keyword">const</span> <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *buffer</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;)</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;{</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="preprocessor">#ifdef  OT_CLI_NCP_APP</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a283cb6cc72fdec4547bd3ecbe884128d">decaIrqStatus_t</a>  stat ;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <a class="code" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> dummy[1]={0};</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordtype">int</span>   cnt = 0;                                          <span class="comment">// counter for length of header</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">if</span> (recordNumber &gt; 0x3F)</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    {</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;                    <span class="comment">// record number is limited to 6-bits.</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="comment">// Write message header selecting WRITE operation and addresses as appropriate (this is one to three bytes long)</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">if</span> (index == 0)                                         <span class="comment">// for index of 0, no sub-index is required</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    {</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <a class="code" href="dw1000__device_8c.html#a90f06e0bbb8091d85bc7b509f051ea2e">header_write</a>[cnt++] = 0x80 | recordNumber ;           <span class="comment">// bit-7 is WRITE operation, bit-6 zero=NO sub-addressing, bits 5-0 is reg file id</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    {</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordflow">if</span> (index &gt; 0x7FFF)</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        {</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;                     <span class="comment">// index is limited to 15-bits.</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        }</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        <span class="keywordflow">if</span> ((index + length)&gt; 0x7FFF)</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        {</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;           <span class="comment">// sub-addressable area is limited to 15-bits.</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        }</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <a class="code" href="dw1000__device_8c.html#a90f06e0bbb8091d85bc7b509f051ea2e">header_write</a>[cnt++] = 0xC0 | recordNumber ;       <span class="comment">// bit-7 is WRITE operation, bit-6 one=sub-address follows, bits 5-0 is reg file id</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <span class="keywordflow">if</span> (index &lt;= 127)                                   <span class="comment">// for non-zero index &lt; 127, just a single sub-index byte is required</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        {</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            <a class="code" href="dw1000__device_8c.html#a90f06e0bbb8091d85bc7b509f051ea2e">header_write</a>[cnt++] = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)index ;                  <span class="comment">// bit-7 zero means no extension, bits 6-0 is index.</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            <a class="code" href="dw1000__device_8c.html#a90f06e0bbb8091d85bc7b509f051ea2e">header_write</a>[cnt++] = 0x80 | (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(index) ;           <span class="comment">// bit-7 one means extended index, bits 6-0 is low seven bits of index.</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            <a class="code" href="dw1000__device_8c.html#a90f06e0bbb8091d85bc7b509f051ea2e">header_write</a>[cnt++] =  (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>) (index &gt;&gt; 7) ;           <span class="comment">// 8-bit value = high eight bits of index.</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        }</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    }</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;       stat = <a class="code" href="dw1000__mutex_8c.html#a9e9a62b0dc20ef9f2f207c2b498638d6">decamutexon</a>() ;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">// write it to the SPI</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        <a class="code" href="adapter_8cpp.html#a5aa5ecad969a97fcf19db42fba5ac6e5">memcpy</a>(<a class="code" href="dw1000__device_8c.html#a90f06e0bbb8091d85bc7b509f051ea2e">header_write</a>+cnt,buffer,length);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <a class="code" href="group__nrf__drv__spi.html#gab022e003c9e5f0f946a5ecff0b455405">nrf_drv_spi_transfer</a>(&amp;spi,<a class="code" href="dw1000__device_8c.html#a90f06e0bbb8091d85bc7b509f051ea2e">header_write</a>,length+cnt,dummy,0);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <a class="code" href="dw1000__mutex_8c.html#a8f6fe52668f9a5399c39562acf696236">decamutexoff</a>(stat);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> header[3] ;                                       <span class="comment">// buffer to compose header in</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordtype">int</span>   cnt = 0;                                          <span class="comment">// counter for length of header</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">if</span> (recordNumber &gt; 0x3F)</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    {</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;                    <span class="comment">// record number is limited to 6-bits.</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    }</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="comment">// Write message header selecting WRITE operation and addresses as appropriate (this is one to three bytes long)</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">if</span> (index == 0)                                         <span class="comment">// for index of 0, no sub-index is required</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        header[cnt++] = 0x80 | recordNumber ;               <span class="comment">// bit-7 is WRITE operation, bit-6 zero=NO sub-addressing, bits 5-0 is reg file id</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    }</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    {</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="keywordflow">if</span> (index &gt; 0x7FFF)</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;                     <span class="comment">// index is limited to 15-bits.</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        }</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <span class="keywordflow">if</span> ((index + length)&gt; 0x7FFF)</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        {</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;           <span class="comment">// sub-addressable area is limited to 15-bits.</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        }</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        header[cnt++] = 0xC0 | recordNumber ;               <span class="comment">// bit-7 is WRITE operation, bit-6 one=sub-address follows, bits 5-0 is reg file id</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <span class="keywordflow">if</span> (index &lt;= 127)                                   <span class="comment">// for non-zero index &lt; 127, just a single sub-index byte is required</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            header[cnt++] = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)index ;                  <span class="comment">// bit-7 zero means no extension, bits 6-0 is index.</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        }</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            header[cnt++] = 0x80 | (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(index) ;           <span class="comment">// bit-7 one means extended index, bits 6-0 is low seven bits of index.</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            header[cnt++] =  (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>) (index &gt;&gt; 7) ;           <span class="comment">// 8-bit value = high eight bits of index.</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    }</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="comment">// write it to the SPI</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a06c4b1c25fcbdb5dc0c92d6f89797513">writetospi</a>(cnt,header,length,buffer);</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;} <span class="comment">// end dwt_writetodevice()</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a></div><div class="line"><a name="l01278"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a8b7023134a12d8ad84054638668f24e0"> 1278</a></span>&#160;(</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>  recordNumber,</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>  index,</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>  length,</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>   *buffer</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;)</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;{</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="preprocessor">#ifdef OT_CLI_NCP_APP</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a283cb6cc72fdec4547bd3ecbe884128d">decaIrqStatus_t</a>  stat ;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordtype">int</span>   cnt = 0;                                          <span class="comment">// counter for length of header</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">if</span> (recordNumber &gt; 0x3F)</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    {</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;                    <span class="comment">// record number is limited to 6-bits.</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    }</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="comment">// Write message header selecting READ operation and addresses as appropriate (this is one to three bytes long)</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordflow">if</span> (index == 0)                                         <span class="comment">// for index of 0, no sub-index is required</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <a class="code" href="dw1000__device_8c.html#aff798c733da0a633e039fdbdfb901420">header_read</a>[cnt++] = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>) recordNumber ;              <span class="comment">// bit-7 zero is READ operation, bit-6 zero=NO sub-addressing, bits 5-0 is reg file id</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    {</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <span class="keywordflow">if</span> (index &gt; 0x7FFF)</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        {</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;                     <span class="comment">// index is limited to 15-bits.</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <span class="keywordflow">if</span> ((index + length)&gt; 0x7FFF)</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        {</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;           <span class="comment">// sub-addressible area is limited to 15-bits.</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        }</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <a class="code" href="dw1000__device_8c.html#aff798c733da0a633e039fdbdfb901420">header_read</a>[cnt++] = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(0x40 | recordNumber) ;      <span class="comment">// bit-7 zero is READ operation, bit-6 one=sub-address follows, bits 5-0 is reg file id</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordflow">if</span> (index &lt;= 127)                                   <span class="comment">// for non-zero index &lt; 127, just a single sub-index byte is required</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        {</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            <a class="code" href="dw1000__device_8c.html#aff798c733da0a633e039fdbdfb901420">header_read</a>[cnt++] = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>) index ;                 <span class="comment">// bit-7 zero means no extension, bits 6-0 is index.</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        }</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        {</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            <a class="code" href="dw1000__device_8c.html#aff798c733da0a633e039fdbdfb901420">header_read</a>[cnt++] = 0x80 | (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(index) ;           <span class="comment">// bit-7 one means extended index, bits 6-0 is low seven bits of index.</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            <a class="code" href="dw1000__device_8c.html#aff798c733da0a633e039fdbdfb901420">header_read</a>[cnt++] =  (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>) (index &gt;&gt; 7) ;           <span class="comment">// 8-bit value = high eight bits of index.</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    }</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        stat = <a class="code" href="dw1000__mutex_8c.html#a9e9a62b0dc20ef9f2f207c2b498638d6">decamutexon</a>() ;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        memset(<a class="code" href="dw1000__device_8c.html#aff798c733da0a633e039fdbdfb901420">header_read</a>+cnt,0,length);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <a class="code" href="group__nrf__drv__spi.html#gab022e003c9e5f0f946a5ecff0b455405">nrf_drv_spi_transfer</a>(&amp;spi,<a class="code" href="dw1000__device_8c.html#aff798c733da0a633e039fdbdfb901420">header_read</a>,length+cnt,<a class="code" href="dw1000__device_8c.html#a504054184f85d8d00694d85646e61753">read_data</a>,length+cnt);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <a class="code" href="adapter_8cpp.html#a5aa5ecad969a97fcf19db42fba5ac6e5">memcpy</a>(buffer,<a class="code" href="dw1000__device_8c.html#a504054184f85d8d00694d85646e61753">read_data</a>+cnt,length);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <a class="code" href="dw1000__mutex_8c.html#a8f6fe52668f9a5399c39562acf696236">decamutexoff</a>(stat);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> header[3] ;                                       <span class="comment">// buffer to compose header in</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="keywordtype">int</span>   cnt = 0;                                          <span class="comment">// counter for length of header</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">if</span> (recordNumber &gt; 0x3F)</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;                    <span class="comment">// record number is limited to 6-bits.</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    }</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="comment">// Write message header selecting READ operation and addresses as appropriate (this is one to three bytes long)</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">if</span> (index == 0)                                         <span class="comment">// for index of 0, no sub-index is required</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    {</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        header[cnt++] = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>) recordNumber ;              <span class="comment">// bit-7 zero is READ operation, bit-6 zero=NO sub-addressing, bits 5-0 is reg file id</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    {</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="keywordflow">if</span> (index &gt; 0x7FFF)</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        {</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;                     <span class="comment">// index is limited to 15-bits.</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        }</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        <span class="keywordflow">if</span> ((index + length)&gt; 0x7FFF)</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        {</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;           <span class="comment">// sub-addressible area is limited to 15-bits.</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        header[cnt++] = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(0x40 | recordNumber) ;      <span class="comment">// bit-7 zero is READ operation, bit-6 one=sub-address follows, bits 5-0 is reg file id</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <span class="keywordflow">if</span> (index &lt;= 127)                                   <span class="comment">// for non-zero index &lt; 127, just a single sub-index byte is required</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        {</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            header[cnt++] = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>) index ;                 <span class="comment">// bit-7 zero means no extension, bits 6-0 is index.</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        }</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        {</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            header[cnt++] = 0x80 | (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(index) ;           <span class="comment">// bit-7 one means extended index, bits 6-0 is low seven bits of index.</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            header[cnt++] =  (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>) (index &gt;&gt; 7) ;           <span class="comment">// 8-bit value = high eight bits of index.</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        }</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    }</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="comment">// do the read from the SPI</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ab8024530a2b17ba0f3ca864c10b922b0">readfromspi</a>(cnt, header, length, buffer);  <span class="comment">// result is stored in the buffer</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;} <span class="comment">// end dwt_readfromdevice()</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01396"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#afc523ef07e91de3b69d41a60d4d3b4d8"> 1396</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<span class="keywordtype">int</span> regFileID,<span class="keywordtype">int</span> regOffset)</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;{</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>  regval = <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordtype">int</span>     j ;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>   buffer[4] ;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacegencsv.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(regFileID,regOffset,4,buffer); <span class="comment">// read 4 bytes (32-bits) register into buffer</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keywordflow">if</span>(result == <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a>)</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    {</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        <span class="keywordflow">for</span> (j = 3 ; j &gt;= 0 ; j --)</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        {</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            regval = (regval &lt;&lt; 8) + buffer[j] ;        <span class="comment">// sum</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        }</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    }</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">return</span> regval ;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;} <span class="comment">// end dwt_read32bitoffsetreg()</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01429"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#ad05be2265afb31a2b4b39a68d55015c2"> 1429</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="dw1000__device_8c.html#ad05be2265afb31a2b4b39a68d55015c2">dwt_read16bitoffsetreg</a>(<span class="keywordtype">int</span> regFileID,<span class="keywordtype">int</span> regOffset)</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;{</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>  regval = <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>   buffer[2] ;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacegencsv.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(regFileID,regOffset,2,buffer); <span class="comment">// read 2 bytes (16-bits) register into buffer</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordflow">if</span>(result == <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a>)</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    {</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        regval = (buffer[1] &lt;&lt; 8) + buffer[0] ;        <span class="comment">// sum</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    }</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">return</span> regval ;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;} <span class="comment">// end dwt_read16bitoffsetreg()</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01459"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a0269e8f64a16462de0ca2b204348972b"> 1459</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<span class="keywordtype">int</span> regFileID,<span class="keywordtype">int</span> regOffset,<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> regval)</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;{</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordtype">int</span> reg;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>   buffer[2] ;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    buffer[0] = regval &amp; 0xFF;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    buffer[1] = regval &gt;&gt; 8 ;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    reg = <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(regFileID,regOffset,2,buffer);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="keywordflow">return</span> reg;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;} <span class="comment">// end dwt_write16bitoffsetreg()</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l01488"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a0aa5f3c84492a8a7fda673b303285b6f"> 1488</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a0aa5f3c84492a8a7fda673b303285b6f">dwt_write32bitoffsetreg</a>(<span class="keywordtype">int</span> regFileID,<span class="keywordtype">int</span> regOffset,<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> regval)</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;{</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="keywordtype">int</span>     j ;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordtype">int</span> reg;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>   buffer[4] ;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keywordflow">for</span> ( j = 0 ; j &lt; 4 ; j++ )</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    {</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        buffer[j] = regval &amp; 0xff ;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        regval &gt;&gt;= 8 ;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    }</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    reg = <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(regFileID,regOffset,4,buffer);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">return</span> reg;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;} <span class="comment">// end dwt_write32bitoffsetreg()</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div><div class="line"><a name="l01526"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#ac42c92677926122b837bd9327dff13b3"> 1526</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a767619f1a1690ec817161838c58d59d9">dwt_enableframefilter</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> enable)</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;{</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> sysconfig = <a class="code" href="dw1000__regs_8h.html#a08683df73319873d0600d45756cea8e2">SYS_CFG_MASK</a> &amp; <a class="code" href="dw1000__device__api_8h.html#a0c17221ed7c973aba944f41f2cadd621">dwt_read32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>) ;    <span class="comment">// read sysconfig register</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">if</span>(enable)</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    {</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <span class="comment">//enable frame filtering and configure frame types</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        sysconfig &amp;= ~(<a class="code" href="dw1000__regs_8h.html#a124738b7fdd7abfe5a653a61338bbbf9">SYS_CFG_FF_ALL_EN</a>);   <span class="comment">//clear all</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        sysconfig |= (enable &amp; <a class="code" href="dw1000__regs_8h.html#a124738b7fdd7abfe5a653a61338bbbf9">SYS_CFG_FF_ALL_EN</a>) | <a class="code" href="dw1000__regs_8h.html#a3e2e0c8317e28c6ecae0475562d45aac">SYS_CFG_FFE</a>;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    }</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    {</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        sysconfig &amp;= ~(<a class="code" href="dw1000__regs_8h.html#a3e2e0c8317e28c6ecae0475562d45aac">SYS_CFG_FFE</a>);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    }</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> = sysconfig ;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>,sysconfig) ;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;}</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div><div class="line"><a name="l01558"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#adf1cef9c9cca3369173caa63946858cb"> 1558</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#adf1cef9c9cca3369173caa63946858cb">dwt_setpanid</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> panID)</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;{</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="comment">// PAN ID is high 16 bits of register</span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a6f8f662a31326c024f62b720671615c6">PANADR_ID</a>, 2, panID) ;     <span class="comment">// set the value</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;}</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a22f83b5f7fded176be4b0526af93ff48"> 1577</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a22f83b5f7fded176be4b0526af93ff48">dwt_setaddress16</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> shortAddress)</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;{</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="comment">// short address into low 16 bits</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a6f8f662a31326c024f62b720671615c6">PANADR_ID</a>, 0, shortAddress) ;     <span class="comment">// set the value</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;}</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01595"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#acc7fd66b9522ee84bf223818b5205e53"> 1595</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#acc7fd66b9522ee84bf223818b5205e53">dwt_seteui</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *eui64)</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;{</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a6311bbf884dcfdfbdc3574fb3f731f95">EUI_64_ID</a>, 0x0, 8, eui64);</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;}</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01613"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#adc969fa8d69383f4ec5f8da40dbda3c2"> 1613</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#adc969fa8d69383f4ec5f8da40dbda3c2">dwt_geteui</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *eui64)</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;{</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a6311bbf884dcfdfbdc3574fb3f731f95">EUI_64_ID</a>, 0x0, 8, eui64);</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;}</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="comment">// _dwt_otpread - function to read the OTP memory. Ensure that MR,MRa,MRb are reset to 0.</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l01621"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f"> 1621</a></span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> address)</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;{</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buf[4];</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> ret_data;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    buf[1] = (address&gt;&gt;8) &amp; 0xff;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    buf[0] = address &amp; 0xff;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="comment">// Write the address</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#afb5a1d8b95d7981f376b5fbc2a9d2f67">OTP_ADDR</a>,2,buf);</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="comment">// Assert OTP Read (self clearing)</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    buf[0] = 0x03; <span class="comment">// 0x03 for manual drive of OTP_READ</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,buf);</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    buf[0] = 0x00; <span class="comment">// Bit0 is not autoclearing, so clear it (Bit 1 is but we clear it anyway).</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,buf);</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="comment">// Read read data, available 40ns after rising edge of OTP_READ</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    ret_data=<a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#acbd9a65eac00a165986b93f92c2a1204">OTP_RDAT</a>);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="comment">// Return the 32bit of read data</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">return</span> (ret_data);</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;}</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="comment">// Configure the MR registers for initial programming (enable charge pump).</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="comment">// Read margin is used to stress the read back from the</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;<span class="comment">// programmed bit. In normal operation this is relaxed.</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> _dwt_otpsetmrregs(<span class="keywordtype">int</span> mode)</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;{</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> rd_buf[4];</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> wr_buf[4];</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> mra=0,mrb=0,mr=0;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="comment">//printf(&quot;OTP SET MR: Setting MR,MRa,MRb for mode %2x\n&quot;,mode);</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="comment">// For mode we will set the following:</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="comment">// &quot;0&quot; : Reset all to 0x0:           MRA=0x0000, MRB=0x0000, MR=0x0000</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="comment">// &quot;1&quot; : Set for inital programming: MRA=0x9220, MRB=0x000E, MR=0x1024</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="comment">// &quot;2&quot; : Set for soak programming:   MRA=0x9220, MRB=0x0003, MR=0x1824</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="comment">// &quot;3&quot; : High Vpp:                   MRA=0x9220, MRB=0x004E, MR=0x1824</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="comment">// &quot;4&quot; : Low Read Margin:            MRA=0x0000, MRB=0x000E, MR=0x0000</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="comment">// &quot;5&quot; : Array Clean:                MRA=0x0049, MRB=0x0003, MR=0x0024</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="comment">// &quot;4&quot; : Very Low Read Margin:       MRA=0x0000, MRB=0x000E, MR=0x0000</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="comment">// PROGRAMME MRA</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="comment">// Set MRA, MODE_SEL</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    wr_buf[0] = 0x03;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>+1,1,wr_buf);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="comment">// Load data</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keywordflow">switch</span>(mode&amp;0x0f) {</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">case</span> 0x0 :</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        mr =0x0000;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        mra=0x0000;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        mrb=0x0000;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keywordflow">case</span> 0x1 :</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        mr =0x1024;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        mra=0x9220; <span class="comment">// Enable CPP mon</span></div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        mrb=0x000e;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">case</span> 0x2 :</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        mr =0x1824;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        mra=0x9220;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        mrb=0x0003;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="keywordflow">case</span> 0x3 :</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        mr =0x1824;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        mra=0x9220;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        mrb=0x004e;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <span class="keywordflow">case</span> 0x4 :</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        mr =0x0000;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        mra=0x0000;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        mrb=0x0003;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">case</span> 0x5 :</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        mr =0x0024;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        mra=0x0000;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        mrb=0x0003;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    default :</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="comment">//  printf(&quot;OTP SET MR: ERROR : Invalid mode selected\n&quot;,mode);</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    }</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    wr_buf[0] = mra &amp; 0x00ff;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    wr_buf[1] = (mra &amp; 0xff00)&gt;&gt;8;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a2299e67275d5a17f86136ac27541715a">OTP_WDAT</a>,2,wr_buf);</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="comment">// Set WRITE_MR</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    wr_buf[0] = 0x08;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,wr_buf);</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="comment">// Wait?</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="comment">// Set Clear Mode sel</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    wr_buf[0] = 0x02;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>+1,1,wr_buf);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="comment">// Set AUX update, write MR</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    wr_buf[0] = 0x88;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,wr_buf);</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <span class="comment">// Clear write MR</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    wr_buf[0] = 0x80;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,wr_buf);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="comment">// Clear AUX update</span></div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    wr_buf[0] = 0x00;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,wr_buf);</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <span class="comment">// PROGRAM MRB</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <span class="comment">// Set SLOW, MRB, MODE_SEL</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    wr_buf[0] = 0x05;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>+1,1,wr_buf);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    wr_buf[0] = mrb &amp; 0x00ff;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    wr_buf[1] = (mrb &amp; 0xff00)&gt;&gt;8;</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a2299e67275d5a17f86136ac27541715a">OTP_WDAT</a>,2,wr_buf);</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="comment">// Set WRITE_MR</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    wr_buf[0] = 0x08;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,wr_buf);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="comment">// Wait?</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="comment">// Set Clear Mode sel</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    wr_buf[0] = 0x04;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>+1,1,wr_buf);</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="comment">// Set AUX update, write MR</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    wr_buf[0] = 0x88;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,wr_buf);</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="comment">// Clear write MR</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    wr_buf[0] = 0x80;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,wr_buf);</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="comment">// Clear AUX update</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    wr_buf[0] = 0x00;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,wr_buf);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="comment">// PROGRAM MR</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="comment">// Set SLOW, MODE_SEL</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    wr_buf[0] = 0x01;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>+1,1,wr_buf);</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="comment">// Load data</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    wr_buf[0] = mr &amp; 0x00ff;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    wr_buf[1] = (mr &amp; 0xff00)&gt;&gt;8;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a2299e67275d5a17f86136ac27541715a">OTP_WDAT</a>,2,wr_buf);</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="comment">// Set WRITE_MR</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    wr_buf[0] = 0x08;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,wr_buf);</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="comment">// Wait?</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <a class="code" href="dw1000__driver_8c.html#a26e5ffb57ec8bf2f850ced177af659d1">Sleep</a>(10);</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="comment">// Set Clear Mode sel</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    wr_buf[0] = 0x00;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>+1,1,wr_buf);</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <span class="comment">// Read confirm mode writes.</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="comment">//Set man override, MRA_SEL</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    wr_buf[0] = <a class="code" href="dw1000__regs_8h.html#aae45551250eda54d9746db689ae50688">OTP_CTRL_OTPRDEN</a>;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,wr_buf);</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    wr_buf[0] = 0x02;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>+1,1,wr_buf);</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="comment">//MRB_SEL</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    wr_buf[0] = 0x04;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>+1,1,wr_buf);</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <a class="code" href="dw1000__driver_8c.html#a26e5ffb57ec8bf2f850ced177af659d1">Sleep</a>(100);</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="comment">// Clear mode sel</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    wr_buf[0] = 0x00;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>,<a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>+1,1,wr_buf);</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="comment">// Clear MAN_OVERRIDE</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    wr_buf[0] = 0x00;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>,1,wr_buf);</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <a class="code" href="dw1000__driver_8c.html#a26e5ffb57ec8bf2f850ced177af659d1">Sleep</a>(10);</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="keywordflow">if</span> (((mode&amp;0x0f) == 0x1)||((mode&amp;0x0f) == 0x2))</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    {</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        <span class="comment">// Read status register</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#ab3bcf8b482c31bfe55165e206b3c195b">OTP_STAT</a>,1,rd_buf);</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    }</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a>;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;}</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="comment">// _dwt_otpprogword32 - function to program the OTP memory. Ensure that MR,MRa,MRb are reset to 0.</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="comment">// VNM Charge pump needs to be enabled(see _dwt_otpsetmrregs)</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment">// Note the address is only 11 bits long.</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device_8c.html#a5623a976649c9a1af2b33660a37677cc">_dwt_otpprogword32</a>(<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> data, <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> address)</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;{</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> rd_buf[1];</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> wr_buf[4];</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> otp_done;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="comment">// Read status register</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#ab3bcf8b482c31bfe55165e206b3c195b">OTP_STAT</a>, 1, rd_buf);</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">if</span>((rd_buf[0] &amp; 0x02) != 0x02)</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    {</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        printf(<span class="stringliteral">&quot;OTP PROG 32: ERROR VPP NOT OK, programming will fail. Are MR/MRA/MRB set?\n&quot;</span>);</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a>;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    }</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <span class="comment">// Write the data</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    wr_buf[3] = (data&gt;&gt;24) &amp; 0xff;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    wr_buf[2] = (data&gt;&gt;16) &amp; 0xff;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    wr_buf[1] = (data&gt;&gt;8) &amp; 0xff;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    wr_buf[0] = data &amp; 0xff;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a2299e67275d5a17f86136ac27541715a">OTP_WDAT</a>, 4, wr_buf);</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    <span class="comment">// Write the address [10:0]</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    wr_buf[1] = (address&gt;&gt;8) &amp; 0x07;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    wr_buf[0] = address &amp; 0xff;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#afb5a1d8b95d7981f376b5fbc2a9d2f67">OTP_ADDR</a>, 2, wr_buf);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <span class="comment">// Enable Sequenced programming</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    wr_buf[0] = <a class="code" href="dw1000__regs_8h.html#a003284037d9aea4e24d9fb3e2d18cafd">OTP_CTRL_OTPPROG</a>;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>, 1, wr_buf);</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    wr_buf[0] = 0x00; <span class="comment">// And clear</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>, 1, wr_buf);</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="comment">// WAIT for status to flag PRGM OK..</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    otp_done = 0;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="keywordflow">while</span>(otp_done == 0)</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    {</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <a class="code" href="dw1000__driver_8c.html#a26e5ffb57ec8bf2f850ced177af659d1">Sleep</a>(1);</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#ab3bcf8b482c31bfe55165e206b3c195b">OTP_STAT</a>, 1, rd_buf);</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="keywordflow">if</span>((rd_buf[0] &amp; 0x01) == 0x01)</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        {</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            otp_done = 1;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        }</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    }</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a>;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;}</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> <a class="code" href="dw1000__device__api_8h.html#ae567607e4b4a148742df9a75d280feeb">dwt_otpwriteandverify</a>(<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> value, <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> address)</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;{</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="keywordtype">int</span> prog_ok = 0;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <span class="keywordtype">int</span> retry = 0;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="comment">//firstly set the system clock to crystal</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#a010589037eade55b18f20b926ba264a7">FORCE_SYS_XTI</a>); <span class="comment">//set system clock to XTI</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="comment"></span>    <span class="comment">//Set the supply to 3.7V</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    _dwt_otpsetmrregs(1); <span class="comment">//set mode for programming</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <span class="comment">//for each value to program - the readback/chack is done couple of times to verify it has programmed successfully</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordflow">while</span>(prog_ok==0)</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    {</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        <a class="code" href="dw1000__device_8c.html#a5623a976649c9a1af2b33660a37677cc">_dwt_otpprogword32</a>(value, address);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(address) == value)</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        {</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            prog_ok = 1;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;        }</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        retry++;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        <span class="keywordflow">if</span>(retry==5)</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        {</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;            prog_ok = 2;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        }</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    }</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <span class="comment">//even if the above does not exit before retry reaches 5, the programming has probably been sucessful</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    _dwt_otpsetmrregs(4); <span class="comment">//set mode for reading</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a>(address) == value)   <span class="comment">//if this does not pass please check voltage supply on VDDIO</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    {</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;        prog_ok = <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a>;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    }</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    {</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        prog_ok = <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a>;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    }</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    _dwt_otpsetmrregs(0); <span class="comment">//setting OTP mode register for low RM read - resetting the device would be alternative</span></div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">return</span> prog_ok;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;}</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="comment">// upload always on array configuration</span></div><div class="line"><a name="l01927"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#aa1586b9a0fd3bfaa43a4bd4aa47a186e"> 1927</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#aa1586b9a0fd3bfaa43a4bd4aa47a186e">_dwt_aonconfigupload</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;{</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buf[1];</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="comment">// Upload array</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    buf[0] = 0x04;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>,<a class="code" href="dw1000__regs_8h.html#abdb48465a9bee40a54a7286f9b2a6880">AON_CTRL_OFFSET</a>,1,buf);</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    buf[0] = 0x00;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>,<a class="code" href="dw1000__regs_8h.html#abdb48465a9bee40a54a7286f9b2a6880">AON_CTRL_OFFSET</a>,1,buf);</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;}</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="comment">// upload always on array configuration and go to sleep</span></div><div class="line"><a name="l01939"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a72ae86bde280af3cd6e4e76d85839c8a"> 1939</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a72ae86bde280af3cd6e4e76d85839c8a">_dwt_aonarrayupload</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;{</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buf[1];</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <span class="comment">// Upload array</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    buf[0] = 0x00;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>,<a class="code" href="dw1000__regs_8h.html#abdb48465a9bee40a54a7286f9b2a6880">AON_CTRL_OFFSET</a>,1,buf);</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    buf[0] = 0x02;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>,<a class="code" href="dw1000__regs_8h.html#abdb48465a9bee40a54a7286f9b2a6880">AON_CTRL_OFFSET</a>,1,buf);</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;}</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;</div><div class="line"><a name="l01963"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#ae94cb9b5108c1c636a256ca5396747d0"> 1963</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a417371cd802327a2535444dbbf3588b3">dwt_entersleep</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;{</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="comment">//copy config to AON - upload the new configuration</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <a class="code" href="dw1000__device_8c.html#a72ae86bde280af3cd6e4e76d85839c8a">_dwt_aonarrayupload</a>();</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;}</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;</div><div class="line"><a name="l01983"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a4e5df7aa58d54bd47d6d585be971a9a8"> 1983</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a4e5df7aa58d54bd47d6d585be971a9a8">dwt_configuresleepcnt</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> sleepcnt)</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;{</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buf[2];</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    buf[0] = 0x01;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,<a class="code" href="dw1000__regs_8h.html#adef9d26cbeba56cbe43138649b5dd13f">PMSC_CTRL0_OFFSET</a>,1,buf);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    buf[0] = 0;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#a3fc76d75d4bef1c9860a39e707ea6cff">AON_CFG0_OFFSET</a>, 1, buf); <span class="comment">//to make sure we don&#39;t accidentaly go to sleep</span></div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    buf[0] = 0;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#aa24dfe3eb871169f8d819b42f24fd5ec">AON_CFG1_OFFSET</a>, 1, buf);</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    <span class="comment">//disable the sleep counter</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <a class="code" href="dw1000__device_8c.html#aa1586b9a0fd3bfaa43a4bd4aa47a186e">_dwt_aonconfigupload</a>();</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <span class="comment">//set new value</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    buf[0] = sleepcnt &amp; 0xFF;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    buf[1] = (sleepcnt &gt;&gt; 8) &amp; 0xFF;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, (<a class="code" href="dw1000__regs_8h.html#a3fc76d75d4bef1c9860a39e707ea6cff">AON_CFG0_OFFSET</a>+2) , 2, buf);</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <a class="code" href="dw1000__device_8c.html#aa1586b9a0fd3bfaa43a4bd4aa47a186e">_dwt_aonconfigupload</a>();</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    <span class="comment">//enable the sleep counter</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    buf[0] = 1;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#aa24dfe3eb871169f8d819b42f24fd5ec">AON_CFG1_OFFSET</a>, 1, buf);</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <a class="code" href="dw1000__device_8c.html#aa1586b9a0fd3bfaa43a4bd4aa47a186e">_dwt_aonconfigupload</a>();</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    buf[0] = 0x00;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,<a class="code" href="dw1000__regs_8h.html#adef9d26cbeba56cbe43138649b5dd13f">PMSC_CTRL0_OFFSET</a>,1,buf);</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;}</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="dw1000__device__api_8h.html#acf1cd4f28f5484bab0d2f08687aefeb1">dwt_calibratesleepcnt</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;{</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buf[2];</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="namespacegencsv.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <span class="comment">//enable cal of the sleep counter</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    buf[0] = 4;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#aa24dfe3eb871169f8d819b42f24fd5ec">AON_CFG1_OFFSET</a>, 1, buf);</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <a class="code" href="dw1000__device_8c.html#aa1586b9a0fd3bfaa43a4bd4aa47a186e">_dwt_aonconfigupload</a>();</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="comment">//disables the cal of the sleep counter</span></div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    buf[0] = 0;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#aa24dfe3eb871169f8d819b42f24fd5ec">AON_CFG1_OFFSET</a>, 1, buf);</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <a class="code" href="dw1000__device_8c.html#aa1586b9a0fd3bfaa43a4bd4aa47a186e">_dwt_aonconfigupload</a>();</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    buf[0] = 0x01;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,<a class="code" href="dw1000__regs_8h.html#adef9d26cbeba56cbe43138649b5dd13f">PMSC_CTRL0_OFFSET</a>,1,buf);</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    <a class="code" href="dw1000__driver_8c.html#a26e5ffb57ec8bf2f850ced177af659d1">Sleep</a>(1);</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <span class="comment">//read the number of XTAL/2 cycles one lposc cycle took.</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="comment">// Set up address</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    buf[0] = 118;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#a6886d434f1da81ef4e5b0830ead5fe49">AON_ADDR_OFFSET</a>, 1,buf);</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;     <span class="comment">// Enable manual override</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    buf[0] = 0x80; <span class="comment">// OVR EN</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#abdb48465a9bee40a54a7286f9b2a6880">AON_CTRL_OFFSET</a>, 1,buf);</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <span class="comment">// Read confirm data that was written</span></div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    buf[0] = 0x88; <span class="comment">// OVR EN, OVR_RD</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#abdb48465a9bee40a54a7286f9b2a6880">AON_CTRL_OFFSET</a>, 1,buf);</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <span class="comment">// Read back byte from AON</span></div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#ad342007f0b84ffdc0ea2c431e40e0e2d">AON_RDAT_OFFSET</a>, 1,buf);</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    result = buf[0];</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    result = result &lt;&lt; 8;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="comment">// Set up address</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    buf[0] = 117;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#a6886d434f1da81ef4e5b0830ead5fe49">AON_ADDR_OFFSET</a>, 1,buf);</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;     <span class="comment">// Enable manual override</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    buf[0] = 0x80; <span class="comment">// OVR EN</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#abdb48465a9bee40a54a7286f9b2a6880">AON_CTRL_OFFSET</a>, 1,buf);</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    <span class="comment">// Read confirm data that was written</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    buf[0] = 0x88; <span class="comment">// OVR EN, OVR_RD</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#abdb48465a9bee40a54a7286f9b2a6880">AON_CTRL_OFFSET</a>, 1,buf);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="comment">// Read back byte from AON</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#ad342007f0b84ffdc0ea2c431e40e0e2d">AON_RDAT_OFFSET</a>, 1,buf);</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    result |= buf[0];</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    buf[0] = 0x00; <span class="comment">// Disable OVR EN</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>,<a class="code" href="dw1000__regs_8h.html#abdb48465a9bee40a54a7286f9b2a6880">AON_CTRL_OFFSET</a>,1,buf);</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    buf[0] = 0x00;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,<a class="code" href="dw1000__regs_8h.html#adef9d26cbeba56cbe43138649b5dd13f">PMSC_CTRL0_OFFSET</a>,1,buf);</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="comment">//returns the number of XTAL/2 cycles per one LP OSC cycle</span></div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <span class="comment">//this can be converted into LP OSC freq by 19.2MHz/result</span></div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacegencsv.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;}</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a5be2c3541b6b5f684a1fa7bd48e2baac">dwt_configuresleep</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> mode, <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> wake)</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;{</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buf[1];</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#a9c6d3e939a818b86a682f5036d28a949">AON_WCFG_OFFSET</a>, mode);</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    buf[0] = wake;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#a3fc76d75d4bef1c9860a39e707ea6cff">AON_CFG0_OFFSET</a>, 1, buf);</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;}</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;</div><div class="line"><a name="l02158"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a1c6181993dfb9e9f41fc70b1b0be8cc7"> 2158</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#afcdf3884c77becf8c5948844dc0fc464">dwt_entersleepaftertx</a>(<span class="keywordtype">int</span> enable)</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;{</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, <a class="code" href="dw1000__regs_8h.html#a206f9d67a93e9b452f2a5695e46a8dc1">PMSC_CTRL1_OFFSET</a>);</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    <span class="comment">//set the auto TX -&gt; sleep bit</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordflow">if</span>(enable)</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    {</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        reg |= <a class="code" href="dw1000__regs_8h.html#a2743654604f937f66bf998ed77c5311a">PMSC_CTRL1_ATXSLP</a>;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    }</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    {</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        reg &amp;= ~(<a class="code" href="dw1000__regs_8h.html#a2743654604f937f66bf998ed77c5311a">PMSC_CTRL1_ATXSLP</a>);</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    }</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0aa5f3c84492a8a7fda673b303285b6f">dwt_write32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, <a class="code" href="dw1000__regs_8h.html#a206f9d67a93e9b452f2a5695e46a8dc1">PMSC_CTRL1_OFFSET</a>, reg);</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;}</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;</div><div class="line"><a name="l02189"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a443a4de48862bc328443a744abcc93a7"> 2189</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a443a4de48862bc328443a744abcc93a7">dwt_spicswakeup</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *buff, <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> length)</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;{</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="dw1000__device_8c.html#a71615163f91308dc3a6525fe9cc43d49">dwt_readdevid</a>() != <a class="code" href="dw1000__device__api_8h.html#a4ae9b2f0900bcea30b64b66b8b9efc51">DWT_DEVICE_ID</a>) <span class="comment">//device was in deep sleep (the first read fails)</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    {</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        <span class="comment">//need to keep chip select line low for at least 600us</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(0x0, 0x0, length, buff); <span class="comment">//do a long read to wake up the chip (hold the chip select low) (@3M, 100 ~= 272us, 200 ~= 540us)</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        <span class="comment">//need 5ms for XTAL to start and stabilise (could wait for PLL lock IRQ status bit !!!)</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        <span class="comment">//NOTE: Polling of the STATUS register is not possible unless freq is &lt; 3MHz</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        <a class="code" href="dw1000__driver_8c.html#a26e5ffb57ec8bf2f850ced177af659d1">Sleep</a>(5);</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    }</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    {</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a>;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    }</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="comment">//DEBUG - check if still in sleep mode</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="dw1000__device_8c.html#a71615163f91308dc3a6525fe9cc43d49">dwt_readdevid</a>() != <a class="code" href="dw1000__device__api_8h.html#a4ae9b2f0900bcea30b64b66b8b9efc51">DWT_DEVICE_ID</a>)</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    {</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a>;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    }</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a>;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;}</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div><div class="line"><a name="l02226"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a031e6bc47527a11af30c4e66b0dd81ca"> 2226</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a031e6bc47527a11af30c4e66b0dd81ca">_dwt_configlde</a>(<span class="keywordtype">int</span> prfIndex)</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;{</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> x = <a class="code" href="dw1000__param__types_8h.html#ae48e9f6b3e15e8600bcfe5aa50fffc6f">LDE_PARAM1</a>;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>( <a class="code" href="dw1000__regs_8h.html#ab6e5e6c06cf4e719d7268dd73267304a">LDE_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a7499ef85fe79d4c8d2f68fd430192944">LDE_CFG1_OFFSET</a>, 1, &amp;x ); <span class="comment">/*8-bit configuration register*/</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    <span class="keywordflow">if</span>(prfIndex)</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    {</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;        <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>( <a class="code" href="dw1000__regs_8h.html#ab6e5e6c06cf4e719d7268dd73267304a">LDE_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a48d3d9af1023eb17d672ca546d127e2d">LDE_CFG2_OFFSET</a>, (<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>) <a class="code" href="dw1000__param__types_8h.html#a8ae67e0ecbef0a2c13c9c95a21535f6b">LDE_PARAM3_64</a>); <span class="comment">/* 16-bit LDE configuration tuning register */</span></div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    }</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    {</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>( <a class="code" href="dw1000__regs_8h.html#ab6e5e6c06cf4e719d7268dd73267304a">LDE_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a48d3d9af1023eb17d672ca546d127e2d">LDE_CFG2_OFFSET</a>, (<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>) <a class="code" href="dw1000__param__types_8h.html#afc946ba42f93d6708a9ac591a628aaff">LDE_PARAM3_16</a>);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    }</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;}</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a561b63c1057ca00783f31202aef965b7"> 2254</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a561b63c1057ca00783f31202aef965b7">_dwt_loaducodefromrom</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;{</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> wr_buf[2];</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="comment">//set up clocks</span></div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    wr_buf[1] = 0x03;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    wr_buf[0] = 0x01;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, <a class="code" href="dw1000__regs_8h.html#adef9d26cbeba56cbe43138649b5dd13f">PMSC_CTRL0_OFFSET</a>, 2, wr_buf);</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="comment">//kick off the LDE load</span></div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a>, <a class="code" href="dw1000__regs_8h.html#a70143d2e60953dcd124d3df517ced74c">OTP_CTRL_LDELOAD</a>); <span class="comment">// set load LDE kick bit</span></div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <a class="code" href="dw1000__driver_8c.html#a26e5ffb57ec8bf2f850ced177af659d1">Sleep</a>(1); <span class="comment">// Allow time for code to upload (should take up to 120 us)</span></div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <span class="comment">//default clocks (ENABLE_ALL_SEQ)</span></div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#ac221d4cf7229596db907b498bc32f3b9">ENABLE_ALL_SEQ</a>); <span class="comment">//enable clocks for sequencing</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a> ;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;}</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a531be189da904749fa61255e8a5e0d79">dwt_loadopsettabfromotp</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> gtab_sel)</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;{</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> wr_buf[2];</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> reg = (((gtab_sel &amp; 0x3) &lt;&lt; 5) | 0x1);</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="comment">//set up clocks</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    wr_buf[1] = 0x03;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    wr_buf[0] = 0x01;</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, <a class="code" href="dw1000__regs_8h.html#adef9d26cbeba56cbe43138649b5dd13f">PMSC_CTRL0_OFFSET</a>, 2, wr_buf);</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a1e769cec1bd763209dcd20e33b71cd45">OTP_SF</a>, reg); <span class="comment">// set load gtab kick bit (bit0) and gtab selection bit</span></div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="comment">//default clocks (ENABLE_ALL_SEQ)</span></div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#ac221d4cf7229596db907b498bc32f3b9">ENABLE_ALL_SEQ</a>); <span class="comment">//enable clocks for sequencing</span></div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;}</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#ac8174986655fe20117216ecbb6e77b64">dwt_setsmarttxpower</a>(<span class="keywordtype">int</span> enable)</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;{</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="comment">//config system register</span></div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> = <a class="code" href="dw1000__device__api_8h.html#a0c17221ed7c973aba944f41f2cadd621">dwt_read32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>) ;            <span class="comment">// read sysconfig register</span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="comment">//disable smart power configuration</span></div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <span class="keywordflow">if</span>(enable)</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    {</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &amp;= ~(<a class="code" href="dw1000__regs_8h.html#aaf07b88c1b2932a520dc48edd32ff1f8">SYS_CFG_DIS_STXP</a>) ;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    }</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    {</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> |= <a class="code" href="dw1000__regs_8h.html#aaf07b88c1b2932a520dc48edd32ff1f8">SYS_CFG_DIS_STXP</a> ;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    }</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>,dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a>) ;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;}</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;</div><div class="line"><a name="l02351"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a1963cc02fc45ce24d84c14f35158c655"> 2351</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a1963cc02fc45ce24d84c14f35158c655">dwt_enableautoack</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> responseDelayTime)</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;{</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="comment">//enable auto ACK - needs to have frame filtering enabled as well</span></div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> |= <a class="code" href="dw1000__regs_8h.html#ad2ebb676841b8a577fedad861deb4e34">SYS_CFG_AUTOACK</a>;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <span class="comment">// auto ACK reply delay</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a83578ad2176080283f41c70a467fd899">ACK_RESP_T_ID</a>, 0x2, (responseDelayTime &lt;&lt; 8) ) ; <span class="comment">//in symbols</span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>,dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a>) ;</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;}</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a16807dbb3e9c10728cd82233f8ae2a46">dwt_setdblrxbuffmode</a>(<span class="keywordtype">int</span> enable)</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;{</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="keywordflow">if</span>(enable)</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    {</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;        <span class="comment">//enable double rx buffer mode</span></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &amp;= ~<a class="code" href="dw1000__regs_8h.html#a6d24b4ae981b5b1d6197a9720a45c18e">SYS_CFG_DIS_DRXB</a>;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#a0a8aef2235301662aa0be5824dc1f8c1">dblbuffon</a> = 1;</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    }</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    {</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;        <span class="comment">//disable double rx buffer mode</span></div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> |= <a class="code" href="dw1000__regs_8h.html#a6d24b4ae981b5b1d6197a9720a45c18e">SYS_CFG_DIS_DRXB</a>;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#a0a8aef2235301662aa0be5824dc1f8c1">dblbuffon</a> = 0;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    }</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>,dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a>) ;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;}</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#add2d46db517c72a04af4ab44ef20937d">dwt_setautorxreenable</a>(<span class="keywordtype">int</span> enable)</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;{</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> byte = 0;</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <span class="keywordflow">if</span>(enable)</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    {</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <span class="comment">//enable auto re-enable of the receiver</span></div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> |= <a class="code" href="dw1000__regs_8h.html#aa1b9caf35632d030926d6650d0dc94ce">SYS_CFG_RXAUTR</a>;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    }</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    {</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        <span class="comment">//disable auto re-enable of the receiver</span></div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &amp;= ~<a class="code" href="dw1000__regs_8h.html#aa1b9caf35632d030926d6650d0dc94ce">SYS_CFG_RXAUTR</a>;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    }</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    byte = dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &gt;&gt; 24;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>, 3, 1, &amp;byte) ;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;}</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;</div><div class="line"><a name="l02437"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a8cf2d150d142fa90aff6a720a82a207d"> 2437</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a8cf2d150d142fa90aff6a720a82a207d">dwt_setrxaftertxdelay</a>(<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> rxDelayTime)</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;{</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> val = <a class="code" href="dw1000__device__api_8h.html#a0c17221ed7c973aba944f41f2cadd621">dwt_read32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a83578ad2176080283f41c70a467fd899">ACK_RESP_T_ID</a>) ;          <span class="comment">// read ACK_RESP_T_ID register</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    val &amp;= ~(<a class="code" href="dw1000__regs_8h.html#ad8f994a2ff2e5aa3ed84f58e7bec72f7">ACK_RESP_T_W4R_TIM_MASK</a>) ; <span class="comment">//clear the timer (19:0)</span></div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    val |= (rxDelayTime &amp; <a class="code" href="dw1000__regs_8h.html#ad8f994a2ff2e5aa3ed84f58e7bec72f7">ACK_RESP_T_W4R_TIM_MASK</a>) ; <span class="comment">//in usec (e.g. turn the receiver 20us after TX)</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a83578ad2176080283f41c70a467fd899">ACK_RESP_T_ID</a>, val) ;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;}</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#ad08514888deba1a7871beee4f60ded51">dwt_setcallbacks</a>(<span class="keywordtype">void</span> (*txcallback)(<span class="keyword">const</span> <a class="code" href="structdwt__callback__data__t.html">dwt_callback_data_t</a> *), <span class="keywordtype">void</span> (*rxcallback)(<span class="keyword">const</span> <a class="code" href="structdwt__callback__data__t.html">dwt_callback_data_t</a> *))</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;{</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a5a2dd846e1a10ed5412c9f4d6573483f">dwt_txcallback</a> = txcallback;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a> = rxcallback;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;}</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="dw1000__device__api_8h.html#abdd93701efe685335bbc923ba1c28606">dwt_checkIRQ</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;{</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> temp;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>, 0, 1, &amp;temp);</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <span class="keywordflow">return</span> (temp &amp; 0x1) ;</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;}</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;<span class="preprocessor">#define DEBUGx 0</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> last_status[10];</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="keywordtype">int</span> status_idx = 0;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#aa42964dcdbe89c97fa5a4c6f455b9bb4">dwt_isr</a>(<span class="keywordtype">void</span>) <span class="comment">// assume interrupt can supply context</span></div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;{</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>  <a class="code" href="adapter_8cpp.html#a9611b3a00430a86619b5923de30f9fdb">status</a> = 0;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a>  clear = 0; <span class="comment">// will clear any events seen</span></div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;<span class="preprocessor">#if (DEBUGx==1)</span></div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> status1 = 0;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> states = 0;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> states1 = 0;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buffer[2] = {0, 0};</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = 0;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a60ce61b06367fc8be51dd47a8a444f75">dblbuff</a> = dw1000local.<a class="code" href="structdwt__local__data__t.html#a0a8aef2235301662aa0be5824dc1f8c1">dblbuffon</a> ;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    last_status[status_idx++] = status = dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#af91a4c0bd977c78af5dd4c112bb0bc47">status</a> = <a class="code" href="dw1000__device__api_8h.html#a0c17221ed7c973aba944f41f2cadd621">dwt_read32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>) ;            <span class="comment">// read status register low 32bits</span></div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    <span class="keywordflow">if</span>(status_idx &gt;= 10)</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    {</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;        status_idx = 0;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    }</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <span class="comment">//NOTES:</span></div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="comment">//1. TX Event - if DWT_INT_TFRS is enabled, then when the frame has completed transmission the interrupt will be triggered.</span></div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <span class="comment">//   The status register will have the TXFRS bit set. This function will clear the tx event and call the dwt_txcallback function.</span></div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <span class="comment">//2. RX Event - if DWT_INT_RFCG is enabled, then when a frame with good CRC has been received the interrupt will be triggered.</span></div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="comment">//   The status register will have the RXFCG bit set. This function will clear the rx event and call the dwt_rxcallback function.</span></div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="comment">//2.a. RX Event - This is same as 2. above except this time the received frame has ACK request bit set in the header (AAT bit will be set).</span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="comment">//     This function will clear the rx event and call the dwt_rxcallback function, notifying the application that ACK req is set.</span></div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="comment">//     If using auto-ACK, the AAT indicates that ACK frame transmission is in progress. Once the ACK has been sent the TXFRS bit will be set and TX event triggered.</span></div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <span class="comment">//     If the auto-ACK is not enabled, the application can format/configure and start transmission of its own ACK frame.</span></div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;<span class="preprocessor">#if (DEBUGx==1)</span></div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <span class="comment">//DEBUG ----- DEBUG ----- DEBUG -----</span></div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    status1 = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>, 1) ;            <span class="comment">// read status register</span></div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a4083cd58f0401dfa3f7e047fad4d61f5">RX_BUFFER_ID</a>,0,2,buffer) ;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    printf(<span class="stringliteral">&quot;status %02X%08X, byte 0 %02X%02X\n&quot;</span>, status1&gt;&gt;24, status, buffer[0], buffer[1]);</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    states = <a class="code" href="dw1000__device__api_8h.html#a0c17221ed7c973aba944f41f2cadd621">dwt_read32bitreg</a>(0x19) ;            <span class="comment">// read status register</span></div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    states1 = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(0x19, 1) ;            <span class="comment">// read status register</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    printf(<span class="stringliteral">&quot;states %02X%08X\n&quot;</span>, states1&gt;&gt;24, states);</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <span class="keywordflow">if</span>(status == 0x800003)</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    {</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        <span class="comment">//uint32 status1 = 0;</span></div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        <span class="comment">//uint32 states1 = 0;</span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        <span class="comment">//status1 = dwt_read32bitoffsetreg(SYS_STATUS_ID, 1) ;</span></div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;        <span class="comment">//states1 = dwt_read32bitoffsetreg(0x19, 0) ;</span></div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        <span class="comment">//states1 = dwt_read32bitoffsetreg(0x19, 1) ;</span></div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad54499732c9c424ed217c1893984e52f">dwt_forcetrxoff</a>();</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        <a class="code" href="dw1000__device_8c.html#a022a50ff2324931bc307843cf9892f55">dwt_rxreset</a>();</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    }</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <span class="comment">//fix for bug 622 - LDE done flag gets latched on a bad frame</span></div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    <span class="keywordflow">if</span>((status &amp; <a class="code" href="dw1000__regs_8h.html#a70b544d858c4690fe470f161c01b1268">SYS_STATUS_LDEDONE</a>) &amp;&amp; (dw1000local.<a class="code" href="structdwt__local__data__t.html#a0a8aef2235301662aa0be5824dc1f8c1">dblbuffon</a> == 0))</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    {</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;        <span class="keywordflow">if</span>((status &amp; (SYS_STATUS_LDEDONE | <a class="code" href="dw1000__regs_8h.html#afaba7d9ecbab0d415786401508f3f32b">SYS_STATUS_RXPHD</a> | <a class="code" href="dw1000__regs_8h.html#a8cf4e6745aff6f5fd90c0a3ac3faf861">SYS_STATUS_RXSFDD</a>)) != (SYS_STATUS_LDEDONE | <a class="code" href="dw1000__regs_8h.html#afaba7d9ecbab0d415786401508f3f32b">SYS_STATUS_RXPHD</a> | <a class="code" href="dw1000__regs_8h.html#a8cf4e6745aff6f5fd90c0a3ac3faf861">SYS_STATUS_RXSFDD</a>))</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;        {</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;            <span class="comment">//got LDE done but other flags SFD and PHR are clear - this is a bad frame - reset the transceiver</span></div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;            <a class="code" href="dw1000__device_8c.html#ad54499732c9c424ed217c1893984e52f">dwt_forcetrxoff</a>(); <span class="comment">//this will clear all events</span></div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;            <a class="code" href="dw1000__device_8c.html#a022a50ff2324931bc307843cf9892f55">dwt_rxreset</a>();</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;            <span class="comment">//leave any TX events for processing (e.g. if we TX a frame, and then enable rx,</span></div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;            <span class="comment">//we can get into here before the TX frame done has been processed, when we are polling (i.e. slow to process the TX)</span></div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;            status &amp;= <a class="code" href="dw1000__regs_8h.html#ade323f926df2c969ab7a86c32611991f">CLEAR_ALLTX_EVENTS</a>;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;            <span class="comment">//re-enable the receiver - if auto rx re-enable set</span></div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;            <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &amp; <a class="code" href="dw1000__regs_8h.html#aa1b9caf35632d030926d6650d0dc94ce">SYS_CFG_RXAUTR</a>)</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;            {</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>,0,(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>)<a class="code" href="dw1000__regs_8h.html#a22c2a85161d7b229e98a219f110cb280">SYS_CTRL_RXENAB</a>) ;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;            }</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;            {</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#adbb2e9ebb01b7828c84195bb6a2957d5">DWT_SIG_RX_ERROR</a>  ;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a> != <a class="code" href="_s_e_g_g_e_r___r_t_t_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                    dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a>(&amp;dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>);</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;            }</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;        }</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    }</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    <span class="comment">// 1st check for RX frame received or RX timeout and if so call the rx callback function</span></div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    <span class="keywordflow">if</span>(status &amp; <a class="code" href="dw1000__regs_8h.html#a87448e3ba3e8ed00210836e730fc3018">SYS_STATUS_RXFCG</a>) <span class="comment">// Receiver FCS Good</span></div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    {</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        <span class="keywordflow">if</span>(status &amp; SYS_STATUS_LDEDONE)  <span class="comment">// LDE done/finished</span></div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;        {</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;            <span class="comment">// bug 634 - overrun overwrites the frame info data... so both frames should be discarded</span></div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;            <span class="comment">// read frame info and other registers and check for overflow again</span></div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;            <span class="comment">// if overflow set then discard both frames...</span></div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;            <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> len = 0;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;            <span class="keywordflow">if</span> (status &amp; <a class="code" href="dw1000__regs_8h.html#abd513723e610f0420d17bea6f7969a61">SYS_STATUS_RXOVRR</a>) <span class="comment">//NOTE when overrun both HS and RS pointers point to the same buffer</span></div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;            {</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;                <span class="comment">//when the overrun happens the frame info data of the buffer A (which contains the older frame e.g. seq. num = x)</span></div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                <span class="comment">//will be corrupted with the latest frame (seq. num = x + 2) data, both the host and IC are pointing to buffer A</span></div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                <span class="comment">//we are going to discard this frame - turn off transceiver and reset receiver</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;                <a class="code" href="dw1000__device_8c.html#ad54499732c9c424ed217c1893984e52f">dwt_forcetrxoff</a>();</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;                <a class="code" href="dw1000__device_8c.html#a022a50ff2324931bc307843cf9892f55">dwt_rxreset</a>();</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &amp; <a class="code" href="dw1000__regs_8h.html#aa1b9caf35632d030926d6650d0dc94ce">SYS_CFG_RXAUTR</a>) <span class="comment">//re-enable of RX is ON, then re-enable here (ignore error)</span></div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;                {</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;                    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>,0,(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>)<a class="code" href="dw1000__regs_8h.html#a22c2a85161d7b229e98a219f110cb280">SYS_CTRL_RXENAB</a>) ;</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;                }</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                <span class="keywordflow">else</span> <span class="comment">//the RX will be re-enabled by the application, report an error</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;                {</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;                    dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#adbb2e9ebb01b7828c84195bb6a2957d5">DWT_SIG_RX_ERROR</a>  ;</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                    <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a> != <a class="code" href="_s_e_g_g_e_r___r_t_t_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                    {</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;                        dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a>(&amp;dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>);</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;                    }</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;                }</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;            }</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;            <span class="keywordflow">else</span> <span class="comment">//no overrun condition - proceed to process the frame</span></div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;            {</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;            len = <a class="code" href="dw1000__device_8c.html#ad05be2265afb31a2b4b39a68d55015c2">dwt_read16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#af7a34f290dbabd0881b1c140ae3a3152">RX_FINFO_ID</a>, 0) &amp; 0x3FF;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;            <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a4083cd58f0401dfa3f7e047fad4d61f5">RX_BUFFER_ID</a>,0,2,dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a639cd6162aa723653ed7c30a9dc0076c">fctrl</a>) ;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;            <span class="keywordflow">if</span> (dw1000local.<a class="code" href="structdwt__local__data__t.html#a1edf13f67bcb9a6a6154f08a55e79a57">longFrames</a>==0)</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;            {</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;                len &amp;= 0x7F ;</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;            }</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;            <span class="comment">// Standard frame length up to 127, extended frame length up to 1023 bytes</span></div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#aa7ef7eaa40ab056ef1f9f7382e93ca50">datalength</a> = len ;</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;            <span class="comment">//bug 627 workaround - clear the AAT bit if the ACK request bit in the FC is not set</span></div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;            <span class="keywordflow">if</span>((status &amp; <a class="code" href="dw1000__regs_8h.html#a7dda0978b03da373d6c0fd61d67eff43">SYS_STATUS_AAT</a>) <span class="comment">//AAT bit is set (ACK has been requested)</span></div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;                &amp;&amp; (((dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a639cd6162aa723653ed7c30a9dc0076c">fctrl</a>[0] &amp; 0x20) == 0) || (dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a639cd6162aa723653ed7c30a9dc0076c">fctrl</a>[0] == 0x02)) <span class="comment">//but the data frame has it clear or it is an ACK frame</span></div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;                )</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;            {</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;                clear |= <a class="code" href="dw1000__regs_8h.html#a7dda0978b03da373d6c0fd61d67eff43">SYS_STATUS_AAT</a> ;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;                dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a7549813331cfdf08243e7a3420380967">aatset</a> = 0 ; <span class="comment">//ACK request is not set</span></div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;                dw1000local.<a class="code" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">wait4resp</a> = 0;</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;            }</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;            <span class="keywordflow">else</span> <span class="comment">//the AAT is correctly set for a frame that requested the ACK</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;            {</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;                    dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a7549813331cfdf08243e7a3420380967">aatset</a> = (status &amp; <a class="code" href="dw1000__regs_8h.html#a7dda0978b03da373d6c0fd61d67eff43">SYS_STATUS_AAT</a>) ; <span class="comment">//check if ACK request is set</span></div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;            }</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#aa3b74f17d80ba07462a4b59b240937e9">DWT_SIG_RX_OKAY</a> ;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;            <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#a0a8aef2235301662aa0be5824dc1f8c1">dblbuffon</a> == 0) <span class="comment">//if no double buffering</span></div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;            {</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;                <span class="comment">//clear all receive status bits (as we are finished with this receive event)</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;                clear |= status &amp; <a class="code" href="dw1000__regs_8h.html#aca7e764e5539c10a4f06692e0eef2921">CLEAR_ALLRXGOOD_EVENTS</a>  ;</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;                <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>,clear) ;         <span class="comment">// write status register to clear event bits we have seen</span></div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;                <span class="comment">//NOTE: clear the event which caused interrupt means once the rx is enabled or tx is started</span></div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;                <span class="comment">//new events can trigger and give rise to new interrupts</span></div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;                <span class="comment">//call the RX call-back function to process the RX event</span></div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;                <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a> != <a class="code" href="_s_e_g_g_e_r___r_t_t_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;                {</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;                    dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a>(&amp;dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>);</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;                }</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;            }</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;            <span class="keywordflow">else</span> <span class="comment">//double buffer</span></div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;            {</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;                <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>  buff ;</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> hsrb = 0x01 ;</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;                <span class="comment">//need to make sure that the host/IC buffer pointers are aligned before starting RX</span></div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;                <span class="comment">//read again because the status could have changed since the interrupt was triggered</span></div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;                <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>, 3, 1, &amp;buff);</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;                <span class="comment">//if ICRBP is equal to HSRBP this means we&#39;ve received another frame (both buffers have frames)</span></div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;                <span class="keywordflow">if</span>((buff &amp; (<a class="code" href="dw1000__regs_8h.html#acd935ee553caaf570893a4f94375f877">SYS_STATUS_ICRBP</a>&gt;&gt;24) ) ==              <span class="comment">/* IC side Receive Buffer Pointer */</span></div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;                ((buff &amp; (<a class="code" href="dw1000__regs_8h.html#ad0ce511b6a007842cf18cd9dd6142305">SYS_STATUS_HSRBP</a>&gt;&gt;24) ) &lt;&lt; 1) )   <span class="comment">/* Host Side Receive Buffer Pointer */</span></div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;                {</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;                    <span class="comment">//clear all receive status bits (as we are finished with this receive event)</span></div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;                    clear |= status &amp; <a class="code" href="dw1000__regs_8h.html#aaa2d1a1171af97ea7c1e995fdecd7ede">CLEAR_DBLBUFF_EVENTS</a>  ;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;                    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>,clear) ;         <span class="comment">// write status register to clear event bits we have seen</span></div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;                }</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;                <span class="comment">//if they are not aligned then there is a new frame in the other buffer, so we just need to toggle...</span></div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;                <span class="keywordflow">if</span>((dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &amp; <a class="code" href="dw1000__regs_8h.html#aa1b9caf35632d030926d6650d0dc94ce">SYS_CFG_RXAUTR</a>) == 0) <span class="comment">//double buffer is on but no auto rx re-enable RX</span></div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                {</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>,0,(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>)<a class="code" href="dw1000__regs_8h.html#a22c2a85161d7b229e98a219f110cb280">SYS_CTRL_RXENAB</a>) ;</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;                }</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                <span class="comment">//call the RX call-back function to process the RX event</span></div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;                <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a> != <a class="code" href="_s_e_g_g_e_r___r_t_t_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;                {</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;                    dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a>(&amp;dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>);</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;                }</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;                <span class="comment">//if overrun, then reset the reciver - RX bug, when overruns cannot guarantee the last frame&#39;s data was not corrupted</span></div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;                <span class="comment">//if no overrun all is good, toggle the pointer</span></div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="dw1000__device_8c.html#a25f9a63d21930f760e8d27c044b9a6e8">dwt_checkoverrun</a>() == 0)</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;                {</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;                    <span class="comment">//toggle the host side Receive Buffer Pointer by writing one to the register</span></div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;                    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>, <a class="code" href="dw1000__regs_8h.html#aeb3669eeaadb76019385b31e1a249479">SYS_CTRL_HRBT_OFFSET</a>, 1, &amp;hsrb) ;       <span class="comment">// we need to swap rx buffer status reg (write one to toggle internally)</span></div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;                }</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;                {</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;                        <span class="comment">//the calback has completed, but the overrun has been set, before we toggled, this means two new frames have arrived (one in the other buffer) and the 2nd&#39;s PHR good set the overrun flag</span></div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;                        <span class="comment">//due to a receiver bug, which cannot guarantee the last frame&#39;s data was not corrupted need to reset receiver and discard any new data</span></div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;                    <a class="code" href="dw1000__device_8c.html#ad54499732c9c424ed217c1893984e52f">dwt_forcetrxoff</a>();</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;                    <a class="code" href="dw1000__device_8c.html#a022a50ff2324931bc307843cf9892f55">dwt_rxreset</a>();</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;                    <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &amp; <a class="code" href="dw1000__regs_8h.html#aa1b9caf35632d030926d6650d0dc94ce">SYS_CFG_RXAUTR</a>) <span class="comment">//re-enable of RX is ON, then re-enable here</span></div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;                    {</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;                        <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>,0,(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>)<a class="code" href="dw1000__regs_8h.html#a22c2a85161d7b229e98a219f110cb280">SYS_CTRL_RXENAB</a>) ;</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;                    }</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;                }</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;             } <span class="comment">//end of else double buffer</span></div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;            }<span class="comment">//end of no overrun</span></div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;        } <span class="comment">//if LDE_DONE is set (this means we have both SYS_STATUS_RXFCG and SYS_STATUS_LDEDONE)</span></div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;        <span class="keywordflow">else</span> <span class="comment">//no LDE_DONE ?</span></div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;        {</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;            <span class="comment">//printf(&quot;NO LDE done or LDE error\n&quot;);</span></div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;            <span class="keywordflow">if</span>(!(dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &amp; <a class="code" href="dw1000__regs_8h.html#aa1b9caf35632d030926d6650d0dc94ce">SYS_CFG_RXAUTR</a>))</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;            {</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;                <a class="code" href="dw1000__device_8c.html#ad54499732c9c424ed217c1893984e52f">dwt_forcetrxoff</a>();</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;            }</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            <a class="code" href="dw1000__device_8c.html#a022a50ff2324931bc307843cf9892f55">dwt_rxreset</a>();  <span class="comment">//reset the RX</span></div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">wait4resp</a> = 0;</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#adbb2e9ebb01b7828c84195bb6a2957d5">DWT_SIG_RX_ERROR</a>  ;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;            <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a> != <a class="code" href="_s_e_g_g_e_r___r_t_t_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;            {</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;                dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a>(&amp;dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>);</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;            }</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        }</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    } <span class="comment">// end if CRC is good</span></div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    <span class="comment">// Check for TX frame sent event and signal to upper layer.</span></div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <span class="keywordflow">if</span> (status &amp; <a class="code" href="dw1000__regs_8h.html#a52acd338ad5b409cf37eb741ff48c012">SYS_STATUS_TXFRS</a>)  <span class="comment">// Transmit Frame Sent</span></div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    {</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;        clear |= <a class="code" href="dw1000__regs_8h.html#ade323f926df2c969ab7a86c32611991f">CLEAR_ALLTX_EVENTS</a>; <span class="comment">//clear TX event bits</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>,clear) ;         <span class="comment">// write status register to clear event bits we have seen</span></div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        <span class="comment">//NOTE: clear the event which caused interrupt means once the rx is enabled or tx is started</span></div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;        <span class="comment">//new events can trigger and give rise to new interrupts</span></div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;        <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a7549813331cfdf08243e7a3420380967">aatset</a>)</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;        {</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a7549813331cfdf08243e7a3420380967">aatset</a> = 0; <span class="comment">//the ACK has been sent</span></div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;            <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#a0a8aef2235301662aa0be5824dc1f8c1">dblbuffon</a> == 0) <span class="comment">//if not double buffered</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;            {</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;                <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">wait4resp</a>) <span class="comment">//wait4response was set with the last TX start command</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;                {</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;                    <span class="comment">//if using wait4response and the ACK has been sent as the response requested it</span></div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;                    <span class="comment">//the receiver will be re-enabled, so issue a TRXOFF command to disable and prevent any</span></div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;                    <span class="comment">//unexpected interrupts</span></div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;                    <a class="code" href="dw1000__device_8c.html#ad54499732c9c424ed217c1893984e52f">dwt_forcetrxoff</a>();</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;                }</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;            }</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;        }</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#a478d6ddcbd313039f25241938b8f68ad">DWT_SIG_TX_DONE</a> ;  <span class="comment">// signal TX completed</span></div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;        <span class="comment">//call the TX call-back function to process the TX event</span></div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#a5a2dd846e1a10ed5412c9f4d6573483f">dwt_txcallback</a> != <a class="code" href="_s_e_g_g_e_r___r_t_t_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;        {</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a5a2dd846e1a10ed5412c9f4d6573483f">dwt_txcallback</a>(&amp;dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>);</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;        }</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    }</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status &amp; <a class="code" href="dw1000__regs_8h.html#ae9f0e5dfa940b236fd41d1bea2ae1522">SYS_STATUS_RXRFTO</a>)                                              <span class="comment">// Receiver Frame Wait timeout:</span></div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    {</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;        clear |= status &amp; <a class="code" href="dw1000__regs_8h.html#ae9f0e5dfa940b236fd41d1bea2ae1522">SYS_STATUS_RXRFTO</a> ;</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;        <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>,clear) ;         <span class="comment">// write status register to clear event bits we have seen</span></div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#a3f5674007a283f63fbd7a85a6945118e">DWT_SIG_RX_TIMEOUT</a>  ;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;        <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a> != <a class="code" href="_s_e_g_g_e_r___r_t_t_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;        {</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a>(&amp;dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>);</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;        }</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">wait4resp</a> = 0;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;    }</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status &amp; <a class="code" href="dw1000__regs_8h.html#aa92f33f5e885c9b027aa981257a7cda6">CLEAR_ALLRXERROR_EVENTS</a>)<span class="comment">//catches all other error events</span></div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    {</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;        clear |= status &amp; <a class="code" href="dw1000__regs_8h.html#aa92f33f5e885c9b027aa981257a7cda6">CLEAR_ALLRXERROR_EVENTS</a>;</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;        <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>,clear) ;         <span class="comment">// write status register to clear event bits we have seen</span></div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">wait4resp</a> = 0;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;        <span class="comment">//NOTE: clear the event which caused interrupt means once the rx is enabled or tx is started</span></div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        <span class="comment">//new events can trigger and give rise to new interrupts</span></div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;        <span class="comment">//fix for bug 622 - LDE done flag gets latched on a bad frame / reset receiver</span></div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        <span class="keywordflow">if</span>(!(dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &amp; <a class="code" href="dw1000__regs_8h.html#aa1b9caf35632d030926d6650d0dc94ce">SYS_CFG_RXAUTR</a>))</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;        {</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;            <a class="code" href="dw1000__device_8c.html#ad54499732c9c424ed217c1893984e52f">dwt_forcetrxoff</a>(); <span class="comment">//this will clear all events</span></div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;        }</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;        <a class="code" href="dw1000__device_8c.html#a022a50ff2324931bc307843cf9892f55">dwt_rxreset</a>();  <span class="comment">//reset the RX</span></div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;        <span class="comment">//end of fix for bug 622 - LDE done flag gets latched on a bad frame</span></div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;        <span class="keywordflow">if</span>(status &amp; <a class="code" href="dw1000__regs_8h.html#ab22cd81ecf063bed0870875c16c368e4">SYS_STATUS_RXPHE</a>)</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;        {</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#a5ed10dba0fe0ebb8703956fcc6918a1b">DWT_SIG_RX_PHR_ERROR</a>  ;</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;        }</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status &amp; <a class="code" href="dw1000__regs_8h.html#a4fd3dd0109e04c895eed63dae6ba5b8f">SYS_STATUS_RXFCE</a>)</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;        {</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#adbb2e9ebb01b7828c84195bb6a2957d5">DWT_SIG_RX_ERROR</a>  ;</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;        }</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status &amp; <a class="code" href="dw1000__regs_8h.html#a6c1bfd6270ab6fab0cb93d95103f3bef">SYS_STATUS_RXRFSL</a>)</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;        {</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#a3c48d1d2e1704b78ff0a2f23d203e2be">DWT_SIG_RX_SYNCLOSS</a>  ;</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;        }</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status &amp; <a class="code" href="dw1000__regs_8h.html#a59fba4244424c2f085ff3c722b53e549">SYS_STATUS_RXSFDTO</a>)</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        {</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#acd4cd347e39f341ba6dc897f74b6d02f">DWT_SIG_RX_SFDTIMEOUT</a>  ;</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;        }</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status &amp; <a class="code" href="dw1000__regs_8h.html#a2b75469680e446c4158dcf03afec9f27">SYS_STATUS_RXPTO</a>)</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;        {</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#ae90a40ed84747ac4c7b722553016455d">DWT_SIG_RX_PTOTIMEOUT</a>  ;</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;        }</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;        {</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>.<a class="code" href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">event</a> = <a class="code" href="dw1000__device__api_8h.html#adbb2e9ebb01b7828c84195bb6a2957d5">DWT_SIG_RX_ERROR</a>  ;</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;        }</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        <span class="keywordflow">if</span>(dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a> != <a class="code" href="_s_e_g_g_e_r___r_t_t_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;        {</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_rxcallback</a>(&amp;dw1000local.<a class="code" href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">cdata</a>);</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;        }</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;        status &amp;= <a class="code" href="dw1000__regs_8h.html#ade323f926df2c969ab7a86c32611991f">CLEAR_ALLTX_EVENTS</a>;</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    }</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;}  <span class="comment">// end dwt_isr()</span></div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;</div><div class="line"><a name="l02861"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#ae9f046658785584f1d160f3fa78e2af7"> 2861</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#ae9f046658785584f1d160f3fa78e2af7">dwt_setleds</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> test)</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;{</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buf[2];</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    <span class="keywordflow">if</span>(test &amp; 0x1)</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    {</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;        <span class="comment">// Set up MFIO for LED output</span></div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;        <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a88bfc74e04ac481875698053022132ea">GPIO_CTRL_ID</a>,0x00,2,buf);</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        buf[1] &amp;= ~0x3C; <span class="comment">//clear the bits</span></div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;        buf[1] |= 0x14;</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a88bfc74e04ac481875698053022132ea">GPIO_CTRL_ID</a>,0x01,1,&amp;buf[1]);</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;        <span class="comment">// Enable LP Oscillator to run from counter, turn on debounce clock</span></div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,0x02,1,buf);</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;        buf[0] |= 0x84; <span class="comment">//</span></div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,0x02,1,buf);</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        <span class="comment">// Enable LEDs to blink</span></div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;        buf[0] = 0x10; <span class="comment">// Blink period.</span></div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;        buf[1] = 0x01; <span class="comment">// Enable blink counter</span></div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,<a class="code" href="dw1000__regs_8h.html#a4db0c211744c357c1d0301c605dad3d1">PMSC_LEDC_OFFSET</a>,2,buf);</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    }</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((test &amp; 0x1)== 0)</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    {</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;        <span class="comment">// Clear the GPIO bits that are used for LED control</span></div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;        <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a88bfc74e04ac481875698053022132ea">GPIO_CTRL_ID</a>,0x00,2,buf);</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;        buf[1] &amp;= ~(0x14);</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a88bfc74e04ac481875698053022132ea">GPIO_CTRL_ID</a>,0x00,2,buf);</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;    }</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;    <span class="comment">// Test LEDs</span></div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    <span class="keywordflow">if</span>(test &amp; 0x2)</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;    {</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;        buf[0] = 0x0f; <span class="comment">// Fire a LED blink trigger</span></div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,0x2a,1,buf);</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;        buf[0] = 0x00; <span class="comment">// Clear forced trigger bits</span></div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,0x2a,1,buf);</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    }</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;} <span class="comment">// end _dwt_enableleds()</span></div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;<span class="comment">// -------------------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="comment">// function to enable/disable clocks to particular digital blocks/system</span></div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;</div><div class="line"><a name="l02909"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279"> 2909</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<span class="keywordtype">int</span> clocks)</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;{</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> reg[2];</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, <a class="code" href="dw1000__regs_8h.html#adef9d26cbeba56cbe43138649b5dd13f">PMSC_CTRL0_OFFSET</a>, 2, reg);</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    <span class="keywordflow">switch</span>(clocks)</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    {</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="dw1000__device_8c.html#ac221d4cf7229596db907b498bc32f3b9">ENABLE_ALL_SEQ</a>:</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        {</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;            reg[0] = 0x00 ;</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;            reg[1] = reg[1] &amp; 0xfe;</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;        }</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="dw1000__device_8c.html#a010589037eade55b18f20b926ba264a7">FORCE_SYS_XTI</a>:</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;        {</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;            <span class="comment">//system and rx</span></div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;            reg[0] = 0x01 | (reg[0] &amp; 0xfc);</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;        }</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="dw1000__device_8c.html#a97b2504be8a616c03fe6c599556fd65b">FORCE_SYS_PLL</a>:</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        {</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;            <span class="comment">//system</span></div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;            reg[0] = 0x02 | (reg[0] &amp; 0xfc);</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;        }</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="dw1000__device_8c.html#a776a03f15d8b282cf46f8fd06feb4b2f">READ_ACC_ON</a>:</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        {</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;            reg[0] = 0x48 | (reg[0] &amp; 0xb3);</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;            reg[1] = 0x80 | reg[1];</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;        }</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="dw1000__device_8c.html#a7c6e63f591e4cc18c89bc8698f4609ea">READ_ACC_OFF</a>:</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;        {</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;            reg[0] = reg[0] &amp; 0xb3;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;            reg[1] = 0x7f &amp; reg[1];</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;        }</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="dw1000__device_8c.html#ad0980165476f8cd9018b984c6a568fcf">FORCE_OTP_ON</a>:</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;        {</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;            reg[1] = 0x02 | reg[1];</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;        }</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="dw1000__device_8c.html#a357b3fe99717e5b53f9ba7bd1784e809">FORCE_OTP_OFF</a>:</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;        {</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;            reg[1] = reg[1] &amp; 0xfd;</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;        }</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="dw1000__device_8c.html#a6234c079d27cfada8bd5400f513a7d27">FORCE_TX_PLL</a>:</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;        {</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;            reg[0] = 0x20| (reg[0] &amp; 0xcf);</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        }</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;    }</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    <span class="comment">// Need to write lower byte separately before setting the higher byte(s)</span></div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, <a class="code" href="dw1000__regs_8h.html#adef9d26cbeba56cbe43138649b5dd13f">PMSC_CTRL0_OFFSET</a>, 1, &amp;reg[0]);</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, 0x1, 1, &amp;reg[1]);</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;} <span class="comment">// end _dwt_enableclocks()</span></div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;</div><div class="line"><a name="l02984"></a><span class="lineno"><a class="line" href="dw1000__device_8c.html#a76c7f5a4081051ff10a4a56543463bf9"> 2984</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a76c7f5a4081051ff10a4a56543463bf9">_dwt_disablesequencing</a>(<span class="keywordtype">void</span>) <span class="comment">//disable sequencing and go to state &quot;INIT&quot;</span></div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;{</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#a010589037eade55b18f20b926ba264a7">FORCE_SYS_XTI</a>); <span class="comment">//set system clock to XTI</span></div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, <a class="code" href="dw1000__regs_8h.html#a206f9d67a93e9b452f2a5695e46a8dc1">PMSC_CTRL1_OFFSET</a>, <a class="code" href="dw1000__regs_8h.html#ad1a4682c7378f1f98513925510e92fa8">PMSC_CTRL1_PKTSEQ_DISABLE</a>); <span class="comment">//disable PMSC ctrl of RF and RX clk blocks</span></div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;}</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a229985f938318965d4444b75bf9462e2">dwt_setdelayedtrxtime</a>(<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> starttime)</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;{</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0aa5f3c84492a8a7fda673b303285b6f">dwt_write32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aa85e1173814848419e1d71b15ba059f9">DX_TIME_ID</a>, 1, starttime) ;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;} <span class="comment">// end dwt_setdelayedtrxtime()</span></div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l03029"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a20fc28809096d225da061391dc36a36c"> 3029</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a20fc28809096d225da061391dc36a36c">dwt_starttx</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode)</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;{</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    <span class="keywordtype">int</span> retval = <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a> ;</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> temp  = 0x00;</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> checkTxOK = 0 ;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    <span class="keywordflow">if</span>(mode &amp; <a class="code" href="dw1000__device__api_8h.html#a6441643397dca72c0db3008d26136275">DWT_RESPONSE_EXPECTED</a>)</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    {</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;        temp = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)<a class="code" href="dw1000__regs_8h.html#a152469a538ed2e284828d0d35f9202b2">SYS_CTRL_WAIT4RESP</a> ; <span class="comment">//set wait4response bit</span></div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>,0,1,&amp;temp) ;</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">wait4resp</a> = 1;</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    }</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    <span class="keywordflow">if</span> (mode &amp; <a class="code" href="dw1000__device__api_8h.html#ace7617f495e1ef3b934f62a1191c45e1">DWT_START_TX_DELAYED</a>)</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    {</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;        <span class="comment">// both SYS_CTRL_TXSTRT and SYS_CTRL_TXDLYS to correctly enable TX</span></div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;        temp |= (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(<a class="code" href="dw1000__regs_8h.html#acb2f2e2169a5dc7671dda4f23988aef8">SYS_CTRL_TXDLYS</a> | <a class="code" href="dw1000__regs_8h.html#a6a499cd8d9feb8321bfaa8331d5a6835">SYS_CTRL_TXSTRT</a>) ;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>,0,1,&amp;temp) ;</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;        checkTxOK = <a class="code" href="dw1000__device_8c.html#ad05be2265afb31a2b4b39a68d55015c2">dwt_read16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>,3) ;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;        <span class="keywordflow">if</span> ((checkTxOK &amp; <a class="code" href="dw1000__regs_8h.html#a6e8706c8b1102e6a43fd0a3873b5726c">SYS_STATUS_TXERR</a>) == 0)     <span class="comment">// Transmit Delayed Send set over Half a Period away or Power Up error (there is enough time to send but not to power up individual blocks).</span></div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;        {</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;            <span class="comment">//printf(&quot;tx delayed \n&quot;);</span></div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;            retval = <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a> ;                                          <span class="comment">// All okay</span></div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;        }</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;        {</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;            <span class="comment">// I am taking DSHP set to Indicate that the TXDLYS was set too late for the specified DX_TIME.</span></div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;            <span class="comment">// Remedial Action - (a) cancel delayed send</span></div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;            temp = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)<a class="code" href="dw1000__regs_8h.html#a284b21755138af73364c30a680909d80">SYS_CTRL_TRXOFF</a>;                                  <span class="comment">// this assumes the bit is in the lowest byte</span></div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;            <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>,0,1,&amp;temp) ;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;            <span class="comment">// note event Delayed TX Time too Late</span></div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;            <span class="comment">// could fall through to start a normal send (below) just sending late.....</span></div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;            <span class="comment">// ... instead return and assume return value of 1 will be used to detect and recover from the issue.</span></div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;            <span class="comment">// clear the &quot;auto TX to sleep&quot; bit</span></div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;            <a class="code" href="dw1000__device_8c.html#afcdf3884c77becf8c5948844dc0fc464">dwt_entersleepaftertx</a>(0);</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;            dw1000local.<a class="code" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">wait4resp</a> = 0;</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;            retval = <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ;                                            <span class="comment">// Failed !</span></div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;        }</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    }</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    {</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;        temp |= (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)<a class="code" href="dw1000__regs_8h.html#a6a499cd8d9feb8321bfaa8331d5a6835">SYS_CTRL_TXSTRT</a> ;</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>,0,1,&amp;temp) ;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    }</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    <span class="keywordflow">return</span> retval;</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;} <span class="comment">// end dwt_starttx()</span></div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;<span class="comment">// -------------------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;<span class="comment">// Clear overrun condition</span></div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l03084"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a25f9a63d21930f760e8d27c044b9a6e8"> 3084</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#a25f9a63d21930f760e8d27c044b9a6e8">dwt_checkoverrun</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;{</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="dw1000__device_8c.html#ad05be2265afb31a2b4b39a68d55015c2">dwt_read16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>, 2) &amp; (SYS_STATUS_RXOVRR &gt;&gt; 16));</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;}</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;<span class="comment">// -------------------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;<span class="comment">// Force Transceiver OFF</span></div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l03094"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#ad54499732c9c424ed217c1893984e52f"> 3094</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#ad54499732c9c424ed217c1893984e52f">dwt_forcetrxoff</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;{</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a283cb6cc72fdec4547bd3ecbe884128d">decaIrqStatus_t</a> stat ;</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> temp ;</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> mask;</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    temp = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)<a class="code" href="dw1000__regs_8h.html#a284b21755138af73364c30a680909d80">SYS_CTRL_TRXOFF</a> ;                       <span class="comment">// this assumes the bit is in the lowest byte</span></div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    mask = <a class="code" href="dw1000__device__api_8h.html#a0c17221ed7c973aba944f41f2cadd621">dwt_read32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a219b5ba03d254ecf2079fb93cf0890c7">SYS_MASK_ID</a>) ;  <span class="comment">//read set interrupt mask</span></div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    <span class="comment">// need to beware of interrupts occurring in the middle of following read modify write cycle</span></div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <span class="comment">// we can disable the radio, but before the status is cleared an interrupt can be set (e.g. the</span></div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    <span class="comment">// event has just happened before the radio was disabled)</span></div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    <span class="comment">// thus we need to disable interrupt during this operation</span></div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;    stat = <a class="code" href="dw1000__mutex_8c.html#a9e9a62b0dc20ef9f2f207c2b498638d6">decamutexon</a>() ;</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a219b5ba03d254ecf2079fb93cf0890c7">SYS_MASK_ID</a>, 0) ; <span class="comment">//clear interrupt mask - so we don&#39;t get any unwanted events</span></div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>,0,1,&amp;temp) ; <span class="comment">//disable the radio</span></div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <span class="comment">// Forcing Transceiver off - so we do not want to see any new events that may have happened</span></div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>,(<a class="code" href="dw1000__regs_8h.html#ade323f926df2c969ab7a86c32611991f">CLEAR_ALLTX_EVENTS</a> | CLEAR_ALLRXERROR_EVENTS | CLEAR_ALLRXGOOD_EVENTS)) ;</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    <a class="code" href="dw1000__device_8c.html#adf96d50819a30315bf809595af4b92ce">dwt_syncrxbufptrs</a>();</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a219b5ba03d254ecf2079fb93cf0890c7">SYS_MASK_ID</a>, mask) ; <span class="comment">//set interrupt mask to what it was</span></div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <span class="comment">//enable/restore interrupts again...</span></div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    <a class="code" href="dw1000__mutex_8c.html#a8f6fe52668f9a5399c39562acf696236">decamutexoff</a>(stat) ;</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">wait4resp</a> = 0;</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;} <span class="comment">// end deviceforcetrxoff()</span></div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;</div><div class="line"><a name="l03139"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a7b4bfecae0df7073a36f07b0aa34780c"> 3139</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#adf96d50819a30315bf809595af4b92ce">dwt_syncrxbufptrs</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;{</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>  buff ;</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    <span class="comment">//need to make sure that the host/IC buffer pointers are aligned before starting RX</span></div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>, 3, 1, &amp;buff);</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;    <span class="keywordflow">if</span>((buff &amp; (<a class="code" href="dw1000__regs_8h.html#acd935ee553caaf570893a4f94375f877">SYS_STATUS_ICRBP</a>&gt;&gt;24) ) !=              <span class="comment">/* IC side Receive Buffer Pointer */</span></div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;            ((buff &amp; (<a class="code" href="dw1000__regs_8h.html#ad0ce511b6a007842cf18cd9dd6142305">SYS_STATUS_HSRBP</a>&gt;&gt;24) ) &lt;&lt; 1) )   <span class="comment">/* Host Side Receive Buffer Pointer */</span></div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    {</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> hsrb = 0x01;</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>, <a class="code" href="dw1000__regs_8h.html#aeb3669eeaadb76019385b31e1a249479">SYS_CTRL_HRBT_OFFSET</a> , 1, &amp;hsrb) ;       <span class="comment">// we need to swap rx buffer status reg (write one to toggle internally)</span></div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    }</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;}</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a2716f5b1cbe0af9f440eca2630ab3277">dwt_setrxmode</a>(<span class="keywordtype">int</span> mode, <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> rxON, <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> rxOFF)</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;{</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> reg16 =  <a class="code" href="dw1000__regs_8h.html#a617aa7ff1f93aa27bfc814d3cecaff86">RX_SNIFF_MASK</a> &amp; ((rxOFF &lt;&lt; 8) | rxON);</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    <span class="keywordflow">if</span>(mode &amp; <a class="code" href="dw1000__device__api_8h.html#a8e392295edbd6d0b72dc9687f03dc671">DWT_RX_SNIFF</a>)</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    {</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;        <span class="comment">// PPM_OFF 15:8, PPM_ON 3:0</span></div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;        <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a5422bbd6f1e33f216e8a12decb29a6c9">RX_SNIFF_ID</a>, 0x00, reg16) ; <span class="comment">//enable</span></div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;    }</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    {</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;        <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a5422bbd6f1e33f216e8a12decb29a6c9">RX_SNIFF_ID</a>, 0x00, 0x0000) ; <span class="comment">//disable</span></div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    }</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;}</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;<span class="preprocessor">#pragma GCC optimize (&quot;O3&quot;)</span></div><div class="line"><a name="l03202"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#ad35cd350116beefac0ae77f32701c075"> 3202</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device_8c.html#af39be673fdd8296aa7d96c26448adc42">dwt_rxenable</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode)</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;{</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> temp ;</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> checkRxOK = 0;</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    <a class="code" href="dw1000__device_8c.html#adf96d50819a30315bf809595af4b92ce">dwt_syncrxbufptrs</a>();</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    temp = (<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>)<a class="code" href="dw1000__regs_8h.html#a22c2a85161d7b229e98a219f110cb280">SYS_CTRL_RXENAB</a> ;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    <span class="keywordflow">if</span> (mode &amp; <a class="code" href="dw1000__device__api_8h.html#a3a0be13a3ea732ab0fdf06eaa784e57c">DWT_START_RX_DELAYED</a>)</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    {</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;        temp |= (<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>)<a class="code" href="dw1000__regs_8h.html#aee7e7dfdde39f79bd9ad7e291046ff19">SYS_CTRL_RXDLYE</a> ;</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    }</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>,0,temp) ;</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    <span class="keywordflow">if</span> (mode &amp; DWT_START_RX_DELAYED) <span class="comment">//check for errors</span></div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    {</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;        checkRxOK = <a class="code" href="dw1000__device_8c.html#ad05be2265afb31a2b4b39a68d55015c2">dwt_read16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a>,3) ;</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        <span class="keywordflow">if</span> ((checkRxOK &amp; <a class="code" href="dw1000__regs_8h.html#a6e8706c8b1102e6a43fd0a3873b5726c">SYS_STATUS_TXERR</a>) != 0) <span class="comment">//if delay has not passed do delayed else immediate RX on</span></div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;        {</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;            <a class="code" href="dw1000__device_8c.html#ad54499732c9c424ed217c1893984e52f">dwt_forcetrxoff</a>(); <span class="comment">//turn the delayed receive off, and do immediate receive, return warning indication</span></div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;            <span class="keywordflow">if</span>(mode &amp; <a class="code" href="dw1000__device__api_8h.html#aca0e1ab14add574748a34988c37be640">DWT_REENABLE_ON_DLY_ERR</a>)</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;            {</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;                <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a>,0,<a class="code" href="dw1000__regs_8h.html#a22c2a85161d7b229e98a219f110cb280">SYS_CTRL_RXENAB</a>) ;</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;            }</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a>;</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;        }</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    }</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a>;</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;} <span class="comment">// end dwt_rxenable()</span></div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#ad4f44358a39d514e1d6a83e519f7cab6">dwt_setrxtimeout</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> time)</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;{</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> temp ;</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>,3,1,&amp;temp) ;           <span class="comment">// read register</span></div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    <span class="keywordflow">if</span>(time &gt; 0)</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;    {</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;        <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a1fa3de4549ef0405c0ef6ab9f0b4f2a4">RX_FWTO_ID</a>, 0x0, time) ;</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;        temp |= (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(<a class="code" href="dw1000__regs_8h.html#a12d23c48aad2b676422d345ca0c9b439">SYS_CFG_RXWTOE</a>&gt;&gt;24);</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;        <span class="comment">// OR in 32bit value (1 bit set), I know this is in high byte.</span></div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> |= <a class="code" href="dw1000__regs_8h.html#a12d23c48aad2b676422d345ca0c9b439">SYS_CFG_RXWTOE</a>;</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>,3,1,&amp;temp) ;</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;    }</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    {</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;        temp &amp;= ~((<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(<a class="code" href="dw1000__regs_8h.html#a12d23c48aad2b676422d345ca0c9b439">SYS_CFG_RXWTOE</a>&gt;&gt;24));</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;        <span class="comment">// AND in inverted 32bit value (1 bit clear), I know this is in high byte.</span></div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;        dw1000local.<a class="code" href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">sysCFGreg</a> &amp;= ~(<a class="code" href="dw1000__regs_8h.html#a12d23c48aad2b676422d345ca0c9b439">SYS_CFG_RXWTOE</a>);</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a>,3,1,&amp;temp) ;</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;        <span class="comment">//dwt_write16bitoffsetreg(RX_FWTO_ID,0,0) ;          // clearing the time is not needed</span></div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;    }</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;} <span class="comment">// end dwt_setrxtimeout()</span></div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a73304dc6734f8875546721da605a0fd3">dwt_setpreambledetecttimeout</a>(<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> timeout)</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;{</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a8bf334a35563c11450e282f83d11fe1a">DRX_PRETOC_OFFSET</a>, timeout);</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;}</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;</div><div class="line"><a name="l03323"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#aa546722e6f81158e33ddd255c5658b4d"> 3323</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#aa546722e6f81158e33ddd255c5658b4d">dwt_setinterrupt</a>(<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> bitmask, <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> enable)</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;{</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a283cb6cc72fdec4547bd3ecbe884128d">decaIrqStatus_t</a> stat ;</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> mask ;</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    <span class="comment">// need to beware of interrupts occurring in the middle of following read modify write cycle</span></div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;    stat = <a class="code" href="dw1000__mutex_8c.html#a9e9a62b0dc20ef9f2f207c2b498638d6">decamutexon</a>() ;</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;    mask = <a class="code" href="dw1000__device__api_8h.html#a0c17221ed7c973aba944f41f2cadd621">dwt_read32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a219b5ba03d254ecf2079fb93cf0890c7">SYS_MASK_ID</a>) ;           <span class="comment">// read register</span></div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;    <span class="keywordflow">if</span>(enable)</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;    {</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;        mask |= bitmask ;</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;    }</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    {</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;        mask &amp;= ~bitmask ;  <span class="comment">// clear the bit</span></div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;    }</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a219b5ba03d254ecf2079fb93cf0890c7">SYS_MASK_ID</a>,mask) ;            <span class="comment">// new value</span></div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    <a class="code" href="dw1000__mutex_8c.html#a8f6fe52668f9a5399c39562acf696236">decamutexoff</a>(stat) ;</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;}</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#ae44706401ccd1e20173d59b1c1e4cfca">dwt_configeventcounters</a>(<span class="keywordtype">int</span> enable)</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;{</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> temp = 0x0;  <span class="comment">//disable</span></div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <span class="comment">//need to clear and disable, can&#39;t just clear</span></div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;    temp = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(<a class="code" href="dw1000__regs_8h.html#a30c37d84da279fb0eded62720670f7b1">EVC_CLR</a>); <span class="comment">//clear and disable</span></div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a346df097307fe29dd8bae37dd6568d47">DIG_DIAG_ID</a>, <a class="code" href="dw1000__regs_8h.html#a27948e560dd4a8b83ae7c0f43ed0cfd2">EVC_CTRL_OFFSET</a>, 1, &amp;temp) ;</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <span class="keywordflow">if</span>(enable)</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;    {</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;        temp = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(<a class="code" href="dw1000__regs_8h.html#a68593068b7a65b192ee6796eee753a4a">EVC_EN</a>); <span class="comment">//enable</span></div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;        <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a346df097307fe29dd8bae37dd6568d47">DIG_DIAG_ID</a>, <a class="code" href="dw1000__regs_8h.html#a27948e560dd4a8b83ae7c0f43ed0cfd2">EVC_CTRL_OFFSET</a>, 1, &amp;temp) ;</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    }</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;}</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a11f462ab243c702b3195eb09311f9c59">dwt_readeventcounters</a>(<a class="code" href="structdwt__deviceentcnts__t.html">dwt_deviceentcnts_t</a> *counters)</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;{</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> temp;</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;    temp= <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a346df097307fe29dd8bae37dd6568d47">DIG_DIAG_ID</a>, <a class="code" href="dw1000__regs_8h.html#a9258f5f4cf7a7cd9f681d462e6b60259">EVC_PHE_OFFSET</a>); <span class="comment">//read sync loss (31-16), PHE (15-0)</span></div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#ac3ab28a7302ad1634b25a9ab779fe018">PHE</a> = temp &amp; 0xFFF;</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#a66a4e5efd18aa19b814b693815a65d9a">RSL</a> = (temp &gt;&gt; 16) &amp; 0xFFF;</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;    temp = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a346df097307fe29dd8bae37dd6568d47">DIG_DIAG_ID</a>, <a class="code" href="dw1000__regs_8h.html#ae46706c2abd00be022094a51cd95e70d">EVC_FCG_OFFSET</a>); <span class="comment">//read CRC bad (31-16), CRC good (15-0)</span></div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#a7a333a061cd8f6f94235fec61ecc9cbc">CRCG</a> = temp &amp; 0xFFF;</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#a2871b6206ec781ffef84634e8def2fb7">CRCB</a> = (temp &gt;&gt; 16) &amp; 0xFFF;</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    temp = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a346df097307fe29dd8bae37dd6568d47">DIG_DIAG_ID</a>, <a class="code" href="dw1000__regs_8h.html#a1f9c257383773f483480b34467bb7c73">EVC_FFR_OFFSET</a>); <span class="comment">//overruns (31-16), address errors (15-0)</span></div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#a5a23d6b64c0e891a362aed9391ca1096">ARFE</a> = temp &amp; 0xFFF;</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#a760a82f8f7944a19af9c3c2ef5756ef8">OVER</a> = (temp &gt;&gt; 16) &amp; 0xFFF;</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;    temp = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a346df097307fe29dd8bae37dd6568d47">DIG_DIAG_ID</a>, <a class="code" href="dw1000__regs_8h.html#add3ddbf02e72afe5f25b18a31625fa34">EVC_STO_OFFSET</a>); <span class="comment">//read PTO (31-16), SFDTO (15-0)</span></div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#a2368f9f1f6f26cdac85e5b6dec40ce70">PTO</a> = (temp &gt;&gt; 16) &amp; 0xFFF;</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#ab7eab5e923344b8f7418026cb76e3953">SFDTO</a> = temp &amp; 0xFFF;</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;    temp = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a346df097307fe29dd8bae37dd6568d47">DIG_DIAG_ID</a>, <a class="code" href="dw1000__regs_8h.html#a4330130be1fda12272189e9fe44d3a46">EVC_FWTO_OFFSET</a>); <span class="comment">//read RX TO (31-16), TXFRAME (15-0)</span></div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#a613e93a937be1b33fa54b03b87b1ff5c">TXF</a> = (temp &gt;&gt; 16) &amp; 0xFFF;</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#a76be8b3aa70a183f89db653e41da349c">RTO</a> = temp &amp; 0xFFF;</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;    temp = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a346df097307fe29dd8bae37dd6568d47">DIG_DIAG_ID</a>, <a class="code" href="dw1000__regs_8h.html#a39ddeb1d3e9878d14df100c78562fea0">EVC_HPW_OFFSET</a>); <span class="comment">//read half period warning events</span></div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#a23445eef88e22f6889363f1c3daeda7a">HPW</a> = temp &amp; 0xFFF;</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;    counters-&gt;<a class="code" href="structdwt__deviceentcnts__t.html#a0c845521870247af0d31ce862bb43ec3">TXW</a> = (temp &gt;&gt; 16) &amp; 0xFFF;                       <span class="comment">//power up warning events</span></div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;}</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;</div><div class="line"><a name="l03428"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a10b3bbd229e6eb6fe4631d4610aa520b"> 3428</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a022a50ff2324931bc307843cf9892f55">dwt_rxreset</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;{</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> resetrx = 0xe0;</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    <span class="comment">//set rx reset</span></div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, 0x3, 1, &amp;resetrx);</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;    resetrx = 0xf0; <span class="comment">//clear RX reset</span></div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, 0x3, 1, &amp;resetrx);</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;}</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;</div><div class="line"><a name="l03449"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#aa7354cd8f8e6d4e3a9c66368b0f688d4"> 3449</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a7c9d32099005e42186dc78e7c7d0f4e7">dwt_softreset</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;{</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> temp[1] = {0};</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    <a class="code" href="dw1000__device_8c.html#a76c7f5a4081051ff10a4a56543463bf9">_dwt_disablesequencing</a>();</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    <span class="comment">//_dwt_enableclocks(FORCE_SYS_XTI); //set system clock to XTI</span></div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    <span class="comment">//clear any AON auto download bits (as reset will trigger AON download)</span></div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#a9c6d3e939a818b86a682f5036d28a949">AON_WCFG_OFFSET</a>, 0x0);</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;    <span class="comment">//clear the wakeup configuration</span></div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a>, <a class="code" href="dw1000__regs_8h.html#a3fc76d75d4bef1c9860a39e707ea6cff">AON_CFG0_OFFSET</a>, 1, temp);</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;    <span class="comment">//upload the new configuration</span></div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <a class="code" href="dw1000__device_8c.html#a72ae86bde280af3cd6e4e76d85839c8a">_dwt_aonarrayupload</a>();</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;    <span class="comment">//reset HIF, TX, RX and PMSC</span></div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, 0x3, 1, temp) ;</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;    temp[0] &amp;= 0x0F;</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, 0x3, 1, &amp;temp[0]) ;</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;    <span class="comment">//DW1000 needs a 10us sleep to let clk PLL lock after reset - the PLL will automatically lock after the reset</span></div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    <a class="code" href="dw1000__driver_8c.html#a26e5ffb57ec8bf2f850ced177af659d1">Sleep</a>(1);</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;    <span class="comment">//Can also poll the PLL lock flag, but then the SPI needs to be &lt; 3MHz !!</span></div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;    temp[0] |= 0xF0;</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, 0x3, 1, &amp;temp[0]) ;</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;    dw1000local.<a class="code" href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">wait4resp</a> = 0;</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;}</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;</div><div class="line"><a name="l03492"></a><span class="lineno"><a class="line" href="dw1000__device__api_8h.html#a6e7053436fe236bd9942eac0e199d030"> 3492</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device_8c.html#a6e7053436fe236bd9942eac0e199d030">dwt_xtaltrim</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> value)</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;{</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> write_buf;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#abb441eea644568b3c17e9ec8fc25a82a">FS_CTRL_ID</a>,<a class="code" href="dw1000__regs_8h.html#a8fe825c8c1e98b3cc59247afd74c3286">FS_XTALT_OFFSET</a>,1,&amp;write_buf);</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    write_buf &amp;= ~<a class="code" href="dw1000__regs_8h.html#a8da77421be588eca9972afb49d5e3892">FS_XTALT_MASK</a> ;</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    write_buf |= (<a class="code" href="dw1000__regs_8h.html#a8da77421be588eca9972afb49d5e3892">FS_XTALT_MASK</a> &amp; value) ; <span class="comment">// we should not change high bits, cause it will cause malfunction</span></div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#abb441eea644568b3c17e9ec8fc25a82a">FS_CTRL_ID</a>,<a class="code" href="dw1000__regs_8h.html#a8fe825c8c1e98b3cc59247afd74c3286">FS_XTALT_OFFSET</a>,1,&amp;write_buf);</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;}</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;<span class="preprocessor">#ifndef OT_CLI_NCP_APP</span></div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;<span class="keywordtype">int</span> <a class="code" href="dw1000__device__api_8h.html#a80bb8b104729cc2221250083438812a5">dwt_configcwmode</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> chan)</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;{</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> write_buf[1];</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;<span class="preprocessor">#ifdef DWT_API_ERROR_CHECK</span></div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;    <span class="keywordflow">if</span> ((chan &lt; 1) || (chan &gt; 7) || (6 == chan))</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;    {</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a> ; <span class="comment">// validate channel number parameter</span></div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;    }</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;    <span class="comment">//  disable TX/RX RF block sequencing (needed for cw frame mode)</span></div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;    <a class="code" href="dw1000__device_8c.html#a76c7f5a4081051ff10a4a56543463bf9">_dwt_disablesequencing</a>();</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    <span class="comment">//config RF pll (for a given channel)</span></div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;    <span class="comment">//configure PLL2/RF PLL block CFG</span></div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#abb441eea644568b3c17e9ec8fc25a82a">FS_CTRL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a10b694f9e185f8565c0a95d33c0f4c80">FS_PLLCFG_OFFSET</a>, 5, &amp;<a class="code" href="dw1000__param__types_8h.html#ac17ccbc0d2a871c6d6e7dd86f26c4974">pll2_config</a>[<a class="code" href="dw1000__param__types_8h.html#a3c97aeebfcbf626d5d01b8b521add912">chan_idx</a>[chan]][0]);</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;    <span class="comment">//configure PLL2/RF PLL block CAL</span></div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#abb441eea644568b3c17e9ec8fc25a82a">FS_CTRL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a8fe825c8c1e98b3cc59247afd74c3286">FS_XTALT_OFFSET</a>, 1, &amp;<a class="code" href="dw1000__param__types_8h.html#a818a43553162403e0beca1ecb718c9c6">pll2calcfg</a>);</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;    <span class="comment">//PLL wont be enabled until a TX/RX enable is issued later on</span></div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;    <span class="comment">// Configure RF TX blocks (for specified channel and prf)</span></div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    <span class="comment">//Config RF TX control</span></div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0aa5f3c84492a8a7fda673b303285b6f">dwt_write32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a42e4039f1140cedf72ffa58cd9bc7f7a">RF_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a5d84324a65eb6070ba8b05321b8e0b4c">RF_TXCTRL_OFFSET</a>, <a class="code" href="dw1000__param__types_8h.html#aade3df840c2c7fa5ec65499d43b742cc">tx_config</a>[<a class="code" href="dw1000__param__types_8h.html#a3c97aeebfcbf626d5d01b8b521add912">chan_idx</a>[chan]]);</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;    <span class="comment">// enable RF PLL</span></div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a42e4039f1140cedf72ffa58cd9bc7f7a">RF_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a70905716f7ceaffa505d76fcd4c14fce">RF_CONF_TXPLLPOWEN_MASK</a>);   <span class="comment">//enable LDO and RF PLL blocks</span></div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a42e4039f1140cedf72ffa58cd9bc7f7a">RF_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a71665da5b84eb915da7f52b8779640fc">RF_CONF_TXALLEN_MASK</a>);   <span class="comment">//enable the rest of TX blocks</span></div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;    <span class="comment">//  configure TX clocks</span></div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;    write_buf[0] = 0x22;</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,<a class="code" href="dw1000__regs_8h.html#adef9d26cbeba56cbe43138649b5dd13f">PMSC_CTRL0_OFFSET</a>,1,write_buf);</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;    write_buf[0] = 0x07;</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,0x1,1,write_buf);</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;    <span class="comment">//disable fine grain TX seq</span></div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>, <a class="code" href="dw1000__regs_8h.html#a34c25bbff805a217fc77605cfec5a2c0">PMSC_TXFINESEQ_OFFSET</a>, <a class="code" href="dw1000__regs_8h.html#acb2951cc267c1c69f1a53aaafd6ce572">PMSC_TXFINESEQ_DIS_MASK</a>);</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    write_buf[0] = <a class="code" href="dw1000__regs_8h.html#a518ee17d3e0b0ab17cc4d4da371f5865">TC_PGTEST_CW</a>;</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;    <span class="comment">//configure CW mode</span></div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a715cdb8ffc7e9714e7396ae950a5942a">TX_CAL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a3de09f88532f3366a9b106968315a082">TC_PGTEST_OFFSET</a>, <a class="code" href="dw1000__regs_8h.html#a7294f1e7362262860aff3188f74e0afc">TC_PGTEST_LEN</a>, write_buf);</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a> ;</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;}</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;<span class="keywordtype">void</span> <a class="code" href="dw1000__device__api_8h.html#a9401b5091d021c64738391d578e42de4">dwt_configcontinuousframemode</a>(<a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> framerepetitionrate)</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;{</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> write_buf[4];</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;    <span class="comment">//  disable TX/RX RF block sequencing (needed for continuous frame mode)</span></div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;    <a class="code" href="dw1000__device_8c.html#a76c7f5a4081051ff10a4a56543463bf9">_dwt_disablesequencing</a>();</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;    <span class="comment">// enable RF PLL and TX blocks</span></div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a42e4039f1140cedf72ffa58cd9bc7f7a">RF_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a70905716f7ceaffa505d76fcd4c14fce">RF_CONF_TXPLLPOWEN_MASK</a>);   <span class="comment">//enable LDO and RF PLL blocks</span></div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a>(<a class="code" href="dw1000__regs_8h.html#a42e4039f1140cedf72ffa58cd9bc7f7a">RF_CONF_ID</a>, <a class="code" href="dw1000__regs_8h.html#a71665da5b84eb915da7f52b8779640fc">RF_CONF_TXALLEN_MASK</a>);   <span class="comment">//enable the rest of TX blocks</span></div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;    <span class="comment">//  configure TX clocks</span></div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;    <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#a97b2504be8a616c03fe6c599556fd65b">FORCE_SYS_PLL</a>);</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;    <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#a6234c079d27cfada8bd5400f513a7d27">FORCE_TX_PLL</a>);</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;    <span class="comment">//set the frame repetition rate</span></div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;    <span class="keywordflow">if</span>(framerepetitionrate &lt; 4)</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;    {</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;        framerepetitionrate = 4;</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;    }</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;    <a class="code" href="dw1000__device_8c.html#a0aa5f3c84492a8a7fda673b303285b6f">dwt_write32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#aa85e1173814848419e1d71b15ba059f9">DX_TIME_ID</a>, 0, framerepetitionrate) ;</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;    <span class="comment">//  configure continuous frame TX</span></div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;    write_buf[0] = (<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)(<a class="code" href="dw1000__regs_8h.html#a1cd67a43bfd6a00112880c5aa96ce6ff">DIAG_TMC_TX_PSTM</a>) ;</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a346df097307fe29dd8bae37dd6568d47">DIG_DIAG_ID</a>, <a class="code" href="dw1000__regs_8h.html#aca2a54d91b9bd781fd6b093e811b996a">DIAG_TMC_OFFSET</a>, 1,write_buf); <span class="comment">//turn the tx power spectrum test mode - continuous sending of frames</span></div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;}</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;<a class="code" href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="dw1000__device__api_8h.html#a2e375cf05af5e71b545ed035c48a25e6">dwt_readtempvbat</a>(<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> fastSPI)</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;{</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> wr_buf[2];</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> vbat_raw;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> temp_raw;</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;    <span class="comment">//these writes should be single writes and in sequence</span></div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;    wr_buf[0] = 0x80; <span class="comment">// Enable TLD Bias</span></div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a42e4039f1140cedf72ffa58cd9bc7f7a">RF_CONF_ID</a>,0x11,1,wr_buf);</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;    wr_buf[0] = 0x0A; <span class="comment">// Enable TLD Bias and ADC Bias</span></div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a42e4039f1140cedf72ffa58cd9bc7f7a">RF_CONF_ID</a>,0x12,1,wr_buf);</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;    wr_buf[0] = 0x0f; <span class="comment">// Enable Outputs (only after Biases are up and running)</span></div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a42e4039f1140cedf72ffa58cd9bc7f7a">RF_CONF_ID</a>,0x12,1,wr_buf);    <span class="comment">//</span></div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <span class="comment">// Reading All SAR inputs</span></div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    wr_buf[0] = 0x00; <span class="comment">//</span></div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a715cdb8ffc7e9714e7396ae950a5942a">TX_CAL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a7c0e09f46b275ca9a194f85fbfebcffd">TC_SARL_SAR_C</a>,1,wr_buf);</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;    wr_buf[0] = 0x01; <span class="comment">// Set SAR enable</span></div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a715cdb8ffc7e9714e7396ae950a5942a">TX_CAL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a7c0e09f46b275ca9a194f85fbfebcffd">TC_SARL_SAR_C</a>,1,wr_buf);</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;    <span class="keywordflow">if</span>(fastSPI == 1)</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;    {</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;        <a class="code" href="dw1000__driver_8c.html#a26e5ffb57ec8bf2f850ced177af659d1">Sleep</a>(1); <span class="comment">//if using PLL clocks(and fast SPI rate) then this Sleep is needed</span></div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;        <span class="comment">//read voltage and temperature.</span></div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;        <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a715cdb8ffc7e9714e7396ae950a5942a">TX_CAL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a18dea698a012a5d4f9d09a8b3191fdb0">TC_SARL_SAR_LVBAT_OFFSET</a>,2,wr_buf);</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;    }</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;    <span class="keywordflow">else</span> <span class="comment">//change to a slow clock</span></div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;    {</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;        <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#a010589037eade55b18f20b926ba264a7">FORCE_SYS_XTI</a>); <span class="comment">//NOTE: set system clock to XTI - this is necessary to make sure the values read are reliable</span></div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;        <span class="comment">//read voltage and temperature.</span></div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;        <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a715cdb8ffc7e9714e7396ae950a5942a">TX_CAL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a18dea698a012a5d4f9d09a8b3191fdb0">TC_SARL_SAR_LVBAT_OFFSET</a>,2,wr_buf);</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;        <span class="comment">//default clocks (ENABLE_ALL_SEQ)</span></div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;        <a class="code" href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a>(<a class="code" href="dw1000__device_8c.html#ac221d4cf7229596db907b498bc32f3b9">ENABLE_ALL_SEQ</a>); <span class="comment">//enable clocks for sequencing</span></div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;    }</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;    vbat_raw = wr_buf[0];</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;    temp_raw = wr_buf[1];</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;    wr_buf[0] = 0x00; <span class="comment">// Clear SAR enable</span></div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;    <a class="code" href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a>(<a class="code" href="dw1000__regs_8h.html#a715cdb8ffc7e9714e7396ae950a5942a">TX_CAL_ID</a>, <a class="code" href="dw1000__regs_8h.html#a7c0e09f46b275ca9a194f85fbfebcffd">TC_SARL_SAR_C</a>,1,wr_buf);</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    <span class="keywordflow">return</span> ((temp_raw&lt;&lt;8)|(vbat_raw));</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;}</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="dw1000__device__api_8h.html#a2ff4c5394c8583d71765e7a0625c4b4d">dwt_readwakeuptemp</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;{</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> temp_raw;</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a715cdb8ffc7e9714e7396ae950a5942a">TX_CAL_ID</a>,<a class="code" href="dw1000__regs_8h.html#a434f086c9d776b33debb899a94b5eb7b">TC_SARL_SAR_LTEMP_OFFSET</a>,1,&amp;temp_raw);</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;    <span class="keywordflow">return</span> (temp_raw);</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;}</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;<a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="dw1000__device__api_8h.html#a337fa028148c01f5fab4703b5cbd424e">dwt_readwakeupvbat</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;{</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> vbat_raw;</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;    <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(<a class="code" href="dw1000__regs_8h.html#a715cdb8ffc7e9714e7396ae950a5942a">TX_CAL_ID</a>,<a class="code" href="dw1000__regs_8h.html#a18dea698a012a5d4f9d09a8b3191fdb0">TC_SARL_SAR_LVBAT_OFFSET</a>,1,&amp;vbat_raw);</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    <span class="keywordflow">return</span> (vbat_raw);</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;}</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;<span class="preprocessor">#if (REG_DUMP == 1)</span></div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;<span class="keywordtype">void</span> dwt_dumpregisters(<span class="keywordtype">char</span> *str, <span class="keywordtype">size_t</span> strSize)</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;{</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a> reg = 0;</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;    <a class="code" href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> buff[5];</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;    <span class="keywordtype">int</span> cnt ;</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;    <span class="comment">//first print all single registers</span></div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;0x3F; i++)</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;    {</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;        <a class="code" href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a>(i, 0, 5, buff) ;</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X]=%02X%02X%02X%02X%02X&quot;</span>,i,buff[4], buff[3], buff[2], buff[1], buff[0] ) ;</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;    }</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    <span class="comment">//reg 0x20</span></div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;=32; i+=4)</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    {</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;        reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(0x20,i) ;</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X:%02X]=%08X&quot;</span>,0x20,i,reg) ;</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;    }</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    <span class="comment">//reg 0x21</span></div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;=44; i+=4)</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;    {</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;        reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(0x21,i) ;</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X:%02X]=%08X&quot;</span>,0x21,i,reg) ;</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;    }</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;    <span class="comment">//reg 0x23</span></div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;=0x20; i+=4)</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;    {</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;        reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(0x23,i) ;</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X:%02X]=%08X&quot;</span>,0x23,i,reg) ;</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    }</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;    <span class="comment">//reg 0x24</span></div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;=12; i+=4)</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    {</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;        reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(0x24,i) ;</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X:%02X]=%08X&quot;</span>,0x24,i,reg) ;</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;    }</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;    <span class="comment">//reg 0x27</span></div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;=44; i+=4)</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    {</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;        reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(0x27,i) ;</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X:%02X]=%08X&quot;</span>,0x27,i,reg) ;</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;    }</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;    <span class="comment">//reg 0x28</span></div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;=64; i+=4)</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;    {</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;        reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(0x28,i) ;</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X:%02X]=%08X&quot;</span>,0x28,i,reg) ;</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;    }</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    <span class="comment">//reg 0x2A</span></div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;20; i+=4)</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    {</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;        reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(0x2A,i) ;</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X:%02X]=%08X&quot;</span>,0x2A,i,reg) ;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;    }</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;    <span class="comment">//reg 0x2B</span></div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;24; i+=4)</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;    {</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;        reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(0x2B,i) ;</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X:%02X]=%08X&quot;</span>,0x2B,i,reg) ;</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;    }</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;    <span class="comment">//reg 0x2f</span></div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;40; i+=4)</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;    {</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;        reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(0x2f,i) ;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X:%02X]=%08X&quot;</span>,0x2f,i,reg) ;</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;    }</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    <span class="comment">//reg 0x31</span></div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;84; i+=4)</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;    {</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;        reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(0x31,i) ;</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X:%02X]=%08X&quot;</span>,0x31,i,reg) ;</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;    }</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;    <span class="comment">//reg 0x36 = PMSC_ID</span></div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;=48; i+=4)</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    {</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;        reg = <a class="code" href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a>(<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,i) ;</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;reg[%02X:%02X]=%08X&quot;</span>,<a class="code" href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a>,i,reg) ;</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;        str += cnt = sprintf_s(str,strSize,<span class="stringliteral">&quot;\n&quot;</span>) ;</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;        strSize -= cnt ;</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;    }</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;}</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;<span class="comment">/* ===============================================================================================</span></div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;<span class="comment">   List of expected (known) device ID handled by this software</span></div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;<span class="comment">   ===============================================================================================</span></div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;<span class="comment">    0xDECA0130                               // DW1000 - MP</span></div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;<span class="comment">   ===============================================================================================</span></div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;</div><div class="ttc" id="dw1000__regs_8h_html_a22c2a85161d7b229e98a219f110cb280"><div class="ttname"><a href="dw1000__regs_8h.html#a22c2a85161d7b229e98a219f110cb280">SYS_CTRL_RXENAB</a></div><div class="ttdeci">#define SYS_CTRL_RXENAB</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00189">dw1000_regs.h:189</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a0bedda2ad24ec0ccc6e8fab8eb44afc2"><div class="ttname"><a href="dw1000__device_8c.html#a0bedda2ad24ec0ccc6e8fab8eb44afc2">TREK_ANTDLY_2</a></div><div class="ttdeci">#define TREK_ANTDLY_2</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00139">dw1000_device.c:139</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a6886d434f1da81ef4e5b0830ead5fe49"><div class="ttname"><a href="dw1000__regs_8h.html#a6886d434f1da81ef4e5b0830ead5fe49">AON_ADDR_OFFSET</a></div><div class="ttdeci">#define AON_ADDR_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01006">dw1000_regs.h:1006</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a3cb6a9407c6cc79639bade535de9021b"><div class="ttname"><a href="dw1000__regs_8h.html#a3cb6a9407c6cc79639bade535de9021b">SYS_TIME_LEN</a></div><div class="ttdeci">#define SYS_TIME_LEN</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00097">dw1000_regs.h:97</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a617aa7ff1f93aa27bfc814d3cecaff86"><div class="ttname"><a href="dw1000__regs_8h.html#a617aa7ff1f93aa27bfc814d3cecaff86">RX_SNIFF_MASK</a></div><div class="ttdeci">#define RX_SNIFF_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00482">dw1000_regs.h:482</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a22f83b5f7fded176be4b0526af93ff48"><div class="ttname"><a href="dw1000__device_8c.html#a22f83b5f7fded176be4b0526af93ff48">dwt_setaddress16</a></div><div class="ttdeci">void dwt_setaddress16(uint16 shortAddress)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01577">dw1000_device.c:1577</a></div></div>
<div class="ttc" id="dw1000__types_8h_html"><div class="ttname"><a href="dw1000__types_8h.html">dw1000_types.h</a></div><div class="ttdoc">DecaWave general type definitions. </div></div>
<div class="ttc" id="dw1000__device__api_8h_html_aa3b74f17d80ba07462a4b59b240937e9"><div class="ttname"><a href="dw1000__device__api_8h.html#aa3b74f17d80ba07462a4b59b240937e9">DWT_SIG_RX_OKAY</a></div><div class="ttdeci">#define DWT_SIG_RX_OKAY</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00108">dw1000_device_api.h:108</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a5790ce215214df12ead3d688d8ba4e7a"><div class="ttname"><a href="dw1000__device__api_8h.html#a5790ce215214df12ead3d688d8ba4e7a">DWT_SUCCESS</a></div><div class="ttdeci">#define DWT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00069">dw1000_device_api.h:69</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a0a8aef2235301662aa0be5824dc1f8c1"><div class="ttname"><a href="structdwt__local__data__t.html#a0a8aef2235301662aa0be5824dc1f8c1">dwt_local_data_t::dblbuffon</a></div><div class="ttdeci">uint8 dblbuffon</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00083">dw1000_device.c:83</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ae567607e4b4a148742df9a75d280feeb"><div class="ttname"><a href="dw1000__device__api_8h.html#ae567607e4b4a148742df9a75d280feeb">dwt_otpwriteandverify</a></div><div class="ttdeci">uint32 dwt_otpwriteandverify(uint32 value, uint16 address)</div></div>
<div class="ttc" id="dw1000__device_8c_html_a97b2504be8a616c03fe6c599556fd65b"><div class="ttname"><a href="dw1000__device_8c.html#a97b2504be8a616c03fe6c599556fd65b">FORCE_SYS_PLL</a></div><div class="ttdeci">#define FORCE_SYS_PLL</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00034">dw1000_device.c:34</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a51c56b6d87f24649ecb30691ca3c0d81"><div class="ttname"><a href="dw1000__regs_8h.html#a51c56b6d87f24649ecb30691ca3c0d81">SYS_CFG_RXM110K</a></div><div class="ttdeci">#define SYS_CFG_RXM110K</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00085">dw1000_regs.h:85</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a44aeaad5262b436720af7de5a205b7de"><div class="ttname"><a href="dw1000__device__api_8h.html#a44aeaad5262b436720af7de5a205b7de">dwt_readrxtimestamp</a></div><div class="ttdeci">void dwt_readrxtimestamp(uint8 *timestamp)</div></div>
<div class="ttc" id="dw1000__param__types_8h_html_a818a43553162403e0beca1ecb718c9c6"><div class="ttname"><a href="dw1000__param__types_8h.html#a818a43553162403e0beca1ecb718c9c6">pll2calcfg</a></div><div class="ttdeci">const uint8 pll2calcfg</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__params__init_8c_source.html#l00054">dw1000_params_init.c:54</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ad0ce511b6a007842cf18cd9dd6142305"><div class="ttname"><a href="dw1000__regs_8h.html#ad0ce511b6a007842cf18cd9dd6142305">SYS_STATUS_HSRBP</a></div><div class="ttdeci">#define SYS_STATUS_HSRBP</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00278">dw1000_regs.h:278</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a34c25bbff805a217fc77605cfec5a2c0"><div class="ttname"><a href="dw1000__regs_8h.html#a34c25bbff805a217fc77605cfec5a2c0">PMSC_TXFINESEQ_OFFSET</a></div><div class="ttdeci">#define PMSC_TXFINESEQ_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01239">dw1000_regs.h:1239</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a3920f95006a8f4c2c1237dbae35b561e"><div class="ttname"><a href="dw1000__regs_8h.html#a3920f95006a8f4c2c1237dbae35b561e">LDE_REPC_OFFSET</a></div><div class="ttdeci">#define LDE_REPC_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01101">dw1000_regs.h:1101</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_adef9d26cbeba56cbe43138649b5dd13f"><div class="ttname"><a href="dw1000__regs_8h.html#adef9d26cbeba56cbe43138649b5dd13f">PMSC_CTRL0_OFFSET</a></div><div class="ttdeci">#define PMSC_CTRL0_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01200">dw1000_regs.h:1200</a></div></div>
<div class="ttc" id="structdwt__txconfig__t_html_ab8321d1772842dc5945a0e3d1ea41934"><div class="ttname"><a href="structdwt__txconfig__t.html#ab8321d1772842dc5945a0e3d1ea41934">dwt_txconfig_t::power</a></div><div class="ttdeci">uint32 power</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00248">dw1000_device_api.h:248</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_aece338b02ebc20833689583f3b2c53de"><div class="ttname"><a href="structdwt__local__data__t.html#aece338b02ebc20833689583f3b2c53de">dwt_local_data_t::antennaDly</a></div><div class="ttdeci">uint32 antennaDly</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00080">dw1000_device.c:80</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_ab1de9172ec5eaf366449c6e38ee311e9"><div class="ttname"><a href="structdwt__local__data__t.html#ab1de9172ec5eaf366449c6e38ee311e9">dwt_local_data_t::sysCFGreg</a></div><div class="ttdeci">uint32 sysCFGreg</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00084">dw1000_device.c:84</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a031e6bc47527a11af30c4e66b0dd81ca"><div class="ttname"><a href="dw1000__device_8c.html#a031e6bc47527a11af30c4e66b0dd81ca">_dwt_configlde</a></div><div class="ttdeci">void _dwt_configlde(int prf)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l02226">dw1000_device.c:2226</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a262206be802e66852d5b5453bf79c934"><div class="ttname"><a href="dw1000__regs_8h.html#a262206be802e66852d5b5453bf79c934">DRX_TUNE0b_OFFSET</a></div><div class="ttdeci">#define DRX_TUNE0b_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00828">dw1000_regs.h:828</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a25f9a63d21930f760e8d27c044b9a6e8"><div class="ttname"><a href="dw1000__device_8c.html#a25f9a63d21930f760e8d27c044b9a6e8">dwt_checkoverrun</a></div><div class="ttdeci">int dwt_checkoverrun(void)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l03084">dw1000_device.c:3084</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a4db0c211744c357c1d0301c605dad3d1"><div class="ttname"><a href="dw1000__regs_8h.html#a4db0c211744c357c1d0301c605dad3d1">PMSC_LEDC_OFFSET</a></div><div class="ttdeci">#define PMSC_LEDC_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01243">dw1000_regs.h:1243</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a48783d98de5d8199af4d4ffec72e2adc"><div class="ttname"><a href="dw1000__device__api_8h.html#a48783d98de5d8199af4d4ffec72e2adc">DWT_SFDTOC_DEF</a></div><div class="ttdeci">#define DWT_SFDTOC_DEF</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00123">dw1000_device_api.h:123</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a5be2c3541b6b5f684a1fa7bd48e2baac"><div class="ttname"><a href="dw1000__device__api_8h.html#a5be2c3541b6b5f684a1fa7bd48e2baac">dwt_configuresleep</a></div><div class="ttdeci">void dwt_configuresleep(uint16 mode, uint8 wake)</div></div>
<div class="ttc" id="structdwt__callback__data__t_html_a7549813331cfdf08243e7a3420380967"><div class="ttname"><a href="structdwt__callback__data__t.html#a7549813331cfdf08243e7a3420380967">dwt_callback_data_t::aatset</a></div><div class="ttdeci">uint8 aatset</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00191">dw1000_device_api.h:191</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ae565af3d75091a4594000082f94972d8"><div class="ttname"><a href="dw1000__regs_8h.html#ae565af3d75091a4594000082f94972d8">USR_SFD_ID</a></div><div class="ttdeci">#define USR_SFD_ID</div><div class="ttdoc">Bit definitions for register USR_SFD Please read User Manual : User defined SFD sequence. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00557">dw1000_regs.h:557</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a71665da5b84eb915da7f52b8779640fc"><div class="ttname"><a href="dw1000__regs_8h.html#a71665da5b84eb915da7f52b8779640fc">RF_CONF_TXALLEN_MASK</a></div><div class="ttdeci">#define RF_CONF_TXALLEN_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00880">dw1000_regs.h:880</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_adc969fa8d69383f4ec5f8da40dbda3c2"><div class="ttname"><a href="dw1000__device_8c.html#adc969fa8d69383f4ec5f8da40dbda3c2">dwt_geteui</a></div><div class="ttdeci">void dwt_geteui(uint8 *eui64)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01613">dw1000_device.c:1613</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aa24dfe3eb871169f8d819b42f24fd5ec"><div class="ttname"><a href="dw1000__regs_8h.html#aa24dfe3eb871169f8d819b42f24fd5ec">AON_CFG1_OFFSET</a></div><div class="ttdeci">#define AON_CFG1_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01022">dw1000_regs.h:1022</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a952d14c5e7cd51dfb9541b5672f7bf86"><div class="ttname"><a href="dw1000__device__api_8h.html#a952d14c5e7cd51dfb9541b5672f7bf86">dwt_readrxtimestamplo32</a></div><div class="ttdeci">uint32 dwt_readrxtimestamplo32(void)</div></div>
<div class="ttc" id="dw1000__regs_8h_html_a8cf4e6745aff6f5fd90c0a3ac3faf861"><div class="ttname"><a href="dw1000__regs_8h.html#a8cf4e6745aff6f5fd90c0a3ac3faf861">SYS_STATUS_RXSFDD</a></div><div class="ttdeci">#define SYS_STATUS_RXSFDD</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00255">dw1000_regs.h:255</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_adf1cef9c9cca3369173caa63946858cb"><div class="ttname"><a href="dw1000__device_8c.html#adf1cef9c9cca3369173caa63946858cb">dwt_setpanid</a></div><div class="ttdeci">void dwt_setpanid(uint16 panID)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01558">dw1000_device.c:1558</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a5d84324a65eb6070ba8b05321b8e0b4c"><div class="ttname"><a href="dw1000__regs_8h.html#a5d84324a65eb6070ba8b05321b8e0b4c">RF_TXCTRL_OFFSET</a></div><div class="ttdeci">#define RF_TXCTRL_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00884">dw1000_regs.h:884</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a18dea698a012a5d4f9d09a8b3191fdb0"><div class="ttname"><a href="dw1000__regs_8h.html#a18dea698a012a5d4f9d09a8b3191fdb0">TC_SARL_SAR_LVBAT_OFFSET</a></div><div class="ttdeci">#define TC_SARL_SAR_LVBAT_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00917">dw1000_regs.h:917</a></div></div>
<div class="ttc" id="dw1000__param__types_8h_html_ac17ccbc0d2a871c6d6e7dd86f26c4974"><div class="ttname"><a href="dw1000__param__types_8h.html#ac17ccbc0d2a871c6d6e7dd86f26c4974">pll2_config</a></div><div class="ttdeci">const uint8 pll2_config[NUM_CH][5]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__params__init_8c_source.html#l00039">dw1000_params_init.c:39</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a53686602fb8ef92c9278f1e07ba49011"><div class="ttname"><a href="dw1000__device__api_8h.html#a53686602fb8ef92c9278f1e07ba49011">dwt_readtxtimestamp</a></div><div class="ttdeci">void dwt_readtxtimestamp(uint8 *timestamp)</div></div>
<div class="ttc" id="dw1000__param__types_8h_html_adcce3ac88c7cc58e4a05daec98f5dd5b"><div class="ttname"><a href="dw1000__param__types_8h.html#adcce3ac88c7cc58e4a05daec98f5dd5b">digital_bb_config</a></div><div class="ttdeci">const uint32 digital_bb_config[NUM_PRF][NUM_PACS]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__params__init_8c_source.html#l00101">dw1000_params_init.c:101</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_acd0df5b9fd62d1822c540456ccc34b20"><div class="ttname"><a href="structdwt__local__data__t.html#acd0df5b9fd62d1822c540456ccc34b20">dwt_local_data_t::xtrim</a></div><div class="ttdeci">uint8 xtrim</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00082">dw1000_device.c:82</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_abade61f66f8f908c99196d93e9f9e93a"><div class="ttname"><a href="dw1000__device_8c.html#abade61f66f8f908c99196d93e9f9e93a">LOTID_ADDRESS</a></div><div class="ttdeci">#define LOTID_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00131">dw1000_device.c:131</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a2503135d28aad5e11612957e95d48bfb"><div class="ttname"><a href="structdwt__local__data__t.html#a2503135d28aad5e11612957e95d48bfb">dwt_local_data_t::txFCTRL</a></div><div class="ttdeci">uint32 txFCTRL</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00077">dw1000_device.c:77</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_afc2bced2e42d756919f0d9587a7a8413"><div class="ttname"><a href="dw1000__regs_8h.html#afc2bced2e42d756919f0d9587a7a8413">RX_TIME_ID</a></div><div class="ttdeci">#define RX_TIME_ID</div><div class="ttdoc">Bit definitions for register RX_TIME. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00406">dw1000_regs.h:406</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a4d8cecc5c652174a0e72e1887a40718a"><div class="ttname"><a href="dw1000__regs_8h.html#a4d8cecc5c652174a0e72e1887a40718a">CHAN_CTRL_RXFPRF_SHIFT</a></div><div class="ttdeci">#define CHAN_CTRL_RXFPRF_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00528">dw1000_regs.h:528</a></div></div>
<div class="ttc" id="structdwt__callback__data__t_html_aa7ef7eaa40ab056ef1f9f7382e93ca50"><div class="ttname"><a href="structdwt__callback__data__t.html#aa7ef7eaa40ab056ef1f9f7382e93ca50">dwt_callback_data_t::datalength</a></div><div class="ttdeci">uint16 datalength</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00192">dw1000_device_api.h:192</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a94fb80ed30a7909f5692b1811619e8f2"><div class="ttname"><a href="dw1000__device__api_8h.html#a94fb80ed30a7909f5692b1811619e8f2">dwt_setGPIOvalue</a></div><div class="ttdeci">void dwt_setGPIOvalue(uint32 gpioNum, uint32 value)</div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_a2871b6206ec781ffef84634e8def2fb7"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#a2871b6206ec781ffef84634e8def2fb7">dwt_deviceentcnts_t::CRCB</a></div><div class="ttdeci">uint16 CRCB</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00275">dw1000_device_api.h:275</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_abb441eea644568b3c17e9ec8fc25a82a"><div class="ttname"><a href="dw1000__regs_8h.html#abb441eea644568b3c17e9ec8fc25a82a">FS_CTRL_ID</a></div><div class="ttdeci">#define FS_CTRL_ID</div><div class="ttdoc">Bit definitions for register Refer to section 7.2.44 Register file: 0x2B  Frequency synthesiser cont...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00943">dw1000_regs.h:943</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a022a50ff2324931bc307843cf9892f55"><div class="ttname"><a href="dw1000__device_8c.html#a022a50ff2324931bc307843cf9892f55">dwt_rxreset</a></div><div class="ttdeci">void dwt_rxreset(void)</div><div class="ttdoc">this function resets the receiver of the DW1000 </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l03428">dw1000_device.c:3428</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ae9f0e5dfa940b236fd41d1bea2ae1522"><div class="ttname"><a href="dw1000__regs_8h.html#ae9f0e5dfa940b236fd41d1bea2ae1522">SYS_STATUS_RXRFTO</a></div><div class="ttdeci">#define SYS_STATUS_RXRFTO</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00264">dw1000_regs.h:264</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_af39be673fdd8296aa7d96c26448adc42"><div class="ttname"><a href="dw1000__device_8c.html#af39be673fdd8296aa7d96c26448adc42">dwt_rxenable</a></div><div class="ttdeci">int dwt_rxenable(uint8 mode)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l03202">dw1000_device.c:3202</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aaa2d1a1171af97ea7c1e995fdecd7ede"><div class="ttname"><a href="dw1000__regs_8h.html#aaa2d1a1171af97ea7c1e995fdecd7ede">CLEAR_DBLBUFF_EVENTS</a></div><div class="ttdeci">#define CLEAR_DBLBUFF_EVENTS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00289">dw1000_regs.h:289</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a5ed10dba0fe0ebb8703956fcc6918a1b"><div class="ttname"><a href="dw1000__device__api_8h.html#a5ed10dba0fe0ebb8703956fcc6918a1b">DWT_SIG_RX_PHR_ERROR</a></div><div class="ttdeci">#define DWT_SIG_RX_PHR_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00113">dw1000_device_api.h:113</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a2afc5244fc9f25f9d06acffb1ab8fa72"><div class="ttname"><a href="dw1000__regs_8h.html#a2afc5244fc9f25f9d06acffb1ab8fa72">DRX_SFDTOC_OFFSET</a></div><div class="ttdeci">#define DRX_SFDTOC_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00851">dw1000_regs.h:851</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_aca0e1ab14add574748a34988c37be640"><div class="ttname"><a href="dw1000__device__api_8h.html#aca0e1ab14add574748a34988c37be640">DWT_REENABLE_ON_DLY_ERR</a></div><div class="ttdeci">#define DWT_REENABLE_ON_DLY_ERR</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00135">dw1000_device_api.h:135</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a7c9d32099005e42186dc78e7c7d0f4e7"><div class="ttname"><a href="dw1000__device_8c.html#a7c9d32099005e42186dc78e7c7d0f4e7">dwt_softreset</a></div><div class="ttdeci">void dwt_softreset(void)</div><div class="ttdoc">this function resets the DW1000 </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l03449">dw1000_device.c:3449</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a283097b50faac5b1aa03214048931079"><div class="ttname"><a href="dw1000__regs_8h.html#a283097b50faac5b1aa03214048931079">OTP_CTRL</a></div><div class="ttdeci">#define OTP_CTRL</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01043">dw1000_regs.h:1043</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aa1b9caf35632d030926d6650d0dc94ce"><div class="ttname"><a href="dw1000__regs_8h.html#aa1b9caf35632d030926d6650d0dc94ce">SYS_CFG_RXAUTR</a></div><div class="ttdeci">#define SYS_CFG_RXAUTR</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00088">dw1000_regs.h:88</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a1458e40ac61a4ec009a7baf59995c720"><div class="ttname"><a href="dw1000__device__api_8h.html#a1458e40ac61a4ec009a7baf59995c720">dwt_readaccdata</a></div><div class="ttdeci">void dwt_readaccdata(uint8 *buffer, uint16 length, uint16 rxBufferOffset)</div></div>
<div class="ttc" id="dw1000__regs_8h_html_a3ef15aab95f803dbb0b90fed17f9d274"><div class="ttname"><a href="dw1000__regs_8h.html#a3ef15aab95f803dbb0b90fed17f9d274">SYS_CFG_PHR_MODE_11</a></div><div class="ttdeci">#define SYS_CFG_PHR_MODE_11</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00083">dw1000_regs.h:83</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a52acd338ad5b409cf37eb741ff48c012"><div class="ttname"><a href="dw1000__regs_8h.html#a52acd338ad5b409cf37eb741ff48c012">SYS_STATUS_TXFRS</a></div><div class="ttdeci">#define SYS_STATUS_TXFRS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00252">dw1000_regs.h:252</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a59ba31fb3ed5b4d4d48794c9cc8fa79c"><div class="ttname"><a href="dw1000__device_8c.html#a59ba31fb3ed5b4d4d48794c9cc8fa79c">dwt_getTREKOTPantennadelay</a></div><div class="ttdeci">uint16 dwt_getTREKOTPantennadelay(uint8 anchor, uint8 chan, uint8 datarate)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00295">dw1000_device.c:295</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a55117f226695e42d20c096a116cf2a9d"><div class="ttname"><a href="dw1000__device_8c.html#a55117f226695e42d20c096a116cf2a9d">TREK_ANTDLY_4</a></div><div class="ttdeci">#define TREK_ANTDLY_4</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00141">dw1000_device.c:141</a></div></div>
<div class="ttc" id="structdwt__callback__data__t_html_a639cd6162aa723653ed7c30a9dc0076c"><div class="ttname"><a href="structdwt__callback__data__t.html#a639cd6162aa723653ed7c30a9dc0076c">dwt_callback_data_t::fctrl</a></div><div class="ttdeci">uint8 fctrl[2]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00193">dw1000_device_api.h:193</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ad9c90f4d0f0ebfcea5db53ee1938083f"><div class="ttname"><a href="dw1000__device__api_8h.html#ad9c90f4d0f0ebfcea5db53ee1938083f">DWT_LOADANTDLY</a></div><div class="ttdeci">#define DWT_LOADANTDLY</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00178">dw1000_device_api.h:178</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a21ee0d9284ea5bdc3545895e1d75d174"><div class="ttname"><a href="dw1000__device_8c.html#a21ee0d9284ea5bdc3545895e1d75d174">dwt_getldotune</a></div><div class="ttdeci">uint32 dwt_getldotune(void)</div><div class="ttdoc">This is used to return the low 32 bits of the programmed LDO tune value of the device. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00426">dw1000_device.c:426</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ab3bcf8b482c31bfe55165e206b3c195b"><div class="ttname"><a href="dw1000__regs_8h.html#ab3bcf8b482c31bfe55165e206b3c195b">OTP_STAT</a></div><div class="ttdeci">#define OTP_STAT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01051">dw1000_regs.h:1051</a></div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_a760a82f8f7944a19af9c3c2ef5756ef8"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#a760a82f8f7944a19af9c3c2ef5756ef8">dwt_deviceentcnts_t::OVER</a></div><div class="ttdeci">uint16 OVER</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00277">dw1000_device_api.h:277</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_aa42964dcdbe89c97fa5a4c6f455b9bb4"><div class="ttname"><a href="dw1000__device__api_8h.html#aa42964dcdbe89c97fa5a4c6f455b9bb4">dwt_isr</a></div><div class="ttdeci">void dwt_isr(void)</div></div>
<div class="ttc" id="dw1000__regs_8h_html_a580c67ce447ed4030c723641cbf96906"><div class="ttname"><a href="dw1000__regs_8h.html#a580c67ce447ed4030c723641cbf96906">DRX_TUNE1a_OFFSET</a></div><div class="ttdeci">#define DRX_TUNE1a_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00833">dw1000_regs.h:833</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_abd513723e610f0420d17bea6f7969a61"><div class="ttname"><a href="dw1000__regs_8h.html#abd513723e610f0420d17bea6f7969a61">SYS_STATUS_RXOVRR</a></div><div class="ttdeci">#define SYS_STATUS_RXOVRR</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00267">dw1000_regs.h:267</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a2ec91cebd57dc989b7c4efee240c9f0b"><div class="ttname"><a href="dw1000__device__api_8h.html#a2ec91cebd57dc989b7c4efee240c9f0b">dwt_getpartid</a></div><div class="ttdeci">uint32 dwt_getpartid(void)</div></div>
<div class="ttc" id="dw1000__regs_8h_html_aacd4a9ec5fb9e7c694f668a31d254763"><div class="ttname"><a href="dw1000__regs_8h.html#aacd4a9ec5fb9e7c694f668a31d254763">OTP_SF_LDO_KICK</a></div><div class="ttdeci">#define OTP_SF_LDO_KICK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01067">dw1000_regs.h:1067</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aa1438373974087885c44cf9c6a100ca8"><div class="ttname"><a href="dw1000__regs_8h.html#aa1438373974087885c44cf9c6a100ca8">RX_FQUAL_ID</a></div><div class="ttdeci">#define RX_FQUAL_ID</div><div class="ttdoc">Bit definitions for register RX_FQUAL. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00351">dw1000_regs.h:351</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a0aa5f3c84492a8a7fda673b303285b6f"><div class="ttname"><a href="dw1000__device_8c.html#a0aa5f3c84492a8a7fda673b303285b6f">dwt_write32bitoffsetreg</a></div><div class="ttdeci">int dwt_write32bitoffsetreg(int regFileID, int regOffset, uint32 regval)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01488">dw1000_device.c:1488</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ab8024530a2b17ba0f3ca864c10b922b0"><div class="ttname"><a href="dw1000__device__api_8h.html#ab8024530a2b17ba0f3ca864c10b922b0">readfromspi</a></div><div class="ttdeci">int readfromspi(uint16 headerLength, const uint8 *headerBuffer, uint32 readlength, uint8 *readBuffer)</div></div>
<div class="ttc" id="structagc__cfg__struct_html_a299464b1f7aa207542fc034f3bb534c1"><div class="ttname"><a href="structagc__cfg__struct.html#a299464b1f7aa207542fc034f3bb534c1">agc_cfg_struct::target</a></div><div class="ttdeci">uint16 target[NUM_PRF]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__param__types_8h_source.html#l00032">dw1000_param_types.h:32</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a87448e3ba3e8ed00210836e730fc3018"><div class="ttname"><a href="dw1000__regs_8h.html#a87448e3ba3e8ed00210836e730fc3018">SYS_STATUS_RXFCG</a></div><div class="ttdeci">#define SYS_STATUS_RXFCG</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00260">dw1000_regs.h:260</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a07a99b44438cce30af436a30a285b649"><div class="ttname"><a href="dw1000__device_8c.html#a07a99b44438cce30af436a30a285b649">dwt_initialise</a></div><div class="ttdeci">int dwt_initialise(uint16 config)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00143">dw1000_device.c:143</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a4912c3541d548a8685c37ca69cd12dad"><div class="ttname"><a href="dw1000__device__api_8h.html#a4912c3541d548a8685c37ca69cd12dad">DWT_PLEN_1024</a></div><div class="ttdeci">#define DWT_PLEN_1024</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00099">dw1000_device_api.h:99</a></div></div>
<div class="ttc" id="namespacegencsv_html_a937d4dd628a8858b443a399410d2600b"><div class="ttname"><a href="namespacegencsv.html#a937d4dd628a8858b443a399410d2600b">gencsv.result</a></div><div class="ttdeci">result</div><div class="ttdef"><b>Definition:</b> <a href="gencsv_8py_source.html#l00017">gencsv.py:17</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a7ffeee6d9c8e85864bbe38055aeb2426"><div class="ttname"><a href="dw1000__regs_8h.html#a7ffeee6d9c8e85864bbe38055aeb2426">AON_ID</a></div><div class="ttdeci">#define AON_ID</div><div class="ttdoc">Bit definitions for register. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00980">dw1000_regs.h:980</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a05f6b0ae8f6a6e135b0e290c25fe0e4e"><div class="ttname"><a href="dw1000__device__api_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a></div><div class="ttdeci">unsigned short uint16</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00032">dw1000_device_api.h:32</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a35c04105b687e8ef607dd0104240c07a"><div class="ttname"><a href="dw1000__regs_8h.html#a35c04105b687e8ef607dd0104240c07a">TX_TIME_TX_STAMP_LEN</a></div><div class="ttdeci">#define TX_TIME_TX_STAMP_LEN</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00428">dw1000_regs.h:428</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a0136130544685a71448ff9fa32abdbb4"><div class="ttname"><a href="dw1000__device__api_8h.html#a0136130544685a71448ff9fa32abdbb4">DWT_PRF_16M</a></div><div class="ttdeci">#define DWT_PRF_16M</div><div class="ttdoc">UWB PRF 16 MHz. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00084">dw1000_device_api.h:84</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a417371cd802327a2535444dbbf3588b3"><div class="ttname"><a href="dw1000__device_8c.html#a417371cd802327a2535444dbbf3588b3">dwt_entersleep</a></div><div class="ttdeci">void dwt_entersleep(void)</div><div class="ttdoc">This function puts the device into deep sleep or sleep. dwt_configuredeepsleep should be called first...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01963">dw1000_device.c:1963</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aa85e1173814848419e1d71b15ba059f9"><div class="ttname"><a href="dw1000__regs_8h.html#aa85e1173814848419e1d71b15ba059f9">DX_TIME_ID</a></div><div class="ttdeci">#define DX_TIME_ID</div><div class="ttdoc">Bit definitions for register DX_TIME. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00158">dw1000_regs.h:158</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a6a499cd8d9feb8321bfaa8331d5a6835"><div class="ttname"><a href="dw1000__regs_8h.html#a6a499cd8d9feb8321bfaa8331d5a6835">SYS_CTRL_TXSTRT</a></div><div class="ttdeci">#define SYS_CTRL_TXSTRT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00183">dw1000_regs.h:183</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a08683df73319873d0600d45756cea8e2"><div class="ttname"><a href="dw1000__regs_8h.html#a08683df73319873d0600d45756cea8e2">SYS_CFG_MASK</a></div><div class="ttdeci">#define SYS_CFG_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00061">dw1000_regs.h:61</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a54d600670c664ac756593b1acb381bc6"><div class="ttname"><a href="dw1000__device__api_8h.html#a54d600670c664ac756593b1acb381bc6">dwt_readtxtimestamplo32</a></div><div class="ttdeci">uint32 dwt_readtxtimestamplo32(void)</div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html"><div class="ttname"><a href="structdwt__deviceentcnts__t.html">dwt_deviceentcnts_t</a></div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00269">dw1000_device_api.h:269</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a189a313d868445c20b87ab4b87a2458b"><div class="ttname"><a href="dw1000__device__api_8h.html#a189a313d868445c20b87ab4b87a2458b">DWT_PRF_64M</a></div><div class="ttdeci">#define DWT_PRF_64M</div><div class="ttdoc">UWB PRF 64 MHz. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00085">dw1000_device_api.h:85</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a37898d07a755384e63f6b56b40705f5f"><div class="ttname"><a href="dw1000__device_8c.html#a37898d07a755384e63f6b56b40705f5f">_dwt_otpread</a></div><div class="ttdeci">uint32 _dwt_otpread(uint32 address)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01621">dw1000_device.c:1621</a></div></div>
<div class="ttc" id="adapter_8cpp_html_a9611b3a00430a86619b5923de30f9fdb"><div class="ttname"><a href="adapter_8cpp.html#a9611b3a00430a86619b5923de30f9fdb">status</a></div><div class="ttdeci">return status</div><div class="ttdef"><b>Definition:</b> <a href="adapter_8cpp_source.html#l00302">adapter.cpp:302</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a3f992abd9cb2eaad23c06346a750839e"><div class="ttname"><a href="dw1000__regs_8h.html#a3f992abd9cb2eaad23c06346a750839e">TX_POWER_ID</a></div><div class="ttdeci">#define TX_POWER_ID</div><div class="ttdoc">Bit definitions for register TX_POWER. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00493">dw1000_regs.h:493</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a9258f5f4cf7a7cd9f681d462e6b60259"><div class="ttname"><a href="dw1000__regs_8h.html#a9258f5f4cf7a7cd9f681d462e6b60259">EVC_PHE_OFFSET</a></div><div class="ttdeci">#define EVC_PHE_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01120">dw1000_regs.h:1120</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a87799b56a05b9ace7c7f77577e4ef564"><div class="ttname"><a href="dw1000__regs_8h.html#a87799b56a05b9ace7c7f77577e4ef564">TX_FCTRL_ID</a></div><div class="ttdeci">#define TX_FCTRL_ID</div><div class="ttdoc">Bit definitions for register TX_FCTRL. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00108">dw1000_regs.h:108</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a1242aa69ee4749f88cb1326869966532"><div class="ttname"><a href="dw1000__regs_8h.html#a1242aa69ee4749f88cb1326869966532">OTP_IF_ID</a></div><div class="ttdeci">#define OTP_IF_ID</div><div class="ttdoc">Bit definitions for register OTP_IF Refer to section 7.2.46 Register file: 0x2D  OTP Memory Interfac...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01033">dw1000_regs.h:1033</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a27948e560dd4a8b83ae7c0f43ed0cfd2"><div class="ttname"><a href="dw1000__regs_8h.html#a27948e560dd4a8b83ae7c0f43ed0cfd2">EVC_CTRL_OFFSET</a></div><div class="ttdeci">#define EVC_CTRL_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01113">dw1000_regs.h:1113</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_adeeac09a1435acb863b0cd44ccf4643e"><div class="ttname"><a href="dw1000__regs_8h.html#adeeac09a1435acb863b0cd44ccf4643e">SYS_STATUS_ID</a></div><div class="ttdeci">#define SYS_STATUS_ID</div><div class="ttdoc">Bit definitions for register SYS_STATUS. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00240">dw1000_regs.h:240</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a9c50e04bd027ec4263bba9b68c9e3c9a"><div class="ttname"><a href="dw1000__regs_8h.html#a9c50e04bd027ec4263bba9b68c9e3c9a">TX_ANTD_ID</a></div><div class="ttdeci">#define TX_ANTD_ID</div><div class="ttdoc">Bit definitions for register TX_ANTD. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00440">dw1000_regs.h:440</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a206f9d67a93e9b452f2a5695e46a8dc1"><div class="ttname"><a href="dw1000__regs_8h.html#a206f9d67a93e9b452f2a5695e46a8dc1">PMSC_CTRL1_OFFSET</a></div><div class="ttdeci">#define PMSC_CTRL1_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01216">dw1000_regs.h:1216</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a434f086c9d776b33debb899a94b5eb7b"><div class="ttname"><a href="dw1000__regs_8h.html#a434f086c9d776b33debb899a94b5eb7b">TC_SARL_SAR_LTEMP_OFFSET</a></div><div class="ttdeci">#define TC_SARL_SAR_LTEMP_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00918">dw1000_regs.h:918</a></div></div>
<div class="ttc" id="structdwt__txconfig__t_html"><div class="ttname"><a href="structdwt__txconfig__t.html">dwt_txconfig_t</a></div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00240">dw1000_device_api.h:240</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a531be189da904749fa61255e8a5e0d79"><div class="ttname"><a href="dw1000__device__api_8h.html#a531be189da904749fa61255e8a5e0d79">dwt_loadopsettabfromotp</a></div><div class="ttdeci">void dwt_loadopsettabfromotp(uint8 gtab_sel)</div></div>
<div class="ttc" id="dw1000__device__api_8h_html_abdd93701efe685335bbc923ba1c28606"><div class="ttname"><a href="dw1000__device__api_8h.html#abdd93701efe685335bbc923ba1c28606">dwt_checkIRQ</a></div><div class="ttdeci">uint8 dwt_checkIRQ(void)</div><div class="ttdoc">This function checks if the IRQ line is active - this is used instead of interrupt handler...</div></div>
<div class="ttc" id="dw1000__regs_8h_html_a555961045b2585a4f224aecb367f0f6c"><div class="ttname"><a href="dw1000__regs_8h.html#a555961045b2585a4f224aecb367f0f6c">SYS_CFG_ID</a></div><div class="ttdeci">#define SYS_CFG_ID</div><div class="ttdoc">Bit definitions for register SYS_CFG. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00058">dw1000_regs.h:58</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_aff798c733da0a633e039fdbdfb901420"><div class="ttname"><a href="dw1000__device_8c.html#aff798c733da0a633e039fdbdfb901420">header_read</a></div><div class="ttdeci">uint8 header_read[150]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00028">dw1000_device.c:28</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_af665b4fec2e50b16d63170df5664ce16"><div class="ttname"><a href="dw1000__device__api_8h.html#af665b4fec2e50b16d63170df5664ce16">DWT_PLEN_256</a></div><div class="ttdeci">#define DWT_PLEN_256</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00101">dw1000_device_api.h:101</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aca7e764e5539c10a4f06692e0eef2921"><div class="ttname"><a href="dw1000__regs_8h.html#aca7e764e5539c10a4f06692e0eef2921">CLEAR_ALLRXGOOD_EVENTS</a></div><div class="ttdeci">#define CLEAR_ALLRXGOOD_EVENTS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00287">dw1000_regs.h:287</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a767619f1a1690ec817161838c58d59d9"><div class="ttname"><a href="dw1000__device_8c.html#a767619f1a1690ec817161838c58d59d9">dwt_enableframefilter</a></div><div class="ttdeci">void dwt_enableframefilter(uint16 enable)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01526">dw1000_device.c:1526</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_acb2f2e2169a5dc7671dda4f23988aef8"><div class="ttname"><a href="dw1000__regs_8h.html#acb2f2e2169a5dc7671dda4f23988aef8">SYS_CTRL_TXDLYS</a></div><div class="ttdeci">#define SYS_CTRL_TXDLYS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00184">dw1000_regs.h:184</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a6311bbf884dcfdfbdc3574fb3f731f95"><div class="ttname"><a href="dw1000__regs_8h.html#a6311bbf884dcfdfbdc3574fb3f731f95">EUI_64_ID</a></div><div class="ttdeci">#define EUI_64_ID</div><div class="ttdoc">Bit definitions for register EUI_64. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00038">dw1000_regs.h:38</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a4df9dc921c5248ae44a9bf1857ef415d"><div class="ttname"><a href="dw1000__device__api_8h.html#a4df9dc921c5248ae44a9bf1857ef415d">DWT_LOADTXCONFIG</a></div><div class="ttdeci">#define DWT_LOADTXCONFIG</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00177">dw1000_device_api.h:177</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ad311918bbc43e0bfe6aa3041c9c8c05a"><div class="ttname"><a href="dw1000__regs_8h.html#ad311918bbc43e0bfe6aa3041c9c8c05a">CHAN_CTRL_RX_CHAN_MASK</a></div><div class="ttdeci">#define CHAN_CTRL_RX_CHAN_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00524">dw1000_regs.h:524</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a9401b5091d021c64738391d578e42de4"><div class="ttname"><a href="dw1000__device__api_8h.html#a9401b5091d021c64738391d578e42de4">dwt_configcontinuousframemode</a></div><div class="ttdeci">void dwt_configcontinuousframemode(uint32 framerepetitionrate)</div></div>
<div class="ttc" id="dw1000__device__api_8h_html_acf1cd4f28f5484bab0d2f08687aefeb1"><div class="ttname"><a href="dw1000__device__api_8h.html#acf1cd4f28f5484bab0d2f08687aefeb1">dwt_calibratesleepcnt</a></div><div class="ttdeci">uint16 dwt_calibratesleepcnt(void)</div></div>
<div class="ttc" id="dw1000__regs_8h_html_aee7e7dfdde39f79bd9ad7e291046ff19"><div class="ttname"><a href="dw1000__regs_8h.html#aee7e7dfdde39f79bd9ad7e291046ff19">SYS_CTRL_RXDLYE</a></div><div class="ttdeci">#define SYS_CTRL_RXDLYE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00190">dw1000_regs.h:190</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ae0192e1232c2ab0c8902aec26a0a4352"><div class="ttname"><a href="dw1000__regs_8h.html#ae0192e1232c2ab0c8902aec26a0a4352">TX_FCTRL_TR</a></div><div class="ttdeci">#define TX_FCTRL_TR</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00126">dw1000_regs.h:126</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a8cf2d150d142fa90aff6a720a82a207d"><div class="ttname"><a href="dw1000__device_8c.html#a8cf2d150d142fa90aff6a720a82a207d">dwt_setrxaftertxdelay</a></div><div class="ttdeci">void dwt_setrxaftertxdelay(uint32 rxDelayTime)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l02437">dw1000_device.c:2437</a></div></div>
<div class="ttc" id="stdint_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00036">stdint.h:36</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ad08514888deba1a7871beee4f60ded51"><div class="ttname"><a href="dw1000__device__api_8h.html#ad08514888deba1a7871beee4f60ded51">dwt_setcallbacks</a></div><div class="ttdeci">void dwt_setcallbacks(void(*txcallback)(const dwt_callback_data_t *), void(*rxcallback)(const dwt_callback_data_t *))</div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a16807dbb3e9c10728cd82233f8ae2a46"><div class="ttname"><a href="dw1000__device__api_8h.html#a16807dbb3e9c10728cd82233f8ae2a46">dwt_setdblrxbuffmode</a></div><div class="ttdeci">void dwt_setdblrxbuffmode(int enable)</div></div>
<div class="ttc" id="dw1000__regs_8h_html_acd935ee553caaf570893a4f94375f877"><div class="ttname"><a href="dw1000__regs_8h.html#acd935ee553caaf570893a4f94375f877">SYS_STATUS_ICRBP</a></div><div class="ttdeci">#define SYS_STATUS_ICRBP</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00279">dw1000_regs.h:279</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_acbd9a65eac00a165986b93f92c2a1204"><div class="ttname"><a href="dw1000__regs_8h.html#acbd9a65eac00a165986b93f92c2a1204">OTP_RDAT</a></div><div class="ttdeci">#define OTP_RDAT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01057">dw1000_regs.h:1057</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_aa546722e6f81158e33ddd255c5658b4d"><div class="ttname"><a href="dw1000__device_8c.html#aa546722e6f81158e33ddd255c5658b4d">dwt_setinterrupt</a></div><div class="ttdeci">void dwt_setinterrupt(uint32 bitmask, uint8 enable)</div><div class="ttdoc">This function enables the specified events to trigger an interrupt. The following events can be enabl...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l03323">dw1000_device.c:3323</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a734c93492e12a41e47a35706ac399d85"><div class="ttname"><a href="dw1000__regs_8h.html#a734c93492e12a41e47a35706ac399d85">DRX_TUNE1b_OFFSET</a></div><div class="ttdeci">#define DRX_TUNE1b_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00838">dw1000_regs.h:838</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a6ff26392da12ba104315ee7b4fdb8d3a"><div class="ttname"><a href="structdwt__local__data__t.html#a6ff26392da12ba104315ee7b4fdb8d3a">dwt_local_data_t::chan</a></div><div class="ttdeci">uint8 chan</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00074">dw1000_device.c:74</a></div></div>
<div class="ttc" id="dw1000__driver_8c_html_a26e5ffb57ec8bf2f850ced177af659d1"><div class="ttname"><a href="dw1000__driver_8c.html#a26e5ffb57ec8bf2f850ced177af659d1">Sleep</a></div><div class="ttdeci">void Sleep(uint32_t ms)</div><div class="ttdoc">Sleep in milliseconds. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__driver_8c_source.html#l00045">dw1000_driver.c:45</a></div></div>
<div class="ttc" id="dw1000__param__types_8h_html_aade3df840c2c7fa5ec65499d43b742cc"><div class="ttname"><a href="dw1000__param__types_8h.html#aade3df840c2c7fa5ec65499d43b742cc">tx_config</a></div><div class="ttdeci">const uint32 tx_config[NUM_CH]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__params__init_8c_source.html#l00028">dw1000_params_init.c:28</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_adbb2e9ebb01b7828c84195bb6a2957d5"><div class="ttname"><a href="dw1000__device__api_8h.html#adbb2e9ebb01b7828c84195bb6a2957d5">DWT_SIG_RX_ERROR</a></div><div class="ttdeci">#define DWT_SIG_RX_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00109">dw1000_device_api.h:109</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a4fd3dd0109e04c895eed63dae6ba5b8f"><div class="ttname"><a href="dw1000__regs_8h.html#a4fd3dd0109e04c895eed63dae6ba5b8f">SYS_STATUS_RXFCE</a></div><div class="ttdeci">#define SYS_STATUS_RXFCE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00261">dw1000_regs.h:261</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a81f8fa4cb2400d5acba5c0211ff98fa6"><div class="ttname"><a href="dw1000__device_8c.html#a81f8fa4cb2400d5acba5c0211ff98fa6">XTRIM_ADDRESS</a></div><div class="ttdeci">#define XTRIM_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00136">dw1000_device.c:136</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_ac221d4cf7229596db907b498bc32f3b9"><div class="ttname"><a href="dw1000__device_8c.html#ac221d4cf7229596db907b498bc32f3b9">ENABLE_ALL_SEQ</a></div><div class="ttdeci">#define ENABLE_ALL_SEQ</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00033">dw1000_device.c:33</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a5d0ee8091aaeaca923fbd498568f63e4"><div class="ttname"><a href="dw1000__device__api_8h.html#a5d0ee8091aaeaca923fbd498568f63e4">DWT_BR_6M8</a></div><div class="ttdeci">#define DWT_BR_6M8</div><div class="ttdoc">UWB bit rate 6.8 Mbits/s. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00080">dw1000_device_api.h:80</a></div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_a76be8b3aa70a183f89db653e41da349c"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#a76be8b3aa70a183f89db653e41da349c">dwt_deviceentcnts_t::RTO</a></div><div class="ttdeci">uint16 RTO</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00280">dw1000_device_api.h:280</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_afb5a1d8b95d7981f376b5fbc2a9d2f67"><div class="ttname"><a href="dw1000__regs_8h.html#afb5a1d8b95d7981f376b5fbc2a9d2f67">OTP_ADDR</a></div><div class="ttdeci">#define OTP_ADDR</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01039">dw1000_regs.h:1039</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a5623a976649c9a1af2b33660a37677cc"><div class="ttname"><a href="dw1000__device_8c.html#a5623a976649c9a1af2b33660a37677cc">_dwt_otpprogword32</a></div><div class="ttdeci">uint32 _dwt_otpprogword32(uint32 data, uint16 address)</div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a3a0be13a3ea732ab0fdf06eaa784e57c"><div class="ttname"><a href="dw1000__device__api_8h.html#a3a0be13a3ea732ab0fdf06eaa784e57c">DWT_START_RX_DELAYED</a></div><div class="ttdeci">#define DWT_START_RX_DELAYED</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00134">dw1000_device_api.h:134</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_ab9d034b097c34d26efea11ba23beff26"><div class="ttname"><a href="structdwt__local__data__t.html#ab9d034b097c34d26efea11ba23beff26">dwt_local_data_t::partID</a></div><div class="ttdeci">uint32 partID</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00072">dw1000_device.c:72</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ad2ebb676841b8a577fedad861deb4e34"><div class="ttname"><a href="dw1000__regs_8h.html#ad2ebb676841b8a577fedad861deb4e34">SYS_CFG_AUTOACK</a></div><div class="ttdeci">#define SYS_CFG_AUTOACK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00089">dw1000_regs.h:89</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a162f37631fb8a7040c82d3a9d8967f7f"><div class="ttname"><a href="dw1000__device_8c.html#a162f37631fb8a7040c82d3a9d8967f7f">dwt_otprevision</a></div><div class="ttdeci">uint8 dwt_otprevision(void)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00334">dw1000_device.c:334</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a4e2e9c726d7ea2412456f1a5ce9e16c1"><div class="ttname"><a href="dw1000__device__api_8h.html#a4e2e9c726d7ea2412456f1a5ce9e16c1">dwt_setGPIOforEXTTRX</a></div><div class="ttdeci">void dwt_setGPIOforEXTTRX(void)</div><div class="ttdoc">This is used to enable GPIO for external LNA or PA functionality - HW dependent, consult the DW1000 U...</div></div>
<div class="ttc" id="dw1000__device_8c_html_a8b7023134a12d8ad84054638668f24e0"><div class="ttname"><a href="dw1000__device_8c.html#a8b7023134a12d8ad84054638668f24e0">dwt_readfromdevice</a></div><div class="ttdeci">int dwt_readfromdevice(uint16 recordNumber, uint16 index, uint32 length, uint8 *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01278">dw1000_device.c:1278</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a69e25249ff2c759040ae614953fd75d6"><div class="ttname"><a href="dw1000__regs_8h.html#a69e25249ff2c759040ae614953fd75d6">RX_FINFO_RXPACC_MASK</a></div><div class="ttdeci">#define RX_FINFO_RXPACC_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00337">dw1000_regs.h:337</a></div></div>
<div class="ttc" id="dw1000__param__types_8h_html_af5cd4f7d3eeaf7546365db5f92a93e9f"><div class="ttname"><a href="dw1000__param__types_8h.html#af5cd4f7d3eeaf7546365db5f92a93e9f">sftsh</a></div><div class="ttdeci">const uint16 sftsh[NUM_BR][NUM_SFD]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__params__init_8c_source.html#l00076">dw1000_params_init.c:76</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_aa1586b9a0fd3bfaa43a4bd4aa47a186e"><div class="ttname"><a href="dw1000__device_8c.html#aa1586b9a0fd3bfaa43a4bd4aa47a186e">_dwt_aonconfigupload</a></div><div class="ttdeci">void _dwt_aonconfigupload(void)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01927">dw1000_device.c:1927</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_acd4cd347e39f341ba6dc897f74b6d02f"><div class="ttname"><a href="dw1000__device__api_8h.html#acd4cd347e39f341ba6dc897f74b6d02f">DWT_SIG_RX_SFDTIMEOUT</a></div><div class="ttdeci">#define DWT_SIG_RX_SFDTIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00115">dw1000_device_api.h:115</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_afd4f07bd1926872d31ddbdcc4e6c4eae"><div class="ttname"><a href="dw1000__regs_8h.html#afd4f07bd1926872d31ddbdcc4e6c4eae">CHAN_CTRL_DWSFD_SHIFT</a></div><div class="ttdeci">#define CHAN_CTRL_DWSFD_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00539">dw1000_regs.h:539</a></div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_a66a4e5efd18aa19b814b693815a65d9a"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#a66a4e5efd18aa19b814b693815a65d9a">dwt_deviceentcnts_t::RSL</a></div><div class="ttdeci">uint16 RSL</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00273">dw1000_device_api.h:273</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ab1c85fa05050ad44ea5051eb88761595"><div class="ttname"><a href="dw1000__regs_8h.html#ab1c85fa05050ad44ea5051eb88761595">ACC_MEM_ID</a></div><div class="ttdeci">#define ACC_MEM_ID</div><div class="ttdoc">Bit definitions for register ACC_MEM. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00632">dw1000_regs.h:632</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_adde0bdec35fb5f74129979b580d1b6ec"><div class="ttname"><a href="dw1000__regs_8h.html#adde0bdec35fb5f74129979b580d1b6ec">DEV_ID_ID</a></div><div class="ttdeci">#define DEV_ID_ID</div><div class="ttdoc">Bit definitions for register DEV_ID. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00027">dw1000_regs.h:27</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a518ee17d3e0b0ab17cc4d4da371f5865"><div class="ttname"><a href="dw1000__regs_8h.html#a518ee17d3e0b0ab17cc4d4da371f5865">TC_PGTEST_CW</a></div><div class="ttdeci">#define TC_PGTEST_CW</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00937">dw1000_regs.h:937</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a1f9c257383773f483480b34467bb7c73"><div class="ttname"><a href="dw1000__regs_8h.html#a1f9c257383773f483480b34467bb7c73">EVC_FFR_OFFSET</a></div><div class="ttdeci">#define EVC_FFR_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01138">dw1000_regs.h:1138</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a3aed69cf20b7431ba24f04b8991166be"><div class="ttname"><a href="structdwt__local__data__t.html#a3aed69cf20b7431ba24f04b8991166be">dwt_local_data_t::cdata</a></div><div class="ttdeci">dwt_callback_data_t cdata</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00087">dw1000_device.c:87</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_ad216f40a9230e591565aa58a7a3e6918"><div class="ttname"><a href="dw1000__device_8c.html#ad216f40a9230e591565aa58a7a3e6918">dwt_writetodevice</a></div><div class="ttdeci">int dwt_writetodevice(uint16 recordNumber, uint16 index, uint32 length, const uint8 *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01150">dw1000_device.c:1150</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a551d3ed51b343f474f9176bde513276e"><div class="ttname"><a href="dw1000__regs_8h.html#a551d3ed51b343f474f9176bde513276e">RX_TIME_RX_STAMP_LEN</a></div><div class="ttdeci">#define RX_TIME_RX_STAMP_LEN</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00408">dw1000_regs.h:408</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a337fa028148c01f5fab4703b5cbd424e"><div class="ttname"><a href="dw1000__device__api_8h.html#a337fa028148c01f5fab4703b5cbd424e">dwt_readwakeupvbat</a></div><div class="ttdeci">uint8 dwt_readwakeupvbat(void)</div></div>
<div class="ttc" id="dw1000__param__types_8h_html_a8ae67e0ecbef0a2c13c9c95a21535f6b"><div class="ttname"><a href="dw1000__param__types_8h.html#a8ae67e0ecbef0a2c13c9c95a21535f6b">LDE_PARAM3_64</a></div><div class="ttdeci">#define LDE_PARAM3_64</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__param__types_8h_source.html#l00057">dw1000_param_types.h:57</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_ad54499732c9c424ed217c1893984e52f"><div class="ttname"><a href="dw1000__device_8c.html#ad54499732c9c424ed217c1893984e52f">dwt_forcetrxoff</a></div><div class="ttdeci">void dwt_forcetrxoff(void)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l03094">dw1000_device.c:3094</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a219b5ba03d254ecf2079fb93cf0890c7"><div class="ttname"><a href="dw1000__regs_8h.html#a219b5ba03d254ecf2079fb93cf0890c7">SYS_MASK_ID</a></div><div class="ttdeci">#define SYS_MASK_ID</div><div class="ttdoc">Bit definitions for register SYS_MASK. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00200">dw1000_regs.h:200</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_adde65805e955073b30b2cfa69dd5f81f"><div class="ttname"><a href="dw1000__regs_8h.html#adde65805e955073b30b2cfa69dd5f81f">CHAN_CTRL_TX_PCOD_MASK</a></div><div class="ttdeci">#define CHAN_CTRL_TX_PCOD_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00533">dw1000_regs.h:533</a></div></div>
<div class="ttc" id="structdwt__rxdiag__t_html"><div class="ttname"><a href="structdwt__rxdiag__t.html">dwt_rxdiag_t</a></div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00253">dw1000_device_api.h:253</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a68593068b7a65b192ee6796eee753a4a"><div class="ttname"><a href="dw1000__regs_8h.html#a68593068b7a65b192ee6796eee753a4a">EVC_EN</a></div><div class="ttdeci">#define EVC_EN</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01116">dw1000_regs.h:1116</a></div></div>
<div class="ttc" id="dw1000__param__types_8h_html_a9accd227957be8667e4afb81923ae62b"><div class="ttname"><a href="dw1000__param__types_8h.html#a9accd227957be8667e4afb81923ae62b">lde_replicaCoeff</a></div><div class="ttdeci">const uint16 lde_replicaCoeff[PCODES]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__params__init_8c_source.html#l00127">dw1000_params_init.c:127</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a67139c4b27a40fb1e5d37109045df478"><div class="ttname"><a href="dw1000__device__api_8h.html#a67139c4b27a40fb1e5d37109045df478">dwt_setGPIOdirection</a></div><div class="ttdeci">void dwt_setGPIOdirection(uint32 gpioNum, uint32 direction)</div></div>
<div class="ttc" id="dw1000__device_8c_html_a776a03f15d8b282cf46f8fd06feb4b2f"><div class="ttname"><a href="dw1000__device_8c.html#a776a03f15d8b282cf46f8fd06feb4b2f">READ_ACC_ON</a></div><div class="ttdeci">#define READ_ACC_ON</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00035">dw1000_device.c:35</a></div></div>
<div class="ttc" id="structdwt__txconfig__t_html_a8d148b774b63d3a395bbfbb7f32b1168"><div class="ttname"><a href="structdwt__txconfig__t.html#a8d148b774b63d3a395bbfbb7f32b1168">dwt_txconfig_t::PGdly</a></div><div class="ttdeci">uint8 PGdly</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00242">dw1000_device_api.h:242</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a1f8203d66e71f8f925e37f870eee3cef"><div class="ttname"><a href="dw1000__regs_8h.html#a1f8203d66e71f8f925e37f870eee3cef">CHAN_CTRL_RXFPRF_MASK</a></div><div class="ttdeci">#define CHAN_CTRL_RXFPRF_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00527">dw1000_regs.h:527</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a1e769cec1bd763209dcd20e33b71cd45"><div class="ttname"><a href="dw1000__regs_8h.html#a1e769cec1bd763209dcd20e33b71cd45">OTP_SF</a></div><div class="ttdeci">#define OTP_SF</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01063">dw1000_regs.h:1063</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ab60fff0e718c8d3b8d9cef5255651cb9"><div class="ttname"><a href="dw1000__regs_8h.html#ab60fff0e718c8d3b8d9cef5255651cb9">CHAN_CTRL_RNSSFD</a></div><div class="ttdeci">#define CHAN_CTRL_RNSSFD</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00542">dw1000_regs.h:542</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a85dfdcbf71160b8504aa8946a670c5b4"><div class="ttname"><a href="dw1000__device__api_8h.html#a85dfdcbf71160b8504aa8946a670c5b4">DWT_PLEN_2048</a></div><div class="ttdeci">#define DWT_PLEN_2048</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00097">dw1000_device_api.h:97</a></div></div>
<div class="ttc" id="_s_e_g_g_e_r___r_t_t_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="_s_e_g_g_e_r___r_t_t_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="_s_e_g_g_e_r___r_t_t_8c_source.html#l00114">SEGGER_RTT.c:114</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a80bb8b104729cc2221250083438812a5"><div class="ttname"><a href="dw1000__device__api_8h.html#a80bb8b104729cc2221250083438812a5">dwt_configcwmode</a></div><div class="ttdeci">int dwt_configcwmode(uint8 chan)</div></div>
<div class="ttc" id="dw1000__device__api_8h_html"><div class="ttname"><a href="dw1000__device__api_8h.html">dw1000_device_api.h</a></div><div class="ttdoc">DW1000 API Functions. </div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ad893179c232ecf40ed8acb99b246e806"><div class="ttname"><a href="dw1000__device__api_8h.html#ad893179c232ecf40ed8acb99b246e806">dwt_readsystime</a></div><div class="ttdeci">void dwt_readsystime(uint8 *timestamp)</div></div>
<div class="ttc" id="dw1000__device_8c_html_ad0980165476f8cd9018b984c6a568fcf"><div class="ttname"><a href="dw1000__device_8c.html#ad0980165476f8cd9018b984c6a568fcf">FORCE_OTP_ON</a></div><div class="ttdeci">#define FORCE_OTP_ON</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00037">dw1000_device.c:37</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a6f8f662a31326c024f62b720671615c6"><div class="ttname"><a href="dw1000__regs_8h.html#a6f8f662a31326c024f62b720671615c6">PANADR_ID</a></div><div class="ttdeci">#define PANADR_ID</div><div class="ttdoc">Bit definitions for register PANADR. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00044">dw1000_regs.h:44</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_ab681a33f95c03bc1bdb0059d08f1dbcc"><div class="ttname"><a href="dw1000__device_8c.html#ab681a33f95c03bc1bdb0059d08f1dbcc">TXCFG_ADDRESS</a></div><div class="ttdeci">#define TXCFG_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00134">dw1000_device.c:134</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a2ff7aada215f17ff6d211a5f4c30c2fd"><div class="ttname"><a href="dw1000__device_8c.html#a2ff7aada215f17ff6d211a5f4c30c2fd">dwt_writetxfctrl</a></div><div class="ttdeci">int dwt_writetxfctrl(uint16 txFrameLength, uint16 txBufferOffset)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00863">dw1000_device.c:863</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a5e59f08ca76438d4a40b999b31a268a7"><div class="ttname"><a href="dw1000__device__api_8h.html#a5e59f08ca76438d4a40b999b31a268a7">DWT_LOADLDOTUNE</a></div><div class="ttdeci">#define DWT_LOADLDOTUNE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00176">dw1000_device_api.h:176</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_abdb79f7c7d23a8bb38cce35fdaf300b1"><div class="ttname"><a href="dw1000__regs_8h.html#abdb79f7c7d23a8bb38cce35fdaf300b1">AGC_CFG_STS_ID</a></div><div class="ttdeci">#define AGC_CFG_STS_ID</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00572">dw1000_regs.h:572</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a70905716f7ceaffa505d76fcd4c14fce"><div class="ttname"><a href="dw1000__regs_8h.html#a70905716f7ceaffa505d76fcd4c14fce">RF_CONF_TXPLLPOWEN_MASK</a></div><div class="ttdeci">#define RF_CONF_TXPLLPOWEN_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00879">dw1000_regs.h:879</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a0bad5a2c98ec1324e9a6f013dd684ce7"><div class="ttname"><a href="dw1000__regs_8h.html#a0bad5a2c98ec1324e9a6f013dd684ce7">TC_PGDELAY_OFFSET</a></div><div class="ttdeci">#define TC_PGDELAY_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00925">dw1000_regs.h:925</a></div></div>
<div class="ttc" id="structdwt__callback__data__t_html"><div class="ttname"><a href="structdwt__callback__data__t.html">dwt_callback_data_t</a></div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00187">dw1000_device_api.h:187</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a12d23c48aad2b676422d345ca0c9b439"><div class="ttname"><a href="dw1000__regs_8h.html#a12d23c48aad2b676422d345ca0c9b439">SYS_CFG_RXWTOE</a></div><div class="ttdeci">#define SYS_CFG_RXWTOE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00087">dw1000_regs.h:87</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a514169b0f510d9515ce9f3b0e8c7018f"><div class="ttname"><a href="dw1000__device__api_8h.html#a514169b0f510d9515ce9f3b0e8c7018f">DWT_PAC64</a></div><div class="ttdeci">#define DWT_PAC64</div><div class="ttdoc">PAC 64 (recommended for RX of preamble length 1024 and up. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00091">dw1000_device_api.h:91</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a20fc28809096d225da061391dc36a36c"><div class="ttname"><a href="dw1000__device_8c.html#a20fc28809096d225da061391dc36a36c">dwt_starttx</a></div><div class="ttdeci">int dwt_starttx(uint8 mode)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l03029">dw1000_device.c:3029</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a88bfc74e04ac481875698053022132ea"><div class="ttname"><a href="dw1000__regs_8h.html#a88bfc74e04ac481875698053022132ea">GPIO_CTRL_ID</a></div><div class="ttdeci">#define GPIO_CTRL_ID</div><div class="ttdoc">Bit definitions for register GPIO_CTRL. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00639">dw1000_regs.h:639</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ae387a95682925af3d85811debb9a9deb"><div class="ttname"><a href="dw1000__regs_8h.html#ae387a95682925af3d85811debb9a9deb">EC_CTRL_OFFSET</a></div><div class="ttdeci">#define EC_CTRL_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00610">dw1000_regs.h:610</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a4ed8ddd4e8f61e0f566c4a1a13c52148"><div class="ttname"><a href="dw1000__regs_8h.html#a4ed8ddd4e8f61e0f566c4a1a13c52148">GPIO_DIR_OFFSET</a></div><div class="ttdeci">#define GPIO_DIR_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00665">dw1000_regs.h:665</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a06c4b1c25fcbdb5dc0c92d6f89797513"><div class="ttname"><a href="dw1000__device__api_8h.html#a06c4b1c25fcbdb5dc0c92d6f89797513">writetospi</a></div><div class="ttdeci">int writetospi(uint16 headerLength, const uint8 *headerBuffer, uint32 bodylength, const uint8 *bodyBuffer)</div></div>
<div class="ttc" id="dw1000__device_8c_html_a0d0612af808842983435c51f33a6b715"><div class="ttname"><a href="dw1000__device_8c.html#a0d0612af808842983435c51f33a6b715">dwt_configure</a></div><div class="ttdeci">int dwt_configure(dwt_config_t *config, uint8 use_otpconfigvalues)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00546">dw1000_device.c:546</a></div></div>
<div class="ttc" id="dw1000__spi_8h_html"><div class="ttname"><a href="dw1000__spi_8h.html">dw1000_spi.h</a></div><div class="ttdoc">SPI access functions. </div></div>
<div class="ttc" id="dw1000__regs_8h_html_aa1274d2c19e0b67a33f8aa7d6f560397"><div class="ttname"><a href="dw1000__regs_8h.html#aa1274d2c19e0b67a33f8aa7d6f560397">GPIO_DOUT_LEN</a></div><div class="ttdeci">#define GPIO_DOUT_LEN</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00711">dw1000_regs.h:711</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a7a15ec7ea20a923a9bed73b21853f7a5"><div class="ttname"><a href="dw1000__device_8c.html#a7a15ec7ea20a923a9bed73b21853f7a5">dwt_configuretxrf</a></div><div class="ttdeci">void dwt_configuretxrf(dwt_txconfig_t *config)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00496">dw1000_device.c:496</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a63b90d34bff80c53f7fb9a9c0d853416"><div class="ttname"><a href="dw1000__regs_8h.html#a63b90d34bff80c53f7fb9a9c0d853416">EC_CTRL_PLLLCK</a></div><div class="ttdeci">#define EC_CTRL_PLLLCK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00615">dw1000_regs.h:615</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_ad5cd6013b0e1ce4eaeeadc61de291a52"><div class="ttname"><a href="structdwt__local__data__t.html#ad5cd6013b0e1ce4eaeeadc61de291a52">dwt_local_data_t::antennaCals</a></div><div class="ttdeci">uint32 antennaCals[4]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00081">dw1000_device.c:81</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a561b63c1057ca00783f31202aef965b7"><div class="ttname"><a href="dw1000__device_8c.html#a561b63c1057ca00783f31202aef965b7">_dwt_loaducodefromrom</a></div><div class="ttdeci">int _dwt_loaducodefromrom(void)</div><div class="ttdoc">load ucode from OTP MEMORY or ROM </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l02254">dw1000_device.c:2254</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a2299e67275d5a17f86136ac27541715a"><div class="ttname"><a href="dw1000__regs_8h.html#a2299e67275d5a17f86136ac27541715a">OTP_WDAT</a></div><div class="ttdeci">#define OTP_WDAT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01036">dw1000_regs.h:1036</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_ab8a0ab332238d798253da436e282929e"><div class="ttname"><a href="structdwt__local__data__t.html#ab8a0ab332238d798253da436e282929e">dwt_local_data_t::lotID</a></div><div class="ttdeci">uint32 lotID</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00073">dw1000_device.c:73</a></div></div>
<div class="ttc" id="dw1000__param__types_8h_html_a21a5a43002f9a02226af78d3717aea04"><div class="ttname"><a href="dw1000__param__types_8h.html#a21a5a43002f9a02226af78d3717aea04">dwnsSFDlen</a></div><div class="ttdeci">const uint8 dwnsSFDlen[NUM_BR]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__params__init_8c_source.html#l00073">dw1000_params_init.c:73</a></div></div>
<div class="ttc" id="structdwt__rxdiag__t_html_a231a5913666a62166dd951ab7c3db1c1"><div class="ttname"><a href="structdwt__rxdiag__t.html#a231a5913666a62166dd951ab7c3db1c1">dwt_rxdiag_t::rxPreamCount</a></div><div class="ttdeci">uint16 rxPreamCount</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00262">dw1000_device_api.h:262</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ad4f44358a39d514e1d6a83e519f7cab6"><div class="ttname"><a href="dw1000__device__api_8h.html#ad4f44358a39d514e1d6a83e519f7cab6">dwt_setrxtimeout</a></div><div class="ttdeci">void dwt_setrxtimeout(uint16 time)</div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a2e375cf05af5e71b545ed035c48a25e6"><div class="ttname"><a href="dw1000__device__api_8h.html#a2e375cf05af5e71b545ed035c48a25e6">dwt_readtempvbat</a></div><div class="ttdeci">uint16 dwt_readtempvbat(uint8 fastSPI)</div></div>
<div class="ttc" id="dw1000__device_8c_html_a76c7f5a4081051ff10a4a56543463bf9"><div class="ttname"><a href="dw1000__device_8c.html#a76c7f5a4081051ff10a4a56543463bf9">_dwt_disablesequencing</a></div><div class="ttdeci">void _dwt_disablesequencing(void)</div><div class="ttdoc">This function disables the TX blocks sequencing, it disables PMSC control of RF blocks, system clock is also set to XTAL. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l02984">dw1000_device.c:2984</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a70b544d858c4690fe470f161c01b1268"><div class="ttname"><a href="dw1000__regs_8h.html#a70b544d858c4690fe470f161c01b1268">SYS_STATUS_LDEDONE</a></div><div class="ttdeci">#define SYS_STATUS_LDEDONE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00256">dw1000_regs.h:256</a></div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_a7a333a061cd8f6f94235fec61ecc9cbc"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#a7a333a061cd8f6f94235fec61ecc9cbc">dwt_deviceentcnts_t::CRCG</a></div><div class="ttdeci">uint16 CRCG</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00274">dw1000_device_api.h:274</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a346df097307fe29dd8bae37dd6568d47"><div class="ttname"><a href="dw1000__regs_8h.html#a346df097307fe29dd8bae37dd6568d47">DIG_DIAG_ID</a></div><div class="ttdeci">#define DIG_DIAG_ID</div><div class="ttdoc">Bit definitions for register DIG_DIAG Digital Diagnostics interface. It contains a number of sub-regi...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01109">dw1000_regs.h:1109</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a83578ad2176080283f41c70a467fd899"><div class="ttname"><a href="dw1000__regs_8h.html#a83578ad2176080283f41c70a467fd899">ACK_RESP_T_ID</a></div><div class="ttdeci">#define ACK_RESP_T_ID</div><div class="ttdoc">Bit definitions for register ACK_RESP_T. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00458">dw1000_regs.h:458</a></div></div>
<div class="ttc" id="dw1000__param__types_8h_html_a3c97aeebfcbf626d5d01b8b521add912"><div class="ttname"><a href="dw1000__param__types_8h.html#a3c97aeebfcbf626d5d01b8b521add912">chan_idx</a></div><div class="ttdeci">const uint8 chan_idx[NUM_CH_SUPPORTED]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__params__init_8c_source.html#l00025">dw1000_params_init.c:25</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a36c25489dac7b83ddd1331ccf235d279"><div class="ttname"><a href="dw1000__device_8c.html#a36c25489dac7b83ddd1331ccf235d279">_dwt_enableclocks</a></div><div class="ttdeci">void _dwt_enableclocks(int clocks)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l02909">dw1000_device.c:2909</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aa5ee6a88c4cfd57e9f2805d304ec5300"><div class="ttname"><a href="dw1000__regs_8h.html#aa5ee6a88c4cfd57e9f2805d304ec5300">SYS_CTRL_ID</a></div><div class="ttdeci">#define SYS_CTRL_ID</div><div class="ttdoc">Bit definitions for register SYS_CTRL. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00177">dw1000_regs.h:177</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a243199f62c28f468d432a3a192287710"><div class="ttname"><a href="dw1000__device__api_8h.html#a243199f62c28f468d432a3a192287710">dwt_getlotid</a></div><div class="ttdeci">uint32 dwt_getlotid(void)</div></div>
<div class="ttc" id="dw1000__regs_8h_html_a152469a538ed2e284828d0d35f9202b2"><div class="ttname"><a href="dw1000__regs_8h.html#a152469a538ed2e284828d0d35f9202b2">SYS_CTRL_WAIT4RESP</a></div><div class="ttdeci">#define SYS_CTRL_WAIT4RESP</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00187">dw1000_regs.h:187</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a39ddeb1d3e9878d14df100c78562fea0"><div class="ttname"><a href="dw1000__regs_8h.html#a39ddeb1d3e9878d14df100c78562fea0">EVC_HPW_OFFSET</a></div><div class="ttdeci">#define EVC_HPW_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01165">dw1000_regs.h:1165</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_ae9f046658785584f1d160f3fa78e2af7"><div class="ttname"><a href="dw1000__device_8c.html#ae9f046658785584f1d160f3fa78e2af7">dwt_setleds</a></div><div class="ttdeci">void dwt_setleds(uint8 test)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l02861">dw1000_device.c:2861</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ace7617f495e1ef3b934f62a1191c45e1"><div class="ttname"><a href="dw1000__device__api_8h.html#ace7617f495e1ef3b934f62a1191c45e1">DWT_START_TX_DELAYED</a></div><div class="ttdeci">#define DWT_START_TX_DELAYED</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00130">dw1000_device_api.h:130</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_adae40bd196107a112dfccad8221a27c6"><div class="ttname"><a href="dw1000__device_8c.html#adae40bd196107a112dfccad8221a27c6">dwt_settxantennadelay</a></div><div class="ttdeci">void dwt_settxantennadelay(uint16 txDelay)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00764">dw1000_device.c:764</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a6a548e476fb519ac7f723d797abdcc78"><div class="ttname"><a href="dw1000__regs_8h.html#a6a548e476fb519ac7f723d797abdcc78">TX_FCTRL_TXBR_SHFT</a></div><div class="ttdeci">#define TX_FCTRL_TXBR_SHFT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00125">dw1000_regs.h:125</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a284b21755138af73364c30a680909d80"><div class="ttname"><a href="dw1000__regs_8h.html#a284b21755138af73364c30a680909d80">SYS_CTRL_TRXOFF</a></div><div class="ttdeci">#define SYS_CTRL_TRXOFF</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00186">dw1000_regs.h:186</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a124738b7fdd7abfe5a653a61338bbbf9"><div class="ttname"><a href="dw1000__regs_8h.html#a124738b7fdd7abfe5a653a61338bbbf9">SYS_CFG_FF_ALL_EN</a></div><div class="ttdeci">#define SYS_CFG_FF_ALL_EN</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00062">dw1000_regs.h:62</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a9050db8f9a02d0d662b6465b0adc1e57"><div class="ttname"><a href="structdwt__local__data__t.html#a9050db8f9a02d0d662b6465b0adc1e57">dwt_local_data_t::deviceID</a></div><div class="ttdeci">uint32 deviceID</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00071">dw1000_device.c:71</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a7294f1e7362262860aff3188f74e0afc"><div class="ttname"><a href="dw1000__regs_8h.html#a7294f1e7362262860aff3188f74e0afc">TC_PGTEST_LEN</a></div><div class="ttdeci">#define TC_PGTEST_LEN</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00935">dw1000_regs.h:935</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a2c825f11ac92175acb6245bbb9803e00"><div class="ttname"><a href="dw1000__regs_8h.html#a2c825f11ac92175acb6245bbb9803e00">GPIO_DOUT_OFFSET</a></div><div class="ttdeci">#define GPIO_DOUT_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00710">dw1000_regs.h:710</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a4083cd58f0401dfa3f7e047fad4d61f5"><div class="ttname"><a href="dw1000__regs_8h.html#a4083cd58f0401dfa3f7e047fad4d61f5">RX_BUFFER_ID</a></div><div class="ttdeci">#define RX_BUFFER_ID</div><div class="ttdoc">Bit definitions for register RX_BUFFER. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00344">dw1000_regs.h:344</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a251759613154ca3433c3cba451549817"><div class="ttname"><a href="structdwt__local__data__t.html#a251759613154ca3433c3cba451549817">dwt_local_data_t::statescount</a></div><div class="ttdeci">uint8 statescount</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00090">dw1000_device.c:90</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a5fa4fd0ade437467cf22853a671a9c1a"><div class="ttname"><a href="dw1000__device_8c.html#a5fa4fd0ade437467cf22853a671a9c1a">dwt_writetxdata</a></div><div class="ttdeci">int dwt_writetxdata(uint16 txFrameLength, uint8 *txFrameBytes, uint16 txBufferOffset)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00811">dw1000_device.c:811</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_adae9176fcfd802171a4a4b5194a776e6"><div class="ttname"><a href="structdwt__local__data__t.html#adae9176fcfd802171a4a4b5194a776e6">dwt_local_data_t::otprev</a></div><div class="ttdeci">uint8 otprev</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00076">dw1000_device.c:76</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ab31fbfba6deddc3b066c976cb061fe58"><div class="ttname"><a href="dw1000__regs_8h.html#ab31fbfba6deddc3b066c976cb061fe58">CHAN_CTRL_RX_CHAN_SHIFT</a></div><div class="ttdeci">#define CHAN_CTRL_RX_CHAN_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00525">dw1000_regs.h:525</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ab6274b5574f6bad17120789c3797383b"><div class="ttname"><a href="dw1000__regs_8h.html#ab6274b5574f6bad17120789c3797383b">GPIO_LNA_byte_no</a></div><div class="ttdeci">#define GPIO_LNA_byte_no</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00660">dw1000_regs.h:660</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a7c23de45958fae1715023e3bd96f30c2"><div class="ttname"><a href="dw1000__regs_8h.html#a7c23de45958fae1715023e3bd96f30c2">CHAN_CTRL_TX_PCOD_SHIFT</a></div><div class="ttdeci">#define CHAN_CTRL_TX_PCOD_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00534">dw1000_regs.h:534</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_af95e8a27d2d64e9d76efde5faea194f2"><div class="ttname"><a href="dw1000__regs_8h.html#af95e8a27d2d64e9d76efde5faea194f2">CHAN_CTRL_TNSSFD</a></div><div class="ttdeci">#define CHAN_CTRL_TNSSFD</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00540">dw1000_regs.h:540</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a3711404bc938eba2820bd902e56893b5"><div class="ttname"><a href="dw1000__regs_8h.html#a3711404bc938eba2820bd902e56893b5">LDE_RXANTD_OFFSET</a></div><div class="ttdeci">#define LDE_RXANTD_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01095">dw1000_regs.h:1095</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ac64fce881fe6b4930810091163b48438"><div class="ttname"><a href="dw1000__regs_8h.html#ac64fce881fe6b4930810091163b48438">TX_BUFFER_ID</a></div><div class="ttdeci">#define TX_BUFFER_ID</div><div class="ttdoc">Bit definitions for register TX_BUFFER. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00152">dw1000_regs.h:152</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a229985f938318965d4444b75bf9462e2"><div class="ttname"><a href="dw1000__device__api_8h.html#a229985f938318965d4444b75bf9462e2">dwt_setdelayedtrxtime</a></div><div class="ttdeci">void dwt_setdelayedtrxtime(uint32 starttime)</div></div>
<div class="ttc" id="dw1000__regs_8h_html_add3ddbf02e72afe5f25b18a31625fa34"><div class="ttname"><a href="dw1000__regs_8h.html#add3ddbf02e72afe5f25b18a31625fa34">EVC_STO_OFFSET</a></div><div class="ttdeci">#define EVC_STO_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01147">dw1000_regs.h:1147</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a010589037eade55b18f20b926ba264a7"><div class="ttname"><a href="dw1000__device_8c.html#a010589037eade55b18f20b926ba264a7">FORCE_SYS_XTI</a></div><div class="ttdeci">#define FORCE_SYS_XTI</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00032">dw1000_device.c:32</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a3f5674007a283f63fbd7a85a6945118e"><div class="ttname"><a href="dw1000__device__api_8h.html#a3f5674007a283f63fbd7a85a6945118e">DWT_SIG_RX_TIMEOUT</a></div><div class="ttdeci">#define DWT_SIG_RX_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00110">dw1000_device_api.h:110</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a1d951851b6b206c2370fe622c3e39f9d"><div class="ttname"><a href="structdwt__local__data__t.html#a1d951851b6b206c2370fe622c3e39f9d">dwt_local_data_t::dwt_rxcallback</a></div><div class="ttdeci">void(* dwt_rxcallback)(const dwt_callback_data_t *rxd)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00097">dw1000_device.c:97</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a6e5c161278f26a1500644b28715dd515"><div class="ttname"><a href="dw1000__regs_8h.html#a6e5c161278f26a1500644b28715dd515">CHAN_CTRL_TX_CHAN_MASK</a></div><div class="ttdeci">#define CHAN_CTRL_TX_CHAN_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00521">dw1000_regs.h:521</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a9e04ed937ee4bfb2c47c3a3c15d1cc31"><div class="ttname"><a href="dw1000__device__api_8h.html#a9e04ed937ee4bfb2c47c3a3c15d1cc31">DWT_PHRMODE_EXT</a></div><div class="ttdeci">#define DWT_PHRMODE_EXT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00126">dw1000_device_api.h:126</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a8fe825c8c1e98b3cc59247afd74c3286"><div class="ttname"><a href="dw1000__regs_8h.html#a8fe825c8c1e98b3cc59247afd74c3286">FS_XTALT_OFFSET</a></div><div class="ttdeci">#define FS_XTALT_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00970">dw1000_regs.h:970</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a7499ef85fe79d4c8d2f68fd430192944"><div class="ttname"><a href="dw1000__regs_8h.html#a7499ef85fe79d4c8d2f68fd430192944">LDE_CFG1_OFFSET</a></div><div class="ttdeci">#define LDE_CFG1_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01084">dw1000_regs.h:1084</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a101a968eecb54ce0e8d886da091915d7"><div class="ttname"><a href="dw1000__device_8c.html#a101a968eecb54ce0e8d886da091915d7">LDOTUNE_ADDRESS</a></div><div class="ttdeci">#define LDOTUNE_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00129">dw1000_device.c:129</a></div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_a2368f9f1f6f26cdac85e5b6dec40ce70"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#a2368f9f1f6f26cdac85e5b6dec40ce70">dwt_deviceentcnts_t::PTO</a></div><div class="ttdeci">uint16 PTO</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00279">dw1000_device_api.h:279</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a286f8631b54316de0b5b2ee2c1786828"><div class="ttname"><a href="dw1000__regs_8h.html#a286f8631b54316de0b5b2ee2c1786828">GPIO_MODE_LEN</a></div><div class="ttdeci">#define GPIO_MODE_LEN</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00644">dw1000_regs.h:644</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a28e0bd26789e64f72cb904b72264676b"><div class="ttname"><a href="dw1000__regs_8h.html#a28e0bd26789e64f72cb904b72264676b">CHAN_CTRL_TNSSFD_SHIFT</a></div><div class="ttdeci">#define CHAN_CTRL_TNSSFD_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00541">dw1000_regs.h:541</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a8e392295edbd6d0b72dc9687f03dc671"><div class="ttname"><a href="dw1000__device__api_8h.html#a8e392295edbd6d0b72dc9687f03dc671">DWT_RX_SNIFF</a></div><div class="ttdeci">#define DWT_RX_SNIFF</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00817">dw1000_device_api.h:817</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_ad05be2265afb31a2b4b39a68d55015c2"><div class="ttname"><a href="dw1000__device_8c.html#ad05be2265afb31a2b4b39a68d55015c2">dwt_read16bitoffsetreg</a></div><div class="ttdeci">uint16 dwt_read16bitoffsetreg(int regFileID, int regOffset)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01429">dw1000_device.c:1429</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a6441643397dca72c0db3008d26136275"><div class="ttname"><a href="dw1000__device__api_8h.html#a6441643397dca72c0db3008d26136275">DWT_RESPONSE_EXPECTED</a></div><div class="ttdeci">#define DWT_RESPONSE_EXPECTED</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00131">dw1000_device_api.h:131</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ae8b6e63a26f78e4657dda1ddbb8dcbe2"><div class="ttname"><a href="dw1000__regs_8h.html#ae8b6e63a26f78e4657dda1ddbb8dcbe2">CHAN_CTRL_TX_CHAN_SHIFT</a></div><div class="ttdeci">#define CHAN_CTRL_TX_CHAN_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00522">dw1000_regs.h:522</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a4ae9b2f0900bcea30b64b66b8b9efc51"><div class="ttname"><a href="dw1000__device__api_8h.html#a4ae9b2f0900bcea30b64b66b8b9efc51">DWT_DEVICE_ID</a></div><div class="ttdeci">#define DWT_DEVICE_ID</div><div class="ttdoc">DW1000 MP device ID. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00074">dw1000_device_api.h:74</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a1c8bd713f3bced4169f76a487d0f59b1"><div class="ttname"><a href="dw1000__regs_8h.html#a1c8bd713f3bced4169f76a487d0f59b1">RX_FINFO_RXPACC_SHIFT</a></div><div class="ttdeci">#define RX_FINFO_RXPACC_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00338">dw1000_regs.h:338</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a6e7053436fe236bd9942eac0e199d030"><div class="ttname"><a href="dw1000__device_8c.html#a6e7053436fe236bd9942eac0e199d030">dwt_xtaltrim</a></div><div class="ttdeci">void dwt_xtaltrim(uint8 value)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l03492">dw1000_device.c:3492</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a2b75469680e446c4158dcf03afec9f27"><div class="ttname"><a href="dw1000__regs_8h.html#a2b75469680e446c4158dcf03afec9f27">SYS_STATUS_RXPTO</a></div><div class="ttdeci">#define SYS_STATUS_RXPTO</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00268">dw1000_regs.h:268</a></div></div>
<div class="ttc" id="dw1000__param__types_8h_html_a1711dbfcb13505b68ed461b0b55e4a6d"><div class="ttname"><a href="dw1000__param__types_8h.html#a1711dbfcb13505b68ed461b0b55e4a6d">rx_config</a></div><div class="ttdeci">const uint8 rx_config[NUM_BW]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__params__init_8c_source.html#l00058">dw1000_params_init.c:58</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a482777627c9f1b1f8cf5adb806a5c3a3"><div class="ttname"><a href="structdwt__local__data__t.html#a482777627c9f1b1f8cf5adb806a5c3a3">dwt_local_data_t::rftxDly</a></div><div class="ttdeci">uint16 rftxDly</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00079">dw1000_device.c:79</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ad1a4682c7378f1f98513925510e92fa8"><div class="ttname"><a href="dw1000__regs_8h.html#ad1a4682c7378f1f98513925510e92fa8">PMSC_CTRL1_PKTSEQ_DISABLE</a></div><div class="ttdeci">#define PMSC_CTRL1_PKTSEQ_DISABLE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01227">dw1000_regs.h:1227</a></div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_a5a23d6b64c0e891a362aed9391ca1096"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#a5a23d6b64c0e891a362aed9391ca1096">dwt_deviceentcnts_t::ARFE</a></div><div class="ttdeci">uint16 ARFE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00276">dw1000_device_api.h:276</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ad389596ece63a326843e9f4d817491da"><div class="ttname"><a href="dw1000__regs_8h.html#ad389596ece63a326843e9f4d817491da">TX_TIME_ID</a></div><div class="ttdeci">#define TX_TIME_ID</div><div class="ttdoc">Bit definitions for register. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00426">dw1000_regs.h:426</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a73304dc6734f8875546721da605a0fd3"><div class="ttname"><a href="dw1000__device__api_8h.html#a73304dc6734f8875546721da605a0fd3">dwt_setpreambledetecttimeout</a></div><div class="ttdeci">void dwt_setpreambledetecttimeout(uint16 timeout)</div></div>
<div class="ttc" id="structdwt__local__data__t_html_a5a2dd846e1a10ed5412c9f4d6573483f"><div class="ttname"><a href="structdwt__local__data__t.html#a5a2dd846e1a10ed5412c9f4d6573483f">dwt_local_data_t::dwt_txcallback</a></div><div class="ttdeci">void(* dwt_txcallback)(const dwt_callback_data_t *txd)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00096">dw1000_device.c:96</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a1cd67a43bfd6a00112880c5aa96ce6ff"><div class="ttname"><a href="dw1000__regs_8h.html#a1cd67a43bfd6a00112880c5aa96ce6ff">DIAG_TMC_TX_PSTM</a></div><div class="ttdeci">#define DIAG_TMC_TX_PSTM</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01180">dw1000_regs.h:1180</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_afaba7d9ecbab0d415786401508f3f32b"><div class="ttname"><a href="dw1000__regs_8h.html#afaba7d9ecbab0d415786401508f3f32b">SYS_STATUS_RXPHD</a></div><div class="ttdeci">#define SYS_STATUS_RXPHD</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00257">dw1000_regs.h:257</a></div></div>
<div class="ttc" id="dw1000__mutex_8c_html_a8f6fe52668f9a5399c39562acf696236"><div class="ttname"><a href="dw1000__mutex_8c.html#a8f6fe52668f9a5399c39562acf696236">decamutexoff</a></div><div class="ttdeci">void decamutexoff(decaIrqStatus_t s)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__mutex_8c_source.html#l00081">dw1000_mutex.c:81</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a1754d490d290ea2c1a2ad4d933edbaf1"><div class="ttname"><a href="dw1000__regs_8h.html#a1754d490d290ea2c1a2ad4d933edbaf1">PMSC_ID</a></div><div class="ttdeci">#define PMSC_ID</div><div class="ttdoc">Bit definitions for register PMSC. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01197">dw1000_regs.h:1197</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a71615163f91308dc3a6525fe9cc43d49"><div class="ttname"><a href="dw1000__device_8c.html#a71615163f91308dc3a6525fe9cc43d49">dwt_readdevid</a></div><div class="ttdeci">uint32 dwt_readdevid(void)</div><div class="ttdoc">This is used to return the read device tyoe and revision information of the DW1000 device (MP part is...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00476">dw1000_device.c:476</a></div></div>
<div class="ttc" id="dw1000__param__types_8h_html_a7688bc6153660b67559098f43cf3d295"><div class="ttname"><a href="dw1000__param__types_8h.html#a7688bc6153660b67559098f43cf3d295">dtune1</a></div><div class="ttdeci">const uint16 dtune1[NUM_PRF]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__params__init_8c_source.html#l00095">dw1000_params_init.c:95</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ae9809046167ae9fb63760eee79096cab"><div class="ttname"><a href="dw1000__device__api_8h.html#ae9809046167ae9fb63760eee79096cab">DWT_ERROR</a></div><div class="ttdeci">#define DWT_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00070">dw1000_device_api.h:70</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ad8f994a2ff2e5aa3ed84f58e7bec72f7"><div class="ttname"><a href="dw1000__regs_8h.html#ad8f994a2ff2e5aa3ed84f58e7bec72f7">ACK_RESP_T_W4R_TIM_MASK</a></div><div class="ttdeci">#define ACK_RESP_T_W4R_TIM_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00462">dw1000_regs.h:462</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a4ac9263c79128eeb209238ca42174a75"><div class="ttname"><a href="dw1000__device__api_8h.html#a4ac9263c79128eeb209238ca42174a75">dwt_readtxtimestamphi32</a></div><div class="ttdeci">uint32 dwt_readtxtimestamphi32(void)</div></div>
<div class="ttc" id="dw1000__device__api_8h_html_afedfcae1e004c4fec65986583fdac581"><div class="ttname"><a href="dw1000__device__api_8h.html#afedfcae1e004c4fec65986583fdac581">DWT_PLEN_128</a></div><div class="ttdeci">#define DWT_PLEN_128</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00102">dw1000_device_api.h:102</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_add2d46db517c72a04af4ab44ef20937d"><div class="ttname"><a href="dw1000__device__api_8h.html#add2d46db517c72a04af4ab44ef20937d">dwt_setautorxreenable</a></div><div class="ttdeci">void dwt_setautorxreenable(int enable)</div></div>
<div class="ttc" id="structdwt__local__data__t_html_a1edf13f67bcb9a6a6154f08a55e79a57"><div class="ttname"><a href="structdwt__local__data__t.html#a1edf13f67bcb9a6a6154f08a55e79a57">dwt_local_data_t::longFrames</a></div><div class="ttdeci">uint8 longFrames</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00075">dw1000_device.c:75</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aa92f33f5e885c9b027aa981257a7cda6"><div class="ttname"><a href="dw1000__regs_8h.html#aa92f33f5e885c9b027aa981257a7cda6">CLEAR_ALLRXERROR_EVENTS</a></div><div class="ttdeci">#define CLEAR_ALLRXERROR_EVENTS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00291">dw1000_regs.h:291</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a6234c079d27cfada8bd5400f513a7d27"><div class="ttname"><a href="dw1000__device_8c.html#a6234c079d27cfada8bd5400f513a7d27">FORCE_TX_PLL</a></div><div class="ttdeci">#define FORCE_TX_PLL</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00039">dw1000_device.c:39</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_adde6aaee8457bee49c2a92621fe22b79"><div class="ttname"><a href="dw1000__device__api_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a></div><div class="ttdeci">unsigned char uint8</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00025">dw1000_device_api.h:25</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a9c6d3e939a818b86a682f5036d28a949"><div class="ttname"><a href="dw1000__regs_8h.html#a9c6d3e939a818b86a682f5036d28a949">AON_WCFG_OFFSET</a></div><div class="ttdeci">#define AON_WCFG_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00983">dw1000_regs.h:983</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_af05017acf98ec3287d38698524ff05fb"><div class="ttname"><a href="structdwt__local__data__t.html#af05017acf98ec3287d38698524ff05fb">dwt_local_data_t::wait4resp</a></div><div class="ttdeci">uint8 wait4resp</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00091">dw1000_device.c:91</a></div></div>
<div class="ttc" id="adapter_8cpp_html_a5aa5ecad969a97fcf19db42fba5ac6e5"><div class="ttname"><a href="adapter_8cpp.html#a5aa5ecad969a97fcf19db42fba5ac6e5">memcpy</a></div><div class="ttdeci">memcpy(AdapterGeneral.PermanentMacAddress, &amp;AdapterContext-&gt;ExtendedAddress, sizeof(AdapterContext-&gt;ExtendedAddress))</div></div>
<div class="ttc" id="dw1000__device_8c_html_a4e5df7aa58d54bd47d6d585be971a9a8"><div class="ttname"><a href="dw1000__device_8c.html#a4e5df7aa58d54bd47d6d585be971a9a8">dwt_configuresleepcnt</a></div><div class="ttdeci">void dwt_configuresleepcnt(uint16 sleepcnt)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01983">dw1000_device.c:1983</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a72ae86bde280af3cd6e4e76d85839c8a"><div class="ttname"><a href="dw1000__device_8c.html#a72ae86bde280af3cd6e4e76d85839c8a">_dwt_aonarrayupload</a></div><div class="ttdeci">void _dwt_aonarrayupload(void)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01939">dw1000_device.c:1939</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_acc7fd66b9522ee84bf223818b5205e53"><div class="ttname"><a href="dw1000__device_8c.html#acc7fd66b9522ee84bf223818b5205e53">dwt_seteui</a></div><div class="ttdeci">void dwt_seteui(uint8 *eui64)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01595">dw1000_device.c:1595</a></div></div>
<div class="ttc" id="structdwt__rxdiag__t_html_a47380731609deb04b468609fd187135e"><div class="ttname"><a href="structdwt__rxdiag__t.html#a47380731609deb04b468609fd187135e">dwt_rxdiag_t::firstPathAmp1</a></div><div class="ttdeci">uint16 firstPathAmp1</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00257">dw1000_device_api.h:257</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a481b2d8e32283f3f315cf714d1cb1e3b"><div class="ttname"><a href="dw1000__regs_8h.html#a481b2d8e32283f3f315cf714d1cb1e3b">GPIO_DIR_LEN</a></div><div class="ttdeci">#define GPIO_DIR_LEN</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00666">dw1000_regs.h:666</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a2ff4c5394c8583d71765e7a0625c4b4d"><div class="ttname"><a href="dw1000__device__api_8h.html#a2ff4c5394c8583d71765e7a0625c4b4d">dwt_readwakeuptemp</a></div><div class="ttdeci">uint8 dwt_readwakeuptemp(void)</div></div>
<div class="ttc" id="dw1000__regs_8h_html_ade323f926df2c969ab7a86c32611991f"><div class="ttname"><a href="dw1000__regs_8h.html#ade323f926df2c969ab7a86c32611991f">CLEAR_ALLTX_EVENTS</a></div><div class="ttdeci">#define CLEAR_ALLTX_EVENTS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00295">dw1000_regs.h:295</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a003284037d9aea4e24d9fb3e2d18cafd"><div class="ttname"><a href="dw1000__regs_8h.html#a003284037d9aea4e24d9fb3e2d18cafd">OTP_CTRL_OTPPROG</a></div><div class="ttdeci">#define OTP_CTRL_OTPPROG</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01049">dw1000_regs.h:1049</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ac8174986655fe20117216ecbb6e77b64"><div class="ttname"><a href="dw1000__device__api_8h.html#ac8174986655fe20117216ecbb6e77b64">dwt_setsmarttxpower</a></div><div class="ttdeci">void dwt_setsmarttxpower(int enable)</div></div>
<div class="ttc" id="dw1000__device__api_8h_html_aec89ed98fa489c1e5eb55325803acf37"><div class="ttname"><a href="dw1000__device__api_8h.html#aec89ed98fa489c1e5eb55325803acf37">DWT_PLEN_512</a></div><div class="ttdeci">#define DWT_PLEN_512</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00100">dw1000_device_api.h:100</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a0c1366f605d7cb9683a84bda99b53774"><div class="ttname"><a href="dw1000__device__api_8h.html#a0c1366f605d7cb9683a84bda99b53774">DWT_PLEN_64</a></div><div class="ttdeci">#define DWT_PLEN_64</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00103">dw1000_device_api.h:103</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a6e8706c8b1102e6a43fd0a3873b5726c"><div class="ttname"><a href="dw1000__regs_8h.html#a6e8706c8b1102e6a43fd0a3873b5726c">SYS_STATUS_TXERR</a></div><div class="ttdeci">#define SYS_STATUS_TXERR</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00285">dw1000_regs.h:285</a></div></div>
<div class="ttc" id="structdwt__callback__data__t_html_a60ce61b06367fc8be51dd47a8a444f75"><div class="ttname"><a href="structdwt__callback__data__t.html#a60ce61b06367fc8be51dd47a8a444f75">dwt_callback_data_t::dblbuff</a></div><div class="ttdeci">uint8 dblbuff</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00194">dw1000_device_api.h:194</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a8da77421be588eca9972afb49d5e3892"><div class="ttname"><a href="dw1000__regs_8h.html#a8da77421be588eca9972afb49d5e3892">FS_XTALT_MASK</a></div><div class="ttdeci">#define FS_XTALT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00972">dw1000_regs.h:972</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a11f462ab243c702b3195eb09311f9c59"><div class="ttname"><a href="dw1000__device__api_8h.html#a11f462ab243c702b3195eb09311f9c59">dwt_readeventcounters</a></div><div class="ttdeci">void dwt_readeventcounters(dwt_deviceentcnts_t *counters)</div></div>
<div class="ttc" id="dw1000__device_8c_html_afeff9ca5ba9832312c5d739e88e5d050"><div class="ttname"><a href="dw1000__device_8c.html#afeff9ca5ba9832312c5d739e88e5d050">dwt_readantennadelay</a></div><div class="ttdeci">uint16 dwt_readantennadelay(uint8 prf)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00783">dw1000_device.c:783</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html"><div class="ttname"><a href="dw1000__regs_8h.html">dw1000_regs.h</a></div><div class="ttdoc">DW1000 Register Definitions This file supports assembler and C development for DW1000 enabled devices...</div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a50935da0766a1910ee4a5cb997d56433"><div class="ttname"><a href="dw1000__device__api_8h.html#a50935da0766a1910ee4a5cb997d56433">DWT_PLEN_4096</a></div><div class="ttdeci">#define DWT_PLEN_4096</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00096">dw1000_device_api.h:96</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a473fc1d0c26c25966d48545ef3a233f7"><div class="ttname"><a href="structdwt__local__data__t.html#a473fc1d0c26c25966d48545ef3a233f7">dwt_local_data_t::txPowCfg</a></div><div class="ttdeci">uint32 txPowCfg[12]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00085">dw1000_device.c:85</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_abdb48465a9bee40a54a7286f9b2a6880"><div class="ttname"><a href="dw1000__regs_8h.html#abdb48465a9bee40a54a7286f9b2a6880">AON_CTRL_OFFSET</a></div><div class="ttdeci">#define AON_CTRL_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00994">dw1000_regs.h:994</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aaf07b88c1b2932a520dc48edd32ff1f8"><div class="ttname"><a href="dw1000__regs_8h.html#aaf07b88c1b2932a520dc48edd32ff1f8">SYS_CFG_DIS_STXP</a></div><div class="ttdeci">#define SYS_CFG_DIS_STXP</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00084">dw1000_regs.h:84</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a557c193730791047a837527c41fdf078"><div class="ttname"><a href="dw1000__device__api_8h.html#a557c193730791047a837527c41fdf078">dwt_readsystimestamphi32</a></div><div class="ttdeci">uint32 dwt_readsystimestamphi32(void)</div></div>
<div class="ttc" id="dw1000__device_8c_html_addd22339317f8737147dd76e7f0acbff"><div class="ttname"><a href="dw1000__device_8c.html#addd22339317f8737147dd76e7f0acbff">TREK_ANTDLY_1</a></div><div class="ttdeci">#define TREK_ANTDLY_1</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00138">dw1000_device.c:138</a></div></div>
<div class="ttc" id="structdwt__rxdiag__t_html_a11ee229e165435c84c19e85cf14bd42f"><div class="ttname"><a href="structdwt__rxdiag__t.html#a11ee229e165435c84c19e85cf14bd42f">dwt_rxdiag_t::stdNoise</a></div><div class="ttdeci">uint16 stdNoise</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00258">dw1000_device_api.h:258</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a6c1bfd6270ab6fab0cb93d95103f3bef"><div class="ttname"><a href="dw1000__regs_8h.html#a6c1bfd6270ab6fab0cb93d95103f3bef">SYS_STATUS_RXRFSL</a></div><div class="ttdeci">#define SYS_STATUS_RXRFSL</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00263">dw1000_regs.h:263</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_adb609995a7c8abe5daca5d463dfb1862"><div class="ttname"><a href="dw1000__regs_8h.html#adb609995a7c8abe5daca5d463dfb1862">GPIO_PIN5_EXTTXE_8</a></div><div class="ttdeci">#define GPIO_PIN5_EXTTXE_8</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00661">dw1000_regs.h:661</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a77353b21876b56439ed438b10896286b"><div class="ttname"><a href="dw1000__regs_8h.html#a77353b21876b56439ed438b10896286b">GPIO_PIN6_EXTRXE_8</a></div><div class="ttdeci">#define GPIO_PIN6_EXTRXE_8</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00662">dw1000_regs.h:662</a></div></div>
<div class="ttc" id="structdwt__callback__data__t_html_a8aad0a2165972f403530ddf8101c0e67"><div class="ttname"><a href="structdwt__callback__data__t.html#a8aad0a2165972f403530ddf8101c0e67">dwt_callback_data_t::event</a></div><div class="ttdeci">uint8 event</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00190">dw1000_device_api.h:190</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a4b435a49c74bb91f284f075e63416cb6"><div class="ttname"><a href="dw1000__device__api_8h.html#a4b435a49c74bb91f284f075e63416cb6">uint32</a></div><div class="ttdeci">unsigned long uint32</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00039">dw1000_device_api.h:39</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a569a6d7f6705a80612965eb77aa378de"><div class="ttname"><a href="dw1000__device_8c.html#a569a6d7f6705a80612965eb77aa378de">TREK_ANTDLY_3</a></div><div class="ttdeci">#define TREK_ANTDLY_3</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00140">dw1000_device.c:140</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a59fba4244424c2f085ff3c722b53e549"><div class="ttname"><a href="dw1000__regs_8h.html#a59fba4244424c2f085ff3c722b53e549">SYS_STATUS_RXSFDTO</a></div><div class="ttdeci">#define SYS_STATUS_RXSFDTO</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00274">dw1000_regs.h:274</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html"><div class="ttname"><a href="structdwt__local__data__t.html">dwt_local_data_t</a></div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00069">dw1000_device.c:69</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a0c17221ed7c973aba944f41f2cadd621"><div class="ttname"><a href="dw1000__device__api_8h.html#a0c17221ed7c973aba944f41f2cadd621">dwt_read32bitreg</a></div><div class="ttdeci">#define dwt_read32bitreg(x)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l01578">dw1000_device_api.h:1578</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aae45551250eda54d9746db689ae50688"><div class="ttname"><a href="dw1000__regs_8h.html#aae45551250eda54d9746db689ae50688">OTP_CTRL_OTPRDEN</a></div><div class="ttdeci">#define OTP_CTRL_OTPRDEN</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01046">dw1000_regs.h:1046</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ae90a40ed84747ac4c7b722553016455d"><div class="ttname"><a href="dw1000__device__api_8h.html#ae90a40ed84747ac4c7b722553016455d">DWT_SIG_RX_PTOTIMEOUT</a></div><div class="ttdeci">#define DWT_SIG_RX_PTOTIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00116">dw1000_device_api.h:116</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_aee2624cc9a80e6815b914c13a31b13c4"><div class="ttname"><a href="dw1000__device_8c.html#aee2624cc9a80e6815b914c13a31b13c4">dwt_setrxantennadelay</a></div><div class="ttdeci">void dwt_setrxantennadelay(uint16 rxDelay)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00742">dw1000_device.c:742</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a5422bbd6f1e33f216e8a12decb29a6c9"><div class="ttname"><a href="dw1000__regs_8h.html#a5422bbd6f1e33f216e8a12decb29a6c9">RX_SNIFF_ID</a></div><div class="ttdeci">#define RX_SNIFF_ID</div><div class="ttdoc">Bit definitions for register RX_SNIFF Sniff Mode Configuration or Pulsed Preamble Reception Configura...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00479">dw1000_regs.h:479</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a5b3c15de4ef4cd357ab27395fddb1334"><div class="ttname"><a href="dw1000__regs_8h.html#a5b3c15de4ef4cd357ab27395fddb1334">CHAN_CTRL_DWSFD</a></div><div class="ttdeci">#define CHAN_CTRL_DWSFD</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00538">dw1000_regs.h:538</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ae46706c2abd00be022094a51cd95e70d"><div class="ttname"><a href="dw1000__regs_8h.html#ae46706c2abd00be022094a51cd95e70d">EVC_FCG_OFFSET</a></div><div class="ttdeci">#define EVC_FCG_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01129">dw1000_regs.h:1129</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a3fc76d75d4bef1c9860a39e707ea6cff"><div class="ttname"><a href="dw1000__regs_8h.html#a3fc76d75d4bef1c9860a39e707ea6cff">AON_CFG0_OFFSET</a></div><div class="ttdeci">#define AON_CFG0_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01010">dw1000_regs.h:1010</a></div></div>
<div class="ttc" id="dw1000__driver_8h_html"><div class="ttname"><a href="dw1000__driver_8h.html">dw1000_driver.h</a></div><div class="ttdoc">This file defines the DW1000 Radio Driver Interface for OpenThread. </div></div>
<div class="ttc" id="dw1000__regs_8h_html_aa2be3fbb26192809a2582881b0fc2f71"><div class="ttname"><a href="dw1000__regs_8h.html#aa2be3fbb26192809a2582881b0fc2f71">CHAN_CTRL_RX_PCOD_SHIFT</a></div><div class="ttdeci">#define CHAN_CTRL_RX_PCOD_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00536">dw1000_regs.h:536</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_afc523ef07e91de3b69d41a60d4d3b4d8"><div class="ttname"><a href="dw1000__device_8c.html#afc523ef07e91de3b69d41a60d4d3b4d8">dwt_read32bitoffsetreg</a></div><div class="ttdeci">uint32 dwt_read32bitoffsetreg(int regFileID, int regOffset)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01396">dw1000_device.c:1396</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a659796dad40972afb8d683ef325873bf"><div class="ttname"><a href="dw1000__regs_8h.html#a659796dad40972afb8d683ef325873bf">CHAN_CTRL_ID</a></div><div class="ttdeci">#define CHAN_CTRL_ID</div><div class="ttdoc">Bit definitions for register CHAN_CTRL. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00517">dw1000_regs.h:517</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_adf96d50819a30315bf809595af4b92ce"><div class="ttname"><a href="dw1000__device_8c.html#adf96d50819a30315bf809595af4b92ce">dwt_syncrxbufptrs</a></div><div class="ttdeci">void dwt_syncrxbufptrs(void)</div><div class="ttdoc">this function synchronizes rx buffer pointers need to make sure that the host/IC buffer pointers are ...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l03139">dw1000_device.c:3139</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_af7a34f290dbabd0881b1c140ae3a3152"><div class="ttname"><a href="dw1000__regs_8h.html#af7a34f290dbabd0881b1c140ae3a3152">RX_FINFO_ID</a></div><div class="ttdeci">#define RX_FINFO_ID</div><div class="ttdoc">Bit definitions for register RX_FINFO. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00302">dw1000_regs.h:302</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a20a9c6e55b79ee01f3d04b06ad3bf3c6"><div class="ttname"><a href="dw1000__device_8c.html#a20a9c6e55b79ee01f3d04b06ad3bf3c6">PARTID_ADDRESS</a></div><div class="ttdeci">#define PARTID_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00130">dw1000_device.c:130</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ab6e5e6c06cf4e719d7268dd73267304a"><div class="ttname"><a href="dw1000__regs_8h.html#ab6e5e6c06cf4e719d7268dd73267304a">LDE_IF_ID</a></div><div class="ttdeci">#define LDE_IF_ID</div><div class="ttdoc">Bit definitions for register LDE_IF Refer to section 7.2.47 Register file: 0x2E  Leading Edge Detect...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01078">dw1000_regs.h:1078</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_afcdf3884c77becf8c5948844dc0fc464"><div class="ttname"><a href="dw1000__device_8c.html#afcdf3884c77becf8c5948844dc0fc464">dwt_entersleepaftertx</a></div><div class="ttdeci">void dwt_entersleepaftertx(int enable)</div><div class="ttdoc">sets the auto TX to sleep bit. This means that after a frame transmission the device will enter deep ...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l02158">dw1000_device.c:2158</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a7c0e09f46b275ca9a194f85fbfebcffd"><div class="ttname"><a href="dw1000__regs_8h.html#a7c0e09f46b275ca9a194f85fbfebcffd">TC_SARL_SAR_C</a></div><div class="ttdeci">#define TC_SARL_SAR_C</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00913">dw1000_regs.h:913</a></div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_a613e93a937be1b33fa54b03b87b1ff5c"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#a613e93a937be1b33fa54b03b87b1ff5c">dwt_deviceentcnts_t::TXF</a></div><div class="ttdeci">uint16 TXF</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00281">dw1000_device_api.h:281</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ae44706401ccd1e20173d59b1c1e4cfca"><div class="ttname"><a href="dw1000__device__api_8h.html#ae44706401ccd1e20173d59b1c1e4cfca">dwt_configeventcounters</a></div><div class="ttdeci">void dwt_configeventcounters(int enable)</div></div>
<div class="ttc" id="dw1000__regs_8h_html_a31270e00443e51812405a091c488a9d2"><div class="ttname"><a href="dw1000__regs_8h.html#a31270e00443e51812405a091c488a9d2">SYS_TIME_ID</a></div><div class="ttdeci">#define SYS_TIME_ID</div><div class="ttdoc">Bit definitions for register SYS_TIME. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00096">dw1000_regs.h:96</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aeb3669eeaadb76019385b31e1a249479"><div class="ttname"><a href="dw1000__regs_8h.html#aeb3669eeaadb76019385b31e1a249479">SYS_CTRL_HRBT_OFFSET</a></div><div class="ttdeci">#define SYS_CTRL_HRBT_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00195">dw1000_regs.h:195</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a504054184f85d8d00694d85646e61753"><div class="ttname"><a href="dw1000__device_8c.html#a504054184f85d8d00694d85646e61753">read_data</a></div><div class="ttdeci">uint8 read_data[150]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00026">dw1000_device.c:26</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a10b694f9e185f8565c0a95d33c0f4c80"><div class="ttname"><a href="dw1000__regs_8h.html#a10b694f9e185f8565c0a95d33c0f4c80">FS_PLLCFG_OFFSET</a></div><div class="ttdeci">#define FS_PLLCFG_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00949">dw1000_regs.h:949</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a8fab147ea1692d2bf7b881c6b6799ed6"><div class="ttname"><a href="structdwt__local__data__t.html#a8fab147ea1692d2bf7b881c6b6799ed6">dwt_local_data_t::prfIndex</a></div><div class="ttdeci">int prfIndex</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00092">dw1000_device.c:92</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aa2a5bbbcb74757aecf837db663892f63"><div class="ttname"><a href="dw1000__regs_8h.html#aa2a5bbbcb74757aecf837db663892f63">GPIO_MODE_OFFSET</a></div><div class="ttdeci">#define GPIO_MODE_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00643">dw1000_regs.h:643</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a10efba33150fe2510ff0d45f77c850c4"><div class="ttname"><a href="dw1000__device__api_8h.html#a10efba33150fe2510ff0d45f77c850c4">DWT_PLEN_1536</a></div><div class="ttdeci">#define DWT_PLEN_1536</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00098">dw1000_device_api.h:98</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a0269e8f64a16462de0ca2b204348972b"><div class="ttname"><a href="dw1000__device_8c.html#a0269e8f64a16462de0ca2b204348972b">dwt_write16bitoffsetreg</a></div><div class="ttdeci">int dwt_write16bitoffsetreg(int regFileID, int regOffset, uint16 regval)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l01459">dw1000_device.c:1459</a></div></div>
<div class="ttc" id="dw1000__param__types_8h_html_a8ec5815e10a440fb38d1562e74ebfe26"><div class="ttname"><a href="dw1000__param__types_8h.html#a8ec5815e10a440fb38d1562e74ebfe26">agc_config</a></div><div class="ttdeci">const agc_cfg_struct agc_config</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__params__init_8c_source.html#l00065">dw1000_params_init.c:65</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a2716f5b1cbe0af9f440eca2630ab3277"><div class="ttname"><a href="dw1000__device__api_8h.html#a2716f5b1cbe0af9f440eca2630ab3277">dwt_setrxmode</a></div><div class="ttdeci">void dwt_setrxmode(int mode, uint8 rxON, uint8 rxOFF)</div></div>
<div class="ttc" id="dw1000__regs_8h_html_ab22cd81ecf063bed0870875c16c368e4"><div class="ttname"><a href="dw1000__regs_8h.html#ab22cd81ecf063bed0870875c16c368e4">SYS_STATUS_RXPHE</a></div><div class="ttdeci">#define SYS_STATUS_RXPHE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00258">dw1000_regs.h:258</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a7c6e63f591e4cc18c89bc8698f4609ea"><div class="ttname"><a href="dw1000__device_8c.html#a7c6e63f591e4cc18c89bc8698f4609ea">READ_ACC_OFF</a></div><div class="ttdeci">#define READ_ACC_OFF</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00036">dw1000_device.c:36</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a2743654604f937f66bf998ed77c5311a"><div class="ttname"><a href="dw1000__regs_8h.html#a2743654604f937f66bf998ed77c5311a">PMSC_CTRL1_ATXSLP</a></div><div class="ttdeci">#define PMSC_CTRL1_ATXSLP</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01220">dw1000_regs.h:1220</a></div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_ac3ab28a7302ad1634b25a9ab779fe018"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#ac3ab28a7302ad1634b25a9ab779fe018">dwt_deviceentcnts_t::PHE</a></div><div class="ttdeci">uint16 PHE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00272">dw1000_device_api.h:272</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aca2a54d91b9bd781fd6b093e811b996a"><div class="ttname"><a href="dw1000__regs_8h.html#aca2a54d91b9bd781fd6b093e811b996a">DIAG_TMC_OFFSET</a></div><div class="ttdeci">#define DIAG_TMC_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01177">dw1000_regs.h:1177</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a48d3d9af1023eb17d672ca546d127e2d"><div class="ttname"><a href="dw1000__regs_8h.html#a48d3d9af1023eb17d672ca546d127e2d">LDE_CFG2_OFFSET</a></div><div class="ttdeci">#define LDE_CFG2_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01098">dw1000_regs.h:1098</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a7dda0978b03da373d6c0fd61d67eff43"><div class="ttname"><a href="dw1000__regs_8h.html#a7dda0978b03da373d6c0fd61d67eff43">SYS_STATUS_AAT</a></div><div class="ttdeci">#define SYS_STATUS_AAT</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00248">dw1000_regs.h:248</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a3de09f88532f3366a9b106968315a082"><div class="ttname"><a href="dw1000__regs_8h.html#a3de09f88532f3366a9b106968315a082">TC_PGTEST_OFFSET</a></div><div class="ttdeci">#define TC_PGTEST_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00934">dw1000_regs.h:934</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a3c48d1d2e1704b78ff0a2f23d203e2be"><div class="ttname"><a href="dw1000__device__api_8h.html#a3c48d1d2e1704b78ff0a2f23d203e2be">DWT_SIG_RX_SYNCLOSS</a></div><div class="ttdeci">#define DWT_SIG_RX_SYNCLOSS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00114">dw1000_device_api.h:114</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a47c17151703c346cfcb1792dfba4afae"><div class="ttname"><a href="structdwt__local__data__t.html#a47c17151703c346cfcb1792dfba4afae">dwt_local_data_t::rfrxDly</a></div><div class="ttdeci">uint16 rfrxDly</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00078">dw1000_device.c:78</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a6d24b4ae981b5b1d6197a9720a45c18e"><div class="ttname"><a href="dw1000__regs_8h.html#a6d24b4ae981b5b1d6197a9720a45c18e">SYS_CFG_DIS_DRXB</a></div><div class="ttdeci">#define SYS_CFG_DIS_DRXB</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00077">dw1000_regs.h:77</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a52fa78420db709170dd76da41662c52e"><div class="ttname"><a href="dw1000__device_8c.html#a52fa78420db709170dd76da41662c52e">ANTDLY_ADDRESS</a></div><div class="ttdeci">#define ANTDLY_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00135">dw1000_device.c:135</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a64622dd183f6b30f00b672e307637fc5"><div class="ttname"><a href="dw1000__regs_8h.html#a64622dd183f6b30f00b672e307637fc5">EXT_SYNC_ID</a></div><div class="ttdeci">#define EXT_SYNC_ID</div><div class="ttdoc">Bit definitions for register EXT_SYNC. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00607">dw1000_regs.h:607</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a357b3fe99717e5b53f9ba7bd1784e809"><div class="ttname"><a href="dw1000__device_8c.html#a357b3fe99717e5b53f9ba7bd1784e809">FORCE_OTP_OFF</a></div><div class="ttdeci">#define FORCE_OTP_OFF</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00038">dw1000_device.c:38</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ad5c2d9596a9d0382fb795561be1ac8ed"><div class="ttname"><a href="dw1000__regs_8h.html#ad5c2d9596a9d0382fb795561be1ac8ed">DRX_TUNE2_OFFSET</a></div><div class="ttdeci">#define DRX_TUNE2_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00843">dw1000_regs.h:843</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a443a4de48862bc328443a744abcc93a7"><div class="ttname"><a href="dw1000__device_8c.html#a443a4de48862bc328443a744abcc93a7">dwt_spicswakeup</a></div><div class="ttdeci">int dwt_spicswakeup(uint8 *buff, uint16 length)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l02189">dw1000_device.c:2189</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a1fa3de4549ef0405c0ef6ab9f0b4f2a4"><div class="ttname"><a href="dw1000__regs_8h.html#a1fa3de4549ef0405c0ef6ab9f0b4f2a4">RX_FWTO_ID</a></div><div class="ttdeci">#define RX_FWTO_ID</div><div class="ttdoc">Bit definitions for register RX_FWTO. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00169">dw1000_regs.h:169</a></div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_ab7eab5e923344b8f7418026cb76e3953"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#ab7eab5e923344b8f7418026cb76e3953">dwt_deviceentcnts_t::SFDTO</a></div><div class="ttdeci">uint16 SFDTO</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00278">dw1000_device_api.h:278</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a478d6ddcbd313039f25241938b8f68ad"><div class="ttname"><a href="dw1000__device__api_8h.html#a478d6ddcbd313039f25241938b8f68ad">DWT_SIG_TX_DONE</a></div><div class="ttdeci">#define DWT_SIG_TX_DONE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00107">dw1000_device_api.h:107</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a283cb6cc72fdec4547bd3ecbe884128d"><div class="ttname"><a href="dw1000__device__api_8h.html#a283cb6cc72fdec4547bd3ecbe884128d">decaIrqStatus_t</a></div><div class="ttdeci">int decaIrqStatus_t</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l01674">dw1000_device_api.h:1674</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a878ff6abe1725173b61ee609b32d9e3c"><div class="ttname"><a href="dw1000__device__api_8h.html#a878ff6abe1725173b61ee609b32d9e3c">DWT_LOADUCODE</a></div><div class="ttdeci">#define DWT_LOADUCODE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00163">dw1000_device_api.h:163</a></div></div>
<div class="ttc" id="structdwt__local__data__t_html_a4270a1ec7815d465a8293e06fea8b0d1"><div class="ttname"><a href="structdwt__local__data__t.html#a4270a1ec7815d465a8293e06fea8b0d1">dwt_local_data_t::ldoTune</a></div><div class="ttdeci">uint32 ldoTune</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00094">dw1000_device.c:94</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_acb2951cc267c1c69f1a53aaafd6ce572"><div class="ttname"><a href="dw1000__regs_8h.html#acb2951cc267c1c69f1a53aaafd6ce572">PMSC_TXFINESEQ_DIS_MASK</a></div><div class="ttdeci">#define PMSC_TXFINESEQ_DIS_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01240">dw1000_regs.h:1240</a></div></div>
<div class="ttc" id="structagc__cfg__struct_html_aab45ead221d7db72ffefbb2673667537"><div class="ttname"><a href="structagc__cfg__struct.html#aab45ead221d7db72ffefbb2673667537">agc_cfg_struct::lo32</a></div><div class="ttdeci">uint32 lo32</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__param__types_8h_source.html#l00031">dw1000_param_types.h:31</a></div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_a23445eef88e22f6889363f1c3daeda7a"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#a23445eef88e22f6889363f1c3daeda7a">dwt_deviceentcnts_t::HPW</a></div><div class="ttdeci">uint16 HPW</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00282">dw1000_device_api.h:282</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a715cdb8ffc7e9714e7396ae950a5942a"><div class="ttname"><a href="dw1000__regs_8h.html#a715cdb8ffc7e9714e7396ae950a5942a">TX_CAL_ID</a></div><div class="ttdeci">#define TX_CAL_ID</div><div class="ttdoc">Bit definitions for register TX_CAL Refer to section 7.2.43 Register file: 0x2A  Transmitter Calibra...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00910">dw1000_regs.h:910</a></div></div>
<div class="ttc" id="dw1000__mutex_8c_html_a9e9a62b0dc20ef9f2f207c2b498638d6"><div class="ttname"><a href="dw1000__mutex_8c.html#a9e9a62b0dc20ef9f2f207c2b498638d6">decamutexon</a></div><div class="ttdeci">decaIrqStatus_t decamutexon(void)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__mutex_8c_source.html#l00056">dw1000_mutex.c:56</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a0bcf8e994fbcae2627f2229a2fc75fab"><div class="ttname"><a href="dw1000__device__api_8h.html#a0bcf8e994fbcae2627f2229a2fc75fab">dwt_readdignostics</a></div><div class="ttdeci">void dwt_readdignostics(dwt_rxdiag_t *diagnostics)</div></div>
<div class="ttc" id="group__nrf__drv__spi_html_gab022e003c9e5f0f946a5ecff0b455405"><div class="ttname"><a href="group__nrf__drv__spi.html#gab022e003c9e5f0f946a5ecff0b455405">nrf_drv_spi_transfer</a></div><div class="ttdeci">ret_code_t nrf_drv_spi_transfer(nrf_drv_spi_t const *const p_instance, uint8_t const *p_tx_buffer, uint8_t tx_buffer_length, uint8_t *p_rx_buffer, uint8_t rx_buffer_length)</div><div class="ttdoc">Function for starting the SPI data transfer. </div><div class="ttdef"><b>Definition:</b> <a href="nrf__drv__spi_8c_source.html#l00334">nrf_drv_spi.c:334</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a8bf334a35563c11450e282f83d11fe1a"><div class="ttname"><a href="dw1000__regs_8h.html#a8bf334a35563c11450e282f83d11fe1a">DRX_PRETOC_OFFSET</a></div><div class="ttdeci">#define DRX_PRETOC_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00856">dw1000_regs.h:856</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_ac8ea6f146c9b816c71c120c427c46d1c"><div class="ttname"><a href="dw1000__device__api_8h.html#ac8ea6f146c9b816c71c120c427c46d1c">DWT_BR_110K</a></div><div class="ttdeci">#define DWT_BR_110K</div><div class="ttdoc">UWB bit rate 110 kbits/s. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00078">dw1000_device_api.h:78</a></div></div>
<div class="ttc" id="dw1000__param__types_8h_html"><div class="ttname"><a href="dw1000__param__types_8h.html">dw1000_param_types.h</a></div><div class="ttdoc">DecaWave general type definitions for configuration structures. </div></div>
<div class="ttc" id="dw1000__device_8c_html_afcc4767611bb3072654065af44d8505c"><div class="ttname"><a href="dw1000__device_8c.html#afcc4767611bb3072654065af44d8505c">dwt_readrxdata</a></div><div class="ttdeci">void dwt_readrxdata(uint8 *buffer, uint16 length, uint16 rxBufferOffset)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00912">dw1000_device.c:912</a></div></div>
<div class="ttc" id="structdwt__rxdiag__t_html_a87b80faad3e045a705ec326002045ae0"><div class="ttname"><a href="structdwt__rxdiag__t.html#a87b80faad3e045a705ec326002045ae0">dwt_rxdiag_t::maxNoise</a></div><div class="ttdeci">uint16 maxNoise</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00256">dw1000_device_api.h:256</a></div></div>
<div class="ttc" id="dw1000__param__types_8h_html_ae48e9f6b3e15e8600bcfe5aa50fffc6f"><div class="ttname"><a href="dw1000__param__types_8h.html#ae48e9f6b3e15e8600bcfe5aa50fffc6f">LDE_PARAM1</a></div><div class="ttdeci">#define LDE_PARAM1</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__param__types_8h_source.html#l00054">dw1000_param_types.h:54</a></div></div>
<div class="ttc" id="structdwt__deviceentcnts__t_html_a0c845521870247af0d31ce862bb43ec3"><div class="ttname"><a href="structdwt__deviceentcnts__t.html#a0c845521870247af0d31ce862bb43ec3">dwt_deviceentcnts_t::TXW</a></div><div class="ttdeci">uint16 TXW</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00283">dw1000_device_api.h:283</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a1a2cfe15de3f84ac190d6baa32c8a510"><div class="ttname"><a href="dw1000__device__api_8h.html#a1a2cfe15de3f84ac190d6baa32c8a510">DWT_LOADXTALTRIM</a></div><div class="ttdeci">#define DWT_LOADXTALTRIM</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00179">dw1000_device_api.h:179</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a1963cc02fc45ce24d84c14f35158c655"><div class="ttname"><a href="dw1000__device_8c.html#a1963cc02fc45ce24d84c14f35158c655">dwt_enableautoack</a></div><div class="ttdeci">void dwt_enableautoack(uint8 responseDelayTime)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l02351">dw1000_device.c:2351</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_aa683afd4dc564e0ea52771969003da03"><div class="ttname"><a href="dw1000__device__api_8h.html#aa683afd4dc564e0ea52771969003da03">dwt_readrxtimestamphi32</a></div><div class="ttdeci">uint32 dwt_readrxtimestamphi32(void)</div></div>
<div class="ttc" id="dw1000__param__types_8h_html_afc946ba42f93d6708a9ac591a628aaff"><div class="ttname"><a href="dw1000__param__types_8h.html#afc946ba42f93d6708a9ac591a628aaff">LDE_PARAM3_16</a></div><div class="ttdeci">#define LDE_PARAM3_16</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__param__types_8h_source.html#l00056">dw1000_param_types.h:56</a></div></div>
<div class="ttc" id="structdwt__callback__data__t_html_af91a4c0bd977c78af5dd4c112bb0bc47"><div class="ttname"><a href="structdwt__callback__data__t.html#af91a4c0bd977c78af5dd4c112bb0bc47">dwt_callback_data_t::status</a></div><div class="ttdeci">uint32 status</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00189">dw1000_device_api.h:189</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a42e4039f1140cedf72ffa58cd9bc7f7a"><div class="ttname"><a href="dw1000__regs_8h.html#a42e4039f1140cedf72ffa58cd9bc7f7a">RF_CONF_ID</a></div><div class="ttdeci">#define RF_CONF_ID</div><div class="ttdoc">Bit definitions for register RF_CONF Analog RF Configuration block Refer to section 7...</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00872">dw1000_regs.h:872</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a90f06e0bbb8091d85bc7b509f051ea2e"><div class="ttname"><a href="dw1000__device_8c.html#a90f06e0bbb8091d85bc7b509f051ea2e">header_write</a></div><div class="ttdeci">uint8 header_write[150]</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00027">dw1000_device.c:27</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_aeeb032f790064644a9a069bbc44ad1df"><div class="ttname"><a href="dw1000__regs_8h.html#aeeb032f790064644a9a069bbc44ad1df">DRX_CONF_ID</a></div><div class="ttdeci">#define DRX_CONF_ID</div><div class="ttdoc">Bit definitions for register DRX_CONF Digital Receiver configuration block. </div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00825">dw1000_regs.h:825</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a452701cb29c5ffd8f4458d5c462ce388"><div class="ttname"><a href="dw1000__regs_8h.html#a452701cb29c5ffd8f4458d5c462ce388">LDE_THRESH_OFFSET</a></div><div class="ttdeci">#define LDE_THRESH_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01081">dw1000_regs.h:1081</a></div></div>
<div class="ttc" id="dw1000__device__api_8h_html_a42c7ec3f8129018a670ca29aae601924"><div class="ttname"><a href="dw1000__device__api_8h.html#a42c7ec3f8129018a670ca29aae601924">dwt_write32bitreg</a></div><div class="ttdeci">#define dwt_write32bitreg(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l01577">dw1000_device_api.h:1577</a></div></div>
<div class="ttc" id="dw1000__device_8c_html_a154babc0b9d233a50a86a46438fdb327"><div class="ttname"><a href="dw1000__device_8c.html#a154babc0b9d233a50a86a46438fdb327">dwt_getotptxpower</a></div><div class="ttdeci">uint32 dwt_getotptxpower(uint8 prf, uint8 chan)</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device_8c_source.html#l00521">dw1000_device.c:521</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a33b18f2b522f5b474e59d0f633debd8f"><div class="ttname"><a href="dw1000__regs_8h.html#a33b18f2b522f5b474e59d0f633debd8f">CHAN_CTRL_RX_PCOD_MASK</a></div><div class="ttdeci">#define CHAN_CTRL_RX_PCOD_MASK</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00535">dw1000_regs.h:535</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a30c37d84da279fb0eded62720670f7b1"><div class="ttname"><a href="dw1000__regs_8h.html#a30c37d84da279fb0eded62720670f7b1">EVC_CLR</a></div><div class="ttdeci">#define EVC_CLR</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01117">dw1000_regs.h:1117</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ad342007f0b84ffdc0ea2c431e40e0e2d"><div class="ttname"><a href="dw1000__regs_8h.html#ad342007f0b84ffdc0ea2c431e40e0e2d">AON_RDAT_OFFSET</a></div><div class="ttdeci">#define AON_RDAT_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01003">dw1000_regs.h:1003</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a3e2e0c8317e28c6ecae0475562d45aac"><div class="ttname"><a href="dw1000__regs_8h.html#a3e2e0c8317e28c6ecae0475562d45aac">SYS_CFG_FFE</a></div><div class="ttdeci">#define SYS_CFG_FFE</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00064">dw1000_regs.h:64</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a70143d2e60953dcd124d3df517ced74c"><div class="ttname"><a href="dw1000__regs_8h.html#a70143d2e60953dcd124d3df517ced74c">OTP_CTRL_LDELOAD</a></div><div class="ttdeci">#define OTP_CTRL_LDELOAD</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01048">dw1000_regs.h:1048</a></div></div>
<div class="ttc" id="structdwt__rxdiag__t_html_a7b0c5c4fdba2ca8415ae81b84769430a"><div class="ttname"><a href="structdwt__rxdiag__t.html#a7b0c5c4fdba2ca8415ae81b84769430a">dwt_rxdiag_t::firstPath</a></div><div class="ttdeci">double firstPath</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__device__api_8h_source.html#l00265">dw1000_device_api.h:265</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_ac83cc134209f5b84356886520498240b"><div class="ttname"><a href="dw1000__regs_8h.html#ac83cc134209f5b84356886520498240b">RF_RXCTRLH_OFFSET</a></div><div class="ttdeci">#define RF_RXCTRLH_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l00882">dw1000_regs.h:882</a></div></div>
<div class="ttc" id="dw1000__regs_8h_html_a4330130be1fda12272189e9fe44d3a46"><div class="ttname"><a href="dw1000__regs_8h.html#a4330130be1fda12272189e9fe44d3a46">EVC_FWTO_OFFSET</a></div><div class="ttdeci">#define EVC_FWTO_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="dw1000__regs_8h_source.html#l01156">dw1000_regs.h:1156</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 15 2017 18:32:24 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
